(self.modernJsonp=self.modernJsonp||[]).push([["7062"],{303151:function(e,t,n){n.d(t,{Z:()=>o});var i=n(69119),a=n(13882);function o(e,t){(0,a.Z)(2,arguments);var n=(0,i.Z)(e),o=(0,i.Z)(t);return n.getTime()===o.getTime()}},69119:function(e,t,n){n.d(t,{Z:()=>o});var i=n(619013),a=n(13882);function o(e){(0,a.Z)(1,arguments);var t=(0,i.Z)(e);return t.setHours(0,0,0,0),t}},537347:function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function a(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function o(e,n){function i(){a(o)&&o.a.parentNode&&n(o.g)}var o=e;t(e.b,i),t(e.c,i),a(e)}function r(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var l=null,s=null,d=null,c=null;function u(){return null===c&&(c=!!document.fonts),c}function p(e,t){return[e.style,e.weight,!function(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}d=""!==e.style.font}return d}()?"":e.stretch,"100px",t].join(" ")}r.prototype.load=function(e,t){var a=this,r=e||"BESbswy",d=0,c=t||3e3,m=(new Date).getTime();return new Promise(function(e,t){if(u()&&!function(){if(null===s)if(u()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);s=!!e&&603>parseInt(e[1],10)}else s=!1;return s}()){var h,g=new Promise(function(e,t){!function n(){(new Date).getTime()-m>=c?t(Error(""+c+"ms timeout exceeded")):document.fonts.load(p(a,'"'+a.family+'"'),r).then(function(t){1<=t.length?e():setTimeout(n,25)},t)}()});Promise.race([new Promise(function(e,t){d=setTimeout(function(){t(Error(""+c+"ms timeout exceeded"))},c)}),g]).then(function(){clearTimeout(d),e(a)},t)}else h=function(){function s(){var t;(t=-1!=f&&-1!=y||-1!=f&&-1!=_||-1!=y&&-1!=_)&&((t=f!=y&&f!=_&&y!=_)||(null===l&&(l=!!(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=l&&(f==x&&y==x&&_==x||f==b&&y==b&&_==b||f==v&&y==v&&_==v)),t=!t),t&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(d),e(a))}var u=new n(r),h=new n(r),g=new n(r),f=-1,y=-1,_=-1,x=-1,b=-1,v=-1,w=document.createElement("div");w.dir="ltr",i(u,p(a,"sans-serif")),i(h,p(a,"serif")),i(g,p(a,"monospace")),w.appendChild(u.a),w.appendChild(h.a),w.appendChild(g.a),document.body.appendChild(w),x=u.a.offsetWidth,b=h.a.offsetWidth,v=g.a.offsetWidth,function e(){if((new Date).getTime()-m>=c)w.parentNode&&w.parentNode.removeChild(w),t(Error(""+c+"ms timeout exceeded"));else{var n=document.hidden;(!0===n||void 0===n)&&(f=u.a.offsetWidth,y=h.a.offsetWidth,_=g.a.offsetWidth,s()),d=setTimeout(e,50)}}(),o(u,function(e){f=e,s()}),i(u,p(a,'"'+a.family+'",sans-serif')),o(h,function(e){y=e,s()}),i(h,p(a,'"'+a.family+'",serif')),o(g,function(e){_=e,s()}),i(g,p(a,'"'+a.family+'",monospace'))},document.body?h():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),h()}):document.attachEvent("onreadystatechange",function e(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",e),h())})})},e.exports=r}()},307950:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AuthDesktopWebCloseupVideoWithVisibility_pin",selections:[{args:null,kind:"FragmentSpread",name:"AuthDesktopWebCloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="ce07acf2409b70d391c02aa34c238945";let a=i},668681:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselVideoItem_pin",selections:[{args:null,kind:"FragmentSpread",name:"AuthDesktopWebCloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="c84e7534f0992d53c815b4ab599ad3eb";let a=i},64780:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselVideoItem_pin"}],type:"Pin",abstractKey:null};i.hash="83e61e6fc89222c2a0b03276839f44a5";let a=i},944151:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>o});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButtonWrapper_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"DomainLinkButton_pin"},{args:null,kind:"FragmentSpread",name:"useGetInstagramRedirectLink_pin"}],type:"Pin",abstractKey:null};a.hash="e0f426cc8e54a0150382bbe8a7d76024";let o=a},613718:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButton_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"showRecipeCta",storageKey:null},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};i.hash="f8426bd32c5531bed724a11f1f7d3b94";let a=i},417168:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"IdeaPinSecondarySendButton_pin"}],type:"Pin",abstractKey:null};i.hash="8ad2e699556c5cc82f96a8800796d777";let a=i},854266:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"IdeaPinSecondarySendButton_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="06fe8d9d3c50cfa5c040fbb0e9a14675";let a=i},453266:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"AuthDesktopWebCloseupVideoWithVisibility_pin"}],type:"Pin",abstractKey:null};i.hash="7ba89eba255cb97040287ec468d973ed";let a=i},124730:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useBuildCloseupImageOverlayProps_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="759d6577be9e10b82394f48ee87daf24";let a=i},565241:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>o});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInstagramRedirectLink_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"igOwner",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,concreteType:"UserInstagramData",kind:"LinkedField",name:"instagramData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null},{alias:null,args:null,concreteType:"DirectToSiteConfig",kind:"LinkedField",name:"igDirectToSiteConfigs",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"directToSiteLinkWithScheme",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="b2f13a948eb09a6fe3cf984633c352f0";let o=a},33653:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>o});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"images_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"images_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};a.hash="8b6ce790922ff8b900b4ae18b06b7c11";let o=a},107447:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>o});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMediaContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Shuffle",kind:"LinkedField",name:"shuffle",plural:!1,selections:i,storageKey:null},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null}],type:"Pin",abstractKey:null};a.hash="6d07d6f4226aa8095d2c36e8662982e3";let o=a},273250:function(e,t,n){n.d(t,{Z:()=>d});var i=n(686659),a=n(667294),o=n(399353),r=n(24246),l=n(11338),s=n(785893);function d({digitalMediaType:e,isMobile:t=!1,isViewedByOwnerEmployeeOrAgency:n=!1}){(0,a.useEffect)(()=>{(0,i.Z)("AICloseupLabel","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/AICloseupLabel.tsx")},[]);let d=(0,r.Z)(),c={[l.s.TRAINED_ALGORITHMIC_MEDIA]:d.bt("AI modified", "AI modified", "closeup.aIModifiedLabel.label", undefined, true),[l.s.COMPOSITE_WITH_TRAINED_ALGORITHMIC_MEDIA]:d.bt("AI modified", "AI modified", "closeup.aIModifiedLabel.label", undefined, true),[l.s.DETECTED_TRAINED_ALGORITHMIC_MEDIA]:d.bt("AI modified", "AI modified", "closeup.aIModifiedLabel.label", undefined, true)},u=()=>(0,s.jsx)(o.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"ai-generated-label",display:"flex",height:t?48:44,justifyContent:"center",paddingX:4,rounding:400,children:(0,s.jsx)(o.xe,{color:"light",lineClamp:1,size:"300",children:c[e]})});return n?(0,s.jsx)(o.u,{idealDirection:"up",text:d.bt("This label won’t appear on Pins in a promoted state. Your paid ads will include the disclosure on the 'Why am I seeing this ad?' page.", "This label won’t appear on Pins in a promoted state. Your paid ads will include the disclosure on the \"Why am I seeing this ad\" page.", "AICloseupLabel.tooltip.text", undefined, true),children:u()}):u()}},920169:function(e,t,n){n.d(t,{Z:()=>C});var i,a,o=n(686659),r=n(667294);n(167912);var l=n(399353),s=n(239321),d=n(183e3),c=n(24246),u=n(59111),p=n(566431),m=n(239757),h=n(38181),g=n(767415),f=n(785893);let y=(void 0!==i||(i=n(613718)).hash&&"f8426bd32c5531bed724a11f1f7d3b94"!==i.hash&&console.error("The definition of 'DomainLinkButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function _({clientTrackingParams:e,domain:t,link:n,pinKey:i,trafficSource:a,size:_="lg",onClick:x,viewType:b=3,bold:v=!1,iconPosition:w="start",noText:P=!1}){let I,k;(0,r.useEffect)(()=>{(0,o.Z)("DomainLinkButton","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/DomainLinkButton.tsx")},[]);let S=(0,c.Z)(),C=(0,d.Z)(y,i),[j,T]=(0,r.useState)(!1),Z=(0,r.useCallback)(()=>T(e=>!e),[]),A=(0,m.Z)({clickthroughType:"middleClick",location:"closeup.domainLinkButton"}),E=(0,r.useCallback)(()=>{(0,g.nP)(`web.closeup.media_viewer_stats.clickthrough.clicked_from.${675===b?"media_viewer":"closeup"}`)},[b]);return n.startsWith("https://i.pinimg.com")?(0,f.jsx)(r.Fragment,{}):(I=C.showRecipeCta?S.bt("See recipe", "See recipe", "closeup.defaultMetadata.visitButton", undefined, true):t?S.bt("Visit site", "Visit site", "closeup.pinActionDropDown.visitSite", undefined, true):S.bt("Learn more", "Learn more", "closeup.image.domainLinkButton", undefined, true),k="lg"===_?"lg":"md"===_?"md":"sm",(0,f.jsx)(s.Z,{clientTrackingParams:e,hovered:j,pinKey:C,trafficSource:a,viewType:b,children:(0,f.jsx)(l.u,{inline:!0,text:I,zIndex:new l.H3([h.k]),children:P?(0,f.jsx)(l.I_,{_onMouseEnter:Z,_onMouseLeave:Z,accessibilityLabel:I,bgColor:"washLight",href:n,icon:"arrow-up-right",iconColor:"default",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{E(),t(),x({event:e})},rel:"nofollow",size:k}):(0,f.jsxs)(l.xu,{children:[(0,f.jsx)(u.Z,{unsafeCSS:`
              .domain-link-button div {
                font-weight: ${v?"bold":"medium"};
              }
              `}),(0,f.jsx)("div",{className:"domain-link-button",children:(0,f.jsx)(l.ZP,{_onAuxClick:({event:e})=>{(0,p.UE)(e)&&(A(),e.preventDefault(),e.stopPropagation(),E(),x({event:e}))},_onMouseEnter:Z,_onMouseLeave:Z,accessibilityLabel:I,color:"tertiarySemiTransparent",dataTestId:"visit-button",href:n,iconEnd:"end"===w?"arrow-up-right":void 0,iconStart:"start"===w?"arrow-up-right":void 0,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{E(),t(),x({event:e})},rel:"nofollow",size:_,text:I})})]})})}))}var x=n(834237),b=n(230201),v=n(470205),w=n(680391),P=n(667980),I=n(825605),k=n(113759);let S=(void 0!==a||(a=n(944151)).hash&&"e0f426cc8e54a0150382bbe8a7d76024"!==a.hash&&console.error("The definition of 'DomainLinkButtonWrapper_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function C({auxData:e,domain:t,link:n,onClick:i,pinKey:a,trafficSource:l,viewType:s,bold:c=!1,iconPosition:u="start",noText:p=!1}){(0,r.useEffect)(()=>{(0,o.Z)("DomainLinkButtonWrapper","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/DomainLinkButtonWrapper.tsx")},[]);let m=(0,d.Z)(S,a),{logContextEvent:h}=(0,b.u)(),{isInInstagramPinnerExperiment:g,instagramRedirectUrlWithScheme:y}=(0,x.Z)(m),C=g?{is_instagram_redirect:!!y,redirect_url:y}:{is_claimed_domain:!!y},j=y??n,{clientTrackingParams:T}=(0,k.x4)(),Z=(0,w.Z)({href:{pathname:j,state:{trackingParams:T}},target:"blank",clientTrackingParams:T,externalData:{auxData:e,pin:m&&{attributionSourceId:m.attributionSourceId,board:m.board&&{url:m.board.url},campaignId:m.campaignId,entityId:m.entityId,isDownstreamPromotion:m.isDownstreamPromotion,isPromoted:m.isPromoted,pinner:m.pinner&&{username:m.pinner.username},pinPromotionId:m.pinPromotionId,promoter:m.promoter&&{entityId:m.promoter.entityId},storyPinDataId:m.storyPinDataId,trackingParams:m.trackingParams,advertiserId:m.advertiserId}}});return(0,f.jsx)(v.Z,{name:"SafeSuspense_DomainLinkButtonWrapper_DomainLinkButton",children:(0,f.jsx)(I.Z,{children:(0,f.jsx)(P.Z,{overrideDataTestId:"image-link",children:(0,f.jsx)(_,{bold:c,clientTrackingParams:T,domain:t,iconPosition:u,link:j,noText:p,onClick:({event:e})=>{i(),h({event_type:102,element:162,component:4,aux_data:C}),Z({event:e})},pinKey:m,trafficSource:l,viewType:s})})})})}},486973:function(e,t,n){n.r(t),n.d(t,{default:()=>k});var i=n(686659),a=n(667294),o=n(268522),r=n(303151),l=n(399353),s=n(59111),d=n(785893);let c="animated-text";function u({duration:e,show:t,text:n}){(0,a.useEffect)(()=>{(0,i.Z)("CloseupButtonText","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/ImageOverlay/CloseupButtonText.tsx")},[]);let r=(0,a.useRef)(null),u=`
    .${c}-enter {
      opacity: 0;
    }
    .${c}-enter-active {
      opacity: 1;
      transition: opacity ${e}ms cubic-bezier(1,0,1,0);
    }
    .${c}-enter-done {
      opacity: 1;
    }
    .${c}-exit {
      opacity: 1;
    }
    .${c}-exit-active {
      opacity: 0;
      transition: opacity ${e}ms cubic-bezier(0,1,0,1);
    }
    .${c}-exit-done {
      opacity: 0;
    }
  `;return(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(s.Z,{unsafeCSS:u}),(0,d.jsx)(o.Z,{appear:!0,classNames:c,in:t,nodeRef:r,timeout:e,children:(0,d.jsx)(l.xu,{ref:r,opacity:0,children:(0,d.jsx)(l.mg,{size:"300",children:n})})})]})}var p=n(146566),m=n(4533),h=n(15881),g=n(104999),f=n(351736),y=n(501010),_=n(774838),x=n(34550),b=n(418282),v=n(739405),w=n(893957);let P="animated-button-container",I=`
  .${P}-enter  {
    width: 0px;
  }
  .${P}-enter-active {
    width: 100% !important;
    transition: width 200ms ease-in;
  }
  .${P}-enter-done {
    width: 100% !important;
  }
  .${P}-exit {
    width: 100% !important;
  }
  .${P}-exit-active {
    width: 0px !important;
    transition: width 200ms ease-in;
  }
  .${P}-exit-done {
    width: 0px;
  }
`;function k({animateOnMount:e,animationDelayOnMount:t=1e3,leaveOnDurationOnMount:n=3e3,dataTestId:c,icon:k,imageSignature:S,onMouseDown:C,onTap:j,variant:T,ref:Z}){(0,a.useEffect)(()=>{(0,i.Z)("AnimatedCloseupButton","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/ImageOverlay/AnimatedCloseupButton.tsx")},[]);let A=(0,g.Z)(),{isRTL:E}=(0,_.B)(),L=(0,f.vs)(),R=(0,v.HG)(),D=(0,x.M0)(),M=(0,b.Nl)(),{checkExperiment:z}=(0,y.Z)(),B=(0,a.useRef)(null),[F,W]=(0,a.useState)(!1),[V,O]=(0,a.useState)(!1),K=(0,p.Z)({variant:T}),N=(0,a.useMemo)(()=>L&&R?"rgba(17, 17, 17, 0.9)":F?"var(--comp-button-color-hover-background-tertiary-semi-transparent-default)":"var(--comp-button-color-background-tertiary-semi-transparent-default)",[L,R,F]),H="visual-search"===T,$=M.getItem(h.Ml)||0,{animationSeenCount:U,lastAnimationTimestamp:G}=D.getItem(m.Yn)||{animationSeenCount:0,lastAnimationTimestamp:0},X=(0,r.Z)(new Date(G),new Date);return(0,w.Z)(()=>{if(H&&!X&&D.setItem(m.Yn,{animationSeenCount:0,lastAnimationTimestamp:G}),!e||H&&![0,1].includes($)&&z("sg_dweb_improved_share_animation_on_closeup").anyEnabled)return;let i=setTimeout(()=>{O(!0),H&&D.setItem(m.Yn,{animationSeenCount:U+1,lastAnimationTimestamp:Date.now()});let e=setTimeout(()=>{O(!1)},n);return()=>clearTimeout(e)},t);return()=>clearTimeout(i)}),(0,w.Z)(()=>{A({event_type:120,component:128,element:"view-larger"===T?15864:234,view_type:3,aux_data:{image_signature:S}})}),(0,d.jsxs)(l.iP,{ref:Z,accessibilityLabel:K,onMouseDown:C,onMouseEnter:()=>W(!0),onMouseLeave:()=>W(!1),onTap:j,rounding:"circle",children:[(0,d.jsx)(s.Z,{unsafeCSS:I}),(0,d.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,d.jsx)(o.Z,{appear:!0,classNames:P,in:F||V,nodeRef:B,timeout:200,children:(0,d.jsxs)(l.xu,{ref:B,alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:N}},"data-test-id":c,display:"flex",justifyContent:"end",minHeight:48,minWidth:48,position:"relative",rounding:400,width:0,children:[(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},marginEnd:2,marginStart:3,overflow:"hidden",children:(0,d.jsx)(u,{duration:200,show:F||V,text:K})}),(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:E?"12px":0,paddingRight:E?0:"12px"}},children:(0,d.jsx)(l.JO,{accessibilityLabel:K,color:"default",icon:k,size:24})})]})})})]})}},146566:function(e,t,n){n.d(t,{Z:()=>a});var i=n(24246);function a({variant:e}){let t=(0,i.Z)();return"view-larger"===e?t.bt("View larger", "View larger", "closeup.image.mediaViewerButton", undefined, true):t.bt("Explore", "Explore", "closeup.explore.icon", undefined, true)}},358776:function(e,t,n){n.d(t,{Z:()=>s,p:()=>l}),n(167912);var i,a=n(183e3),o=n(501010);let r=(void 0!==i||(i=n(124730)).hash&&"759d6577be9e10b82394f48ee87daf24"!==i.hash&&console.error("The definition of 'useBuildCloseupImageOverlayProps_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function l(e,t,n,i,a,o=!1){return o?!!e&&e.includes("tag")&&!n&&!a||i||!1:!t&&!!e&&e.includes("tag")&&!n&&!a||i||!1}function s({carouselInfo:e,disablePinTagButton:t,domain:n,hasMetTrustAndSafetyCheck:i,isShuffle:s,isEmployee:d,isORBACProfileManager:c,isScenePin:u,navLink:p,pinKey:m,showProductDetailPage:h}){let g=(0,a.Z)(r,m),{checkExperiment:f}=(0,o.Z)(),{access:y,storyPinDataId:_,isPromoted:x}=g,b=!1,v=!1;u||(b=!(v=!!p&&!s)&&!!n&&!!g.link&&!g.link.startsWith("https://i.pinimg.com")&&!(h&&e)&&!s);let w=i&&!c&&!x;return{showCloseupShopDomainLinkButton:u,showDebugSignalsFeedbackButton:!!d,showDomainLink:b,showDomainLinkButton:v=v&&!g?.isGoLinkless,showFlashlightButton:w,showPinTagButton:l(y,_,t,c,s,f("web_verify_auto_product_tags",{dangerouslySkipActivation:!0}).anyEnabled)}}},993911:function(e,t,n){n.d(t,{Z:()=>u});var i=n(686659),a=n(667294),o=n(399353),r=n(230201),l=n(465784),s=n(24246),d=n(59111),c=n(785893);function u({handlePause:e,handlePlay:t,musicAttributions:n,shouldMute:u,showEndCard:p}){(0,a.useEffect)(()=>{(0,i.Z)("MusicAttribution","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/VisualContent/MusicAttribution.tsx")},[]);let m=(0,s.Z)(),{logContextEvent:h}=(0,r.u)(),[g,f]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{!p&&(n?.length||u)&&h({event_type:u?14600:14601,view_type:3,view_parameter:140})},[h,n,u,p]),p||!n?.length&&!u)return null;let y=()=>{t&&t(),f(!1)},_="";if(n?.length===1){let{artist:e="",title:t=""}=n[0];_=e&&t?`${e} - ${t}`:""}let x=(n?.length||0)>=2?(0,c.jsx)(o.xu,{children:(0,c.jsx)(o.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>{e&&e(),f(!0)},children:(0,c.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(o.xu,{marginEnd:2,children:(0,c.jsx)(o.JO,{accessibilityLabel:m.bt("Music icon", "Music icon", "web.closeup.musicicon", undefined, true),color:"inverse",icon:u?"music-slash":"music",inline:!0,size:12})}),(0,c.jsx)(o.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:m.bt("View the playlist", "View the playlist", "web.closeup.musicAttibutionModal.entryPoint", undefined, true)})]})})}):(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(o.JO,{accessibilityLabel:m.bt("Music icon", "Music icon", "web.pin.closeup.musicicon", undefined, true),color:"inverse",icon:u?"music-slash":"music",inline:!0,size:12}),(0,c.jsx)(o.xu,{marginStart:2,overflow:"hidden",children:(0,c.jsxs)("span",{className:_.length>=50?"marquee":void 0,style:{display:"inline-block",maxWidth:_.length>=50?"260px":void 0},children:[(0,c.jsx)(o.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:_}),(0,c.jsx)(d.Z,{unsafeCSS:`
                  .marquee {
                   animation: marquee 10s linear infinite;
                   animation-delay: 2s;
                  }

                  .marquee:hover {
                      animation-play-state: paused;
                  }


                 @keyframes marquee {
                   0% {
                     transform: translateX(0%);
                    }
                  50% {
                    transform: translateX(-100%);
                  }
                  100% {
                    transform: translateX(0%);
                  }
              }
            `})]})})]});return(0,c.jsxs)(a.Fragment,{children:[u?(0,c.jsx)(a.Fragment,{children:(0,c.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(o.xu,{marginEnd:2,children:(0,c.jsx)(o.JO,{accessibilityLabel:m.bt("Music icon", "Music icon", "web.closeup.musicMutedIcon", undefined, true),color:"inverse",icon:"music-slash",inline:!0,size:12})}),(0,c.jsx)(o.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:m.bt("Audio not available in your location", "Audio not available in your location", "web.closeup.musicAttribution", undefined, true)})]})}):x,g&&(0,c.jsx)(l.ZP,{accessibilityModalLabel:m.bt("Artist and song title for this Pin", "Artist and song title for this Pin", "web.closeup.musicAttibutionModal", undefined, true),heading:(0,c.jsxs)(o.kC,{justifyContent:"between",children:[(0,c.jsx)(o.qd,{size:"600",children:m.bt("Playlist for this video", "Playlist for this video", "web.closeup.musicAttibutionModal.heading", undefined, true)}),(0,c.jsx)(o.hU,{accessibilityLabel:m.bt("Close modal button", "Close modal button", "web.closeup.musicAttibutionModal.closeButton", undefined, true),bgColor:"default",icon:"close",iconColor:"default",onClick:y,size:"sm"})]}),onDismiss:y,children:(0,c.jsx)(o.xu,{marginBottom:5,paddingX:5,paddingY:1,children:n?.map(({isrc:e,thumbnail_image_url:t,title:n,artist:i},a)=>(0,c.jsxs)(o.xu,{display:"flex",padding:1,children:[t&&(0,c.jsx)(o.xu,{color:"darkWash",height:60,rounding:700,width:60,children:(0,c.jsx)(o.Ee,{alt:m.bt("Image of album art", "Image of album art", "web.closeup.musicAttibutionModal.albumArt", undefined, true),color:"darkWash",naturalHeight:1,naturalWidth:1,src:t})}),(0,c.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"center",paddingX:2,children:[(0,c.jsx)(o.xv,{weight:"bold",children:n??""}),(0,c.jsx)(o.xv,{size:"100",children:i??""})]})]},e||`${a}`))})})]})}},708139:function(e,t,n){n.d(t,{Z:()=>e3});var i,a,o,r=n(686659),l=n(667294),s=n(399353),d=n(785893);let c=({children:e})=>((0,l.useEffect)(()=>{(0,r.Z)("ImagePadding","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/VisualContent/ImagePadding.tsx")},[]),(0,d.jsx)(s.xu,{display:"flex",height:"100%",justifyContent:"center",padding:5,width:"100%",children:e}));var u=n(249459),p=n(24246),m=n(774838),h=n(398542),g=n(15392),f=n(113759);let y=({embedUrl:e,isWideVideo:t,paddingBottom:n="50%",shouldPadImage:i})=>{(0,l.useEffect)(()=>{(0,r.Z)("EmbeddedVideoContent","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/VisualContent/EmbeddedVideoContent/EmbeddedVideoContent.tsx")},[]);let a=(0,p.Z)(),o=(0,m.B)(),y=t?g.KP:g.Gg,{showCloseupContentRight:_,closeupWithinMasonryEnabled:x,viewportSize:b}=(0,f.x4)(),v=e?.replace("http://","https://");v&&v.startsWith("https://www.youtube.com/embed/")&&(v=v.replace("https://www.youtube.com/embed/","https://www.youtube-nocookie.com/embed/"));let w=(0,d.jsx)("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%",paddingBottom:n,...(0,h.Z)({isSideBySide:!t,isPadded:i,isRTL:o.isRTL,closeupWithinMasonryEnabled:x})?.borderStyle},children:(0,d.jsx)("iframe",{allowFullScreen:!0,id:u.Z.VIDEO_IFRAME_ID,src:v,style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:a.bt("Embedded content", "Embedded content", "Accessible content for the embedded content iframe", undefined, true)})}),P=_&&"lg"===b?(0,d.jsx)(s.xu,{marginBottom:6,marginEnd:t||i?0:6,width:y,children:w}):w;return i?(0,d.jsx)(c,{children:P}):P};n(167912);var _=n(912685),x=n(166988),b=n(713645),v=n(77957);n(422578);var w=n(403972),P=n(104999),I=n(183e3);let k=(void 0!==i||(i=n(668681)).hash&&"c84e7534f0992d53c815b4ab599ad3eb"!==i.hash&&console.error("The definition of 'CarouselVideoItem_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),S=({contextLogData:e,height:t,isFocused:n,videoList:i,onFocus:a,onUnfocus:o,pinId:c,pinKey:u,width:p})=>{(0,l.useEffect)(()=>{(0,r.Z)("CarouselVideoItem","/app/common/react/components/common/Carousel/CarouselItem/CarouselVideoItem.tsx")},[]);let m=(0,P.Z)(),h=(0,I.Z)(k,u),{V_720P:g,V_HLSV4:f,V_HLSV3_MOBILE:y}=i,{height:_=1,width:x=1,thumbnail:b}=g||f||y||{},v=x/_,S="100%";v<1&&"number"==typeof t&&"number"==typeof p&&(S=`${Math.min(t*v,p)}px`),(0,l.useEffect)(()=>{n&&a?a():o&&o()},[n,a,o]),(0,l.useEffect)(()=>{n&&m({component:e.component,event_type:13,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[n,e,m]);let C=(0,l.useCallback)(()=>{m({component:e.component,event_type:3621,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[e,m]);return(0,d.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,d.jsx)(s.xu,{"data-testid":"carousel-video-item",height:"100%",width:S,children:(0,d.jsx)(w.Z,{autoplay:n,contextLogData:e,customThumbnail:b,disabled:!n,loop:!0,muted:!1,objectFit:"contain",onPlay:C,pinId:c,pinKey:h,preferMp4:!0,showControls:"hover",variant:"default",video:{mp4:g,hls:f,hlsv3:y}})})})};var C=n(230201),j=n(514837),T=n(150147),Z=n(23641),A=n(575647),E=n(766162);let L=(void 0!==a||(a=n(64780)).hash&&"83e61e6fc89222c2a0b03276839f44a5"!==a.hash&&console.error("The definition of 'CloseupCarousel_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function R({borderStyle:e,displayHeight:t,displayWidth:n,pinKey:i}){(0,l.useEffect)(()=>{(0,r.Z)("CloseupCarousel","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupCarousel/CloseupCarousel.tsx")},[]);let{logContextEvent:a}=(0,C.u)(),{closeupWithinMasonryEnabled:o,isCloseupMediaViewerOpen:c,showProductDetailPage:u}=(0,f.x4)(),{carouselInfo:p,mainImage:m}=(0,v.G)(),{carouselData:h,handleCarouselSwipe:g}=p||{},{index:y=0}=h||{},{height:w,width:P}=m,k=(0,I.Z)(L,i),R=(0,x.Z)({showProductDetailPage:!!k.isEligibleForPdp}),{entityId:D}=k,M=(0,l.useRef)(null),z=(0,A.Z)(k),B=k.isEligibleForPdp?z():void 0,F=k.isEligibleForPdp?144:void 0,W=k.isEligibleForPdp?3:void 0,V=(0,l.useCallback)(e=>{e>=1&&(0,Z.Nx)("image")},[]),O=(0,l.useMemo)(()=>({viewParameter:u?144:156,view:3,component:u?14012:179,objectId:D}),[D,u]);(0,l.useEffect)(()=>{h?.carousel_slots?.find(e=>e.videos?.video_list)&&a({event_type:120,view_type:O.view,view_parameter:O.viewParameter,component:O.component,object_id_str:O.objectId})},[a,h?.carousel_slots,O]);let K=(0,l.useCallback)((i,a,o,r,l)=>{let u,p;return i.videos?.video_list?(u=(0,d.jsx)(S,{contextLogData:O,height:t,isFocused:o,onFocus:r,onUnfocus:l,pinId:D,pinKey:k,videoList:i.videos.video_list,width:n}),p=i.videos.id):(u=(0,d.jsx)(b.Z,{_enableViewTransitions:!0,borderStyle:e,suppressViewTransitionTags:c||a!==y,type:"image",children:(0,d.jsx)(E.Z,{fit:"cover",onLoad:()=>V(a),slot:i,slotIndex:a})}),p=i.image_signature),(0,d.jsx)(s.xu,{height:"100%",width:"100%",children:u},`${D}-${p||a}`)},[e,y,c,D,O,t,k,n,V]);return(0,d.jsxs)(s.xu,{ref:M,dangerouslySetInlineStyle:{__style:{aspectRatio:o?(0,_.GJ)(P,w):void 0,contain:"strict",justifySelf:"center"}},height:"100%",overflow:o?"hidden":void 0,rounding:o&&!R?400:void 0,width:o?void 0:"100%",children:[(0,d.jsx)(j.Z,{carouselData:{...h,type:"canonical"},contextLogData:B,height:t,id:D,impressionType:"Pin",index:y,slideWidth:n,view:W??3,viewParameter:F??156}),(0,d.jsx)(T.Z,{itemHeight:t,items:h?.carousel_slots||[],itemWidth:n,mode:"single",onIndexChange:({nextIndex:e})=>g?.(e),renderItem:({item:e,index:t,isFocused:n,onFocus:i,onUnfocus:a})=>K(e,t,n,i,a),selectedIndex:y,showNavigationButtons:!0,showScrollMarkers:!k.isEligibleForPdp})]})}var D=n(519371),M=n(433069),z=n(835531);let B=(0,l.memo)(function({borderStyle:e,dominantColor:t,imageWithPreview:n,fit:i,sizes:a,srcSet:o}){let{closeupWithinMasonryEnabled:r,isCloseupMediaViewerOpen:l,showProductDetailPage:c}=(0,f.x4)(),{fiftyPercentWidth:u}=(0,D.Re)(),p=(0,x.Z)({showProductDetailPage:c}),m=(0,M.b)(),h="closeup-image-main",g=""!==n.mainImage.src?(0,d.jsx)(s.xu,{"data-test-id":h,height:"100%",width:"100%",children:(0,d.jsx)(z.Z,{_enableViewTransitions:!0,_fixCompletedOnLoad:!0,alt:n.mainImage.alt,borderStyle:p?void 0:e,color:t,elementTiming:`${h}-MainPinImage`,fetchPriority:"high",fit:i,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,onLoad:()=>{(0,Z.Nx)("image")},sizes:a,src:n.mainImage.src,srcSet:o,suppressViewTransitionTags:l})}):null;return(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:r?(0,_.GJ)(n.naturalWidth,n.naturalHeight):void 0,contain:"strict",justifySelf:r?"center":void 0}},height:"100%",maxWidth:u,overflow:r?"hidden":void 0,rounding:p?void 0:600,width:r?void 0:"100%",children:!m&&n.previewImage?.src?(0,d.jsx)(s.Ee,{alt:n.previewImage?.alt??"",color:t,fetchPriority:"high",fit:i,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,role:"img",src:n.previewImage.src,children:g}):g})}),F=e=>((0,l.useEffect)(()=>{(0,r.Z)("AuthDesktopWebCloseupImage","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/AuthDesktopWebCloseupImage.tsx")},[]),(0,d.jsx)(B,{...e}));var W=n(273250),V=n(874132),O=n(667980),K=n(825605);let N=112+V.Z;function H({digitalMediaType:e,shouldMoveAILabel:t,isViewedByOwnerEmployeeOrAgency:n}){return(0,l.useEffect)(()=>{(0,r.Z)("AICloseupLabelWrapper","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/AICloseupLabelWrapper.tsx")},[]),(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)(s.xu,{height:`calc(100% - ${t?N:56}px)`}),(0,d.jsx)(s.xu,{display:"flex",justifyContent:"start",maxWidth:"225px",paddingX:V.Z,children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(O.Z,{children:(0,d.jsx)(W.Z,{digitalMediaType:e,isViewedByOwnerEmployeeOrAgency:n})})})})]})}var $=n(920169);let U=({children:e,horizontalOffset:t=0,name:n,verticalOffset:i=0})=>{(0,l.useEffect)(()=>{(0,r.Z)("OverlayLayer","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/OverlayLayer.tsx")},[]);let a=new s.Ry(1),{closeupWithinMasonryEnabled:o}=(0,f.x4)(),{mainImage:c}=(0,v.G)(),{height:u,width:p}=c;return(0,d.jsx)(s.xu,{bottom:!o,dangerouslySetInlineStyle:{__style:{aspectRatio:o?p/u:void 0,justifySelf:o?"center":void 0,pointerEvents:"none",padding:o?void 0:`${i}px ${t}px`}},"data-test-id":`closeup-image-overlay-layer-${n}`,height:"100%",left:!0,marginEnd:"auto",marginStart:"auto",position:"absolute",right:!0,top:!o,zIndex:a,children:e})};var G=n(583522),X=n(654805),J=n(470205),Y=n(935059),q=n(975703);function Q({carouselData:e,children:t,disableAnimations:n=!1,displayWidth:i,hide:a}){(0,l.useEffect)(()=>{(0,r.Z)("AnimatedFab","/app/www/common/Carousel/AnimatedFab.tsx")},[]);let o=(0,l.useCallback)(()=>(({carouselData:e,containerWidth:t,slotWidth:n})=>{let{index:i,carousel_slots:a}=e||{},o=Math.floor(n);return void 0===i||!a||i>=a.length-1?0:t-o})({carouselData:e,containerWidth:i,slotWidth:i}),[e,i]),[c,u]=(0,l.useState)(o()),[p,m]=(0,l.useState)(n),[h,g]=(0,l.useState)(),f=(0,l.useCallback)(()=>{u(o())},[o]);return(0,l.useEffect)(()=>{let e=!0;return n||(m(!1),g(t=>(clearTimeout(t),setTimeout(()=>{e&&(f(),a||m(!0))},500)))),()=>{e=!1}},[e?.index,n,f,a]),(0,l.useEffect)(()=>()=>clearTimeout(h),[h]),(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{marginRight:c,transition:n?void 0:"opacity 500ms, visibility 500ms ease-in-out",visibility:p?"visible":"hidden"}},"data-test-id":"animated-fab",opacity:100*!!p,children:t})}var ee=n(546151);let et=(0,l.lazy)(()=>n.e("74993").then(n.bind(n,409672))),en=(0,l.lazy)(()=>n.e("95804").then(n.bind(n,36460))),ei=(0,l.lazy)(()=>Promise.resolve().then(n.bind(n,486973))),ea=(0,l.lazy)(()=>n.e("43794").then(n.bind(n,215296))),eo=({auxData:e,carouselInfo:t,domain:n,handleMediaButtonClick:i,isHovered:a,link:o,mediaViewerExpandButtonRef:c,onImageClick:u,pin:p,showCloseupShopDomainLinkButton:m,showDebugSignalsFeedbackButton:h,showDomainLink:g,showDomainLinkButton:f,showFlashlightButton:y,showPinTagButton:b,trafficSource:w,maxCloseupImageWidth:P,shouldPadImage:I,verticalOffset:k,horizontalOffset:S})=>{(0,l.useEffect)(()=>{(0,r.Z)("CloseupImageOverlay","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/CloseupImageOverlay.tsx")},[]);let{isRelatedPins10PercentVisible:C}=(0,q.K)(),{mainImage:j,mediaViewerImage:T}=(0,v.G)(),Z=(0,Y.Z)(),{peekRedesignFastFollowsEnabled:A}=(0,X.Z)(j),E=(0,x.Z)({showProductDetailPage:!!p.is_eligible_for_pdp}),[L,R]=(0,l.useState)(!1),D=a||L,M=(0,l.useCallback)(()=>R(!0),[]),z=(0,l.useCallback)(e=>{e.currentTarget.contains(e.relatedTarget)||R(!1)},[]),{containerWidth:B}=(0,_.ZP)({carouselData:t?.carouselData,mainImage:j,maxCloseupImageWidth:P,shouldPadImage:I,pinKey:{type:"Legacy",data:p}}),F=4*V.Z,W=F+(C||E?0:56),N=48+W+8,eo=e=>A?{bottom:e,position:C?"absolute":"sticky",transition:C?"position 100ms cubic-bezier(0, 0, 1, 1)":"position 50ms cubic-bezier(0, 0, 1, 1)"}:{bottom:e,position:"sticky"},{isCloseupMediaViewerEnabled:er}=(0,G.Z)({isShufflePin:!!p?.shuffle,carouselContainsVideo:p.carousel_data?.carousel_slots?.some(e=>!!e.videos)??!1}),el=p&&p.origin_pinner&&Z.isAuth&&Z.id===p.origin_pinner.id||!p?.is_go_linkless,es=(0,ee.zX)(p.digital_media_source_type),ed=(f||m)&&el,ec=ed&&!o.startsWith("https://i.pinimg.com"),eu=!t||0===t.carouselData.index;return(0,d.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:{display:"contents"}},onBlur:z,onFocus:M,children:[g&&(0,d.jsx)(U,{horizontalOffset:S,name:"domain-link",verticalOffset:k,children:(0,d.jsxs)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:[(0,d.jsx)(s.xu,{paddingX:1,children:(0,d.jsx)(s.JO,{accessibilityLabel:"",color:"inverse",icon:"arrow-up-right",size:16})}),(0,d.jsx)(s.xu,{paddingX:1,children:(0,d.jsx)(s.xe,{color:"inverse",weight:"bold",children:n})})]})}),y&&(0,d.jsxs)(U,{horizontalOffset:S,name:"flashlight-button",verticalOffset:k,children:[(0,d.jsx)(s.xu,{height:`calc(100% - ${48+F}px)`}),(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:eo(W)},display:"flex",justifyContent:"end",paddingX:V.Z,right:!0,children:(0,d.jsx)(J.Z,{name:"SafeSuspense_CloseupImageOverlay_ShopButton",children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(O.Z,{children:(0,d.jsx)(en,{imageSignature:p.image_signature,pinId:p.id,show:eu,trafficSource:w})})})})})]}),er&&(0,d.jsxs)(U,{horizontalOffset:S,name:"media-viewer-button",verticalOffset:k,children:[(0,d.jsx)(s.xu,{height:`calc(100% - ${y?(48+F)*2:F+48}px)`}),(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:eo(N)},display:"flex",justifyContent:"end",paddingX:V.Z,right:!0,children:(0,d.jsx)(Q,{carouselData:t?.carouselData,disableAnimations:!0,displayWidth:B,children:(0,d.jsx)(J.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(O.Z,{children:(0,d.jsx)(ei,{ref:c,animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:p.image_signature,onMouseDown:()=>{new Image().src=T.url},onTap:i,variant:"view-larger"})})})})})})]}),h&&(0,d.jsxs)(U,{horizontalOffset:S,name:"debug-signals-feedback",verticalOffset:k,children:[(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 115px)"}}}),(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:eo(W)},display:"flex",justifyContent:"end",paddingX:V.Z,right:!0,children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(ea,{pinKey:{type:"Legacy",data:p}})})})]}),p.digital_media_source_type&&es&&(0,d.jsx)(U,{horizontalOffset:S,name:"ai-generated-label",verticalOffset:k,children:(0,d.jsx)(H,{digitalMediaType:p.digital_media_source_type,isViewedByOwnerEmployeeOrAgency:p.is_viewed_by_owner_or_employee_or_partner_of_business||!1,shouldMoveAILabel:ec&&D})}),ed&&(0,d.jsxs)(U,{horizontalOffset:S,name:"domain-link-button",verticalOffset:k,children:[(0,d.jsx)(s.xu,{height:`calc(100% - ${48+F}px)`}),(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{...eo(W),opacity:+!!D,pointerEvents:D&&!t?"auto":"none"}},display:"flex",justifyContent:"start",maxWidth:"calc(100% - 88px)",paddingX:V.Z,tabIndex:-1,children:(0,d.jsx)($.Z,{auxData:e,domain:n,link:o,onClick:u,pinKey:{type:"Legacy",data:p},trafficSource:w})})]}),b&&(0,d.jsx)(U,{horizontalOffset:S,name:"tag-button",verticalOffset:k,children:(0,d.jsx)(J.Z,{name:"SafeSuspense_CloseupImageOverlay_CloseupTagButton",children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(O.Z,{children:(0,d.jsx)(et,{pin:p})})})})})]})};var er=n(358776),el=n(970766),es=n(710801),ed=n(691835),ec=n(398504),eu=n(489325),ep=n(953994),em=n(290216),eh=n(632492),eg=n(542515),ef=n(9065),ey=n(484807);let e_=(0,ef.Z)(()=>Promise.all([n.e("57207"),n.e("68710"),n.e("14055"),n.e("30793")]).then(n.bind(n,33130)),void 0,e=>33130,"app-common-react-components-auth-desktop-web-closeup-CloseupShuffle-CloseupShuffle",e=>["57207","68710","14055","30793"]),ex=(0,l.memo)(({borderStyle:e,closeupWithinMasonryEnabled:t,imageWithPreview:n,peekRedesignFastFollowsEnabled:i,sizes:a,srcSet:o})=>(0,d.jsx)(ey.Z,{metricName:"CloseupImage",children:(0,d.jsx)(eu.Z,{id:"CloseupImage",children:(0,d.jsx)(F,{borderStyle:e,dominantColor:D.yc,fit:i||t?void 0:"contain",imageWithPreview:n,sizes:a,srcSet:o})})}));function eb({onImageClick:e,isHovered:t,mediaViewerExpandButtonRef:n,pin:i,shouldPadImage:a,trafficSource:o,viewParameter:c,isORBACProfileManager:u,handleMediaButtonClick:g}){let y,b;(0,l.useEffect)(()=>{(0,r.Z)("CloseupImageContainer","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/CloseupImage/CloseupImageContainer.tsx")},[]);let w=(0,p.Z)(),{originalImageUrl:P,imageSignature:I,link:k,isScenePin:S,disablePinTagButton:C,showProductDetailPage:j,maxCloseupImageWidth:T,imageWithPreview:Z}=(0,es.Z)({pinKey:{type:"Legacy",data:i}}),E=(0,Y.Z)(),{mainImage:L,carouselInfo:M,srcSet:z,srcSizes:B}=(0,v.G)(),{peekRedesignFastFollowsEnabled:F}=(0,X.Z)(L),W=(0,l.useRef)(null),{domain:V,shuffle:O}=i,K=!!M?.carouselData,{naturalWidth:N,naturalHeight:H}=Z,{closeupWithinMasonryEnabled:$,clientTrackingParams:U,showCloseupContentRight:G,viewportSize:J,setCalculatedImageHeight:q}=(0,f.x4)(),Q=(0,x.Z)({showProductDetailPage:!!i.is_eligible_for_pdp}),{isRTL:ee}=(0,m.B)();(0,l.useEffect)(()=>{W.current&&q&&q(W.current.clientHeight)},[W,q]);let et=(0,l.useMemo)(()=>Z,[Z]),{borderStyle:en}=(0,l.useMemo)(()=>(0,h.Z)({isSideBySide:G,isPadded:a,isRTL:ee,closeupWithinMasonryEnabled:$,blendedUIEnabled:Q}),[G,a,ee,$,Q]),{containerHeight:ei,containerWidth:ea,horizontalOffset:eu,verticalOffset:ef}=(0,_.ZP)({carouselData:M?.carouselData,mainImage:L,maxCloseupImageWidth:T,shouldPadImage:a,pinKey:{type:"Legacy",data:i}}),[ey,eb]=(0,l.useState)({width:ea,height:ei}),ev=(0,l.useCallback)(()=>{let e=ea>ei?ei/ea:1,t=W.current;if(!t)return;let n=t.offsetWidth*e;eb(e=>{let i={height:t.offsetHeight||n,width:t.offsetWidth};return e.height!==i.height||e.width!==i.width?i:e})},[ei,ea]);(0,eg.Z)(ev,W);let ew=!!O,eP=(0,ep.Z)({isHiddenPin:i.is_hidden,isUnsafePin:i.is_unsafe}),{currentDomain:eI}=(0,el.Z)({carouselData:i.carousel_data&&{carouselSlots:i.carousel_data.carousel_slots&&i.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:i.carousel_data?.index},domain:i.domain}),ek=eI||V,eS={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0};if(M&&M.carouselData&&M.carouselData.id){let{carousel_slots:e=[],id:t,index:n=0}=M.carouselData;y=e[n]&&e[n].link,eS.carousel_slot_id=e[n]&&e[n].id,eS.carousel_data_id=t,eS.carousel_slot_index=n,ek=e[n]&&e[n].domain||ek}let eC=(0,A.Z)({type:"Legacy",data:i})();eC&&(eS.commerce_data=eC.commerce_data);let ej=y||k||P||"",eT=(0,d.jsx)(ex,{borderStyle:en,closeupWithinMasonryEnabled:$,imageWithPreview:et,peekRedesignFastFollowsEnabled:F,sizes:B,srcSet:z}),eZ=eT;K&&(eZ=(0,d.jsx)(R,{borderStyle:en,displayHeight:ey?.height,displayWidth:ey?.width,pinKey:{type:"Legacy",data:i}})),ew&&(eZ=(0,d.jsx)(e_,{clientTrackingParams:U,naturalHeight:H,naturalWidth:N,pinId:i.id,shuffleId:O?.id,children:(0,d.jsx)(s.xu,{width:"100%",children:eT})}));let{maxHeight:eA,fiftyPercentWidth:eE,fiftyPercentHeight:eL}=(0,D.Re)(),{maxHeight:eR}=(0,ec.Z)({pinKey:{type:"Legacy",data:i}}),{maxHeight:eD}=(0,ed.Z)({showProductDetailPage:!!i.is_eligible_for_pdp,mainImage:L,skipAspectRatioCheck:K}),{showCloseupShopDomainLinkButton:eM,showDebugSignalsFeedbackButton:ez,showDomainLink:eB,showDomainLinkButton:eF,showFlashlightButton:eW,showPinTagButton:eV}=(0,er.Z)({carouselInfo:M,disablePinTagButton:C,domain:ek||"",hasMetTrustAndSafetyCheck:eP,isShuffle:ew,isEmployee:E.isAuth&&!!E.isEmployee,isORBACProfileManager:u,isScenePin:S,navLink:ej,pinKey:{type:"Legacy",data:i},showProductDetailPage:j});return Q?b=eD:$?b=eR:F||(b="sm"===J?eL:eA),(0,d.jsxs)(s.xu,{ref:W,alignItems:"stretch",alignSelf:$?"center":void 0,dangerouslySetInlineStyle:{__style:{aspectRatio:(0,_.GJ)(N,H),backgroundColor:$?void 0:D.yc}},"data-test-id":"closeup-body-image-container",display:"flex",height:$?"100%":ei,maxHeight:b,maxWidth:eE,position:"relative",width:$?"100%":ea,children:[(0,d.jsxs)(s.xu,{"aria-label":K?w.bt("Carousel of Pins", "Carousel of Pins", "CloseupImageContainer.section.ariaLabel", undefined, true):void 0,as:K?"section":void 0,dangerouslySetInlineStyle:{__style:{...en,display:$?"grid":"block"}},"data-test-id":"closeup-image",height:"auto",id:`closeup-image-container-${i.id}`,overflow:"hidden",width:"100%",children:[eZ,(0,d.jsx)(eo,{auxData:eS,carouselInfo:M,domain:ek??V??"",handleMediaButtonClick:g,horizontalOffset:eu,imageSignature:I,isHovered:t,link:ej,maxCloseupImageWidth:T,mediaViewerExpandButtonRef:n,onImageClick:e,pin:i,shouldPadImage:a,showCloseupShopDomainLinkButton:eM,showDebugSignalsFeedbackButton:ez,showDomainLink:eB,showDomainLinkButton:eF,showFlashlightButton:eW,showPinTagButton:eV,trafficSource:o,verticalOffset:ef,viewParameter:c})]}),n&&(0,d.jsx)(s.mh,{zIndex:eh.lI,children:(0,d.jsx)(em.Qp,{anchor:n.current,experienceIds:[506692],flyoutSize:"md",idealDirection:"up",placementId:12,showCaret:!0,textWeight:"normal"})})]})}var ev=n(993911),ew=n(896313),eP=n(566431),eI=n(830031),ek=n(852796),eS=n(176783),eC=n(967515),ej=n(408640),eT=n(893957),eZ=n(764682),eA=n(63805);let eE=(e,t)=>e?13799:0===t?227:228;var eL=n(642578),eR=n(774014),eD=n(173922),eM=n(661376),ez=n(410706),eB=n(639043),eF=n(151383),eW=n(450228),eV=n(317083);let eO={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",paddingTop:"30px",top:0};function eK({onImageClick:e,isHovered:t,pin:n,shouldPadImage:i,trafficSource:a,viewParameter:o,isORBACProfileManager:c,handleMediaButtonClick:u}){let p;(0,l.useEffect)(()=>{(0,r.Z)("SIIPMediaContainer","/app/common/react/components/auth-desktop-web-closeup/StaticImageIdeaPin/SIIPMediaContainer.tsx")},[]);let{originalImageUrl:g,imageSignature:y,link:b,isScenePin:w,disablePinTagButton:I,maxCloseupImageWidth:k,imageWithPreview:S}=(0,es.Z)({pinKey:{type:"Legacy",data:n}}),C=(0,Y.Z)(),{closeupWithinMasonryEnabled:j,peekCloseupEnabled:T,viewportSize:E,clientTrackingParams:L,showCloseupContentRight:R}=(0,f.x4)(),{isRTL:M}=(0,m.B)(),z=(0,l.useRef)(null),{maxHeight:B,fiftyPercentHeight:W,fiftyPercentWidth:V}=(0,D.Re)(),{maxHeight:O}=(0,ec.Z)({pinKey:{type:"Legacy",data:n}}),[N,H]=(0,l.useState)(!1),$=(0,x.Z)({showProductDetailPage:!!n.is_eligible_for_pdp}),{group:U}=(0,eD.Z)(),G="enabled_idea_pin"===U,{borderStyle:X}=(0,h.Z)({isSideBySide:R,isPadded:i,isRTL:M,closeupWithinMasonryEnabled:j,blendedUIEnabled:$}),q=(0,ep.Z)({isHiddenPin:n.is_hidden,isUnsafePin:n.is_unsafe}),{mainImage:Q,srcSizes:ee,srcSet:et}=(0,v.G)(),{domain:en="",id:ei,story_pin_data:ea}=n,el={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0},ed=(0,A.Z)({type:"Legacy",data:n})();ed&&(el.commerce_data=ed.commerce_data);let eu=b||g||"",{data:em=[]}=(0,eM.Z)({name:"StoryPinTaggedProductsResource",options:{id:n.id},noCache:!0}),{pages:eh=[]}=ea||{},eg=[5,6,2],ef=eh.filter(e=>{let t=e?.layout;return void 0!==t&&!eg.includes(t)||(0,ew.J)(e)}),{activePageIndex:ey,captions:e_,currentPage:ex,handleMute:eb,handlePageChange:eK,handlePause:eN,handlePausePlay:eH,handlePlay:e$,handleUpdateVideoInfo:eU,handleVideoEnd:eG,handleVideoScrubbingNewPage:eX,handleWatchAgain:eJ,isActive:eY,isSeeking:eq,mute:eQ,progressInfo:e0,showEndCard:e1}=function({pages:e,viewType:t,viewParameter:n,pinId:i}){let{clearSeekTime:a}=(0,eC.RC)(),{setIdeaPinActivePage:o}=(0,eA.Ut)(),[r,s]=(0,l.useState)(0),[d,c]=(0,l.useState)(!0),[u,p]=(0,l.useState)(!0),[h,g]=(0,l.useState)(!1),[f,y]=(0,l.useState)(null),_=(0,P.Z)(),x=e[r],b=(0,ek.g)(),v=(0,eI.A)(),w=(0,l.useRef)(null),{blocks:[I]=[null]}=(0,ew.w)({storyPinBlocks:x?.blocks||[],blocksToRender:[eS.h8.VIDEO]}),{seekTimes:k}=(0,eC.Hx)(),S=k&&k[i],C=I?.type===eS.h8.VIDEO&&I?.video,j=(0,m.B)().locale.toLowerCase(),T=C&&(C?.video_list?.V_720P?.captions_urls||C?.video_list?.V_HLSV3_MOBILE?.captions_urls)||{},A=j&&T[j]||Object.values(T)[0]||"",E=(0,l.useCallback)(i=>{(0,Z.sX)("startNewPwt"),v&&v.abort("startNewPwt"),b&&(b.abort("startNewPwt"),b.start(),b.addBinaryAnnotation("page.current.index",i,"I16"),b.addBinaryAnnotation("page.count",e.length,"I16"),b.addBinaryAnnotation("view.type",t,"I32"),b.addBinaryAnnotation("view.parameter",n,"I32"))},[e.length,v,b,n,t]),L=(0,l.useCallback)(e=>{e&&e instanceof ej.B7&&(e.clear(),e=null)},[]),R=(0,l.useCallback)(t=>{L(w.current),!C&&e.length>1&&(w.current=new ej.B7(e=>{y({currentTime:e<1?e:1,duration:1})},()=>{t<e.length-1?(L(w.current),M(t+1)):(g(!0),c(!1))},eP.oN))},[e]),D=(0,l.useCallback)(e=>{y({currentTime:0,duration:1}),R(e)},[R]);(0,eT.Z)(()=>(v&&(v.addBinaryAnnotation("page.current.index",r,"I16"),v.addBinaryAnnotation("page.count",e.length,"I16"),v.addBinaryAnnotation("view.type",t,"I32"),v.addBinaryAnnotation("view.parameter",n,"I32")),(0,Z.rt)("page.current.index",r,"I16"),(0,Z.rt)("page.count",e.length,"I16"),(0,Z.rt)("view.type",t,"I32"),(0,Z.rt)("view.parameter",n,"I32"),D(r),()=>{w.current&&w.current instanceof ej.B7&&w.current.clear()}));let M=(0,l.useCallback)(e=>{d||c(!0),h&&g(!1),D(e),e!==r&&a(),s(e),o(e),E(e)},[r,a,D,d,o,h,E]);(0,l.useEffect)(()=>{if(h&&g(!1),w.current&&S){let e=w.current;e.pause(),e.remaining=eP.oN-S*eZ.gJ,y({currentTime:S/eP.P6,duration:1})}},[S]);let z=()=>{c(!1),w.current&&w.current.pause(),_({event_type:9324,view_type:t,view_parameter:n,component:eE(h,r),object_id_str:i,aux_data:{story_pin_page_id:r}})},B=()=>{if(c(!0),w.current){let e=w.current;S&&S>0&&a(),e.resume()}else f||D(r);g(!1),_({event_type:9323,view_type:t,view_parameter:n,component:eE(h,r),object_id_str:i,aux_data:{story_pin_page_id:r}})};return{activePageIndex:r,captions:A,currentPage:x,handleMute:()=>{p(e=>!e)},handlePageChange:M,handlePause:z,handlePausePlay:()=>{h||(d?z():B())},handlePlay:B,handleUpdateVideoInfo:e=>{y({currentTime:e?.currentTime??0,duration:e?.duration??1})},handleVideoEnd:a=>{a===e.length-1&&(g(!0),c(!1),o(0)),a===r&&r<e.length-1&&(M(r+1),_({event_type:101,view_type:t,view_parameter:n,component:eE(h,r),element:12261,object_id_str:i}))},handleVideoScrubbingNewPage:e=>{h&&g(!1),D(e),s(e),o(e),E(e)},handleWatchAgain:()=>{M(0)},isActive:d,isSeeking:!!S,mute:u,progressInfo:f,setMute:p,showEndCard:h}}({pages:ef,viewType:3,viewParameter:o,pinId:ei}),{blocks:[e6]=[null]}=(0,ew.w)({storyPinBlocks:ex?.blocks||[],blocksToRender:[eS.h8.IMAGE,eS.h8.VIDEO]}),e3=e6?.type===eS.h8.VIDEO,e2=e3||ef.length>1,{fontsLoaded:e4,mediaDataReceived:e9}=(0,eW.tq)({hasPin:!!n,pages:eh}),{showCloseupShopDomainLinkButton:e8,showDebugSignalsFeedbackButton:e7,showDomainLink:e5,showDomainLinkButton:te,showFlashlightButton:tt,showPinTagButton:tn}=(0,er.Z)({disablePinTagButton:I,domain:en,hasMetTrustAndSafetyCheck:q,isEmployee:C.isAuth&&!!C.isEmployee,isScenePin:w,navLink:eu,pinKey:{type:"Legacy",data:n},isORBACProfileManager:c}),{containerHeight:ti,containerWidth:ta,horizontalOffset:to,letterBoxAspectRatio:tr,letterBoxedHeight:tl,letterBoxedWidth:ts,verticalOffset:td}=(0,_.ZP)({mainImage:Q,maxCloseupImageWidth:k,pinKey:{type:"Legacy",data:n}}),{height:tc,width:tu}=Q;if(n.story_pin_data?.is_deleted)return(0,d.jsx)(eB.Z,{color:"secondary",height:640,rounding:400,width:508});let tp=!!S?.mainImage?.src||!!S?.previewImage?.src,tm=e6?.type===eS.h8.IMAGE&&tp;return j?p=O:T&&(p="sm"===E?W:B),(0,d.jsx)(s.xu,{alignSelf:j?"center":void 0,dangerouslySetInlineStyle:{__style:{...X,aspectRatio:j?(0,_.GJ)(tu,tc):void 0,background:D.yc}},"data-test-id":"closeup-body-image-container",height:j?"100%":ti,maxHeight:$?void 0:p,maxWidth:V,onMouseEnter:()=>{e2&&H(!0)},onMouseLeave:()=>{H(!1)},position:"relative",width:j?"100%":ta,children:ex||G?(0,d.jsxs)(l.Fragment,{children:[!e2&&(0,d.jsx)(eo,{auxData:el,domain:en,handleMediaButtonClick:u,imageSignature:y,isHovered:t,link:eu,maxCloseupImageWidth:k,mediaViewerExpandButtonRef:z,onImageClick:e,pin:n,shouldPadImage:i,showCloseupShopDomainLinkButton:e8,showDebugSignalsFeedbackButton:e7,showDomainLink:e5,showDomainLinkButton:te,showFlashlightButton:tt&&e9,showPinTagButton:tn,trafficSource:a,viewParameter:o}),(N||!eY)&&(0,d.jsxs)(s.xu,{children:[(0,d.jsx)(s.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...eV.Ul,flexDirection:"column-reverse"}},display:"flex",height:eV.hy,paddingX:6,position:"absolute",width:"100%",zIndex:eS.Gf,children:(0,d.jsx)(eF.Z,{activePageIndex:ey,captionsUrl:e_,handleMute:eb,handlePause:eN,handlePausePlay:eH,handlePlay:e$,handleVideoScrubbingNewPage:eX,handleWatchAgain:eJ,inMilliseconds:!0,isMuted:eQ,isPanelOpen:!0,isPlaying:eY,isStoryPin:!0,onPageSelect:e=>eK(e),pinKey:{type:"Legacy",data:n},progressInfo:e0,showEndCard:e1,showVideoControls:!0,viewParameter:156})}),(0,d.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...eO}},"data-test-id":"music-attribution",display:"flex",justifyContent:"center",overflow:"hidden",paddingY:5,position:"absolute",width:"100%",zIndex:eS.Gf,children:(0,d.jsx)(ev.Z,{handlePause:eN,handlePlay:e$,musicAttributions:ex?.music_attributions,shouldMute:ex?.should_mute,showEndCard:e1})})]}),G&&tm?(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",height:"100%",left:"0%",top:"0%",width:"100%"}},"data-test-id":"story-pin-image-block",overflow:"hidden",position:"absolute",children:(0,d.jsx)(F,{borderStyle:X,dominantColor:D.yc,imageWithPreview:S,sizes:ee,srcSet:et})}):(0,d.jsxs)(s.iP,{disabled:!N||e1,fullHeight:!0,onTap:eH,children:[(0,d.jsx)(eR.Z,{activePageIndex:ey,clientTrackingParams:L,customEndCard:!0,fontsLoaded:e4,horizontalOffset:to,isActive:eY,muteVideos:eQ,onEnded:eG,onUpdateVideoInfo:eU,ownerId:n.native_creator?.id??"",page:ex,pageAspectRatio:tr,pageHeight:tl,pageIndex:ey,pageWidth:ts,pin:n,pinId:ei,productPins:em,shouldLogTimeSpent:!0,stillLoading:!e9,verticalOffset:td,videoPinProgress:e0,viewParameter:o,viewType:3}),!e1&&!eq&&ef.length>1&&!e3&&(0,d.jsx)(ez.Z,{playing:eY})]}),e1&&n.native_creator&&(0,d.jsx)(J.Z,{name:"SIIPMediaContainer_VideoEndCard",children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(s.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:eS.s5,children:(0,d.jsx)(eL.default,{clientTrackingParams:n.trackingParams||n.tracking_params,pinKey:{type:"Legacy",data:n},rounded:!1,watchAgain:eJ})})})})]}):ex?null:(0,d.jsx)(F,{dominantColor:D.yc,fit:"contain",imageWithPreview:S})})}var eN=n(288472);let eH=e=>{(0,l.useEffect)(()=>{(0,r.Z)("ImageContent","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/VisualContent/ImageContent.tsx")},[]);let{isHovered:t,onImageClick:n,pin:i,shouldPadImage:a,trafficSource:o,viewParameter:s,isORBACProfileManager:u,handleMediaButtonClick:p,mediaViewerButtonRef:m}=e,{isEligibleForStaticImageIdeaPin:h}=(0,eN.Z)(i.story_pin_data_id),g=h?(0,d.jsx)(eK,{handleMediaButtonClick:p,isHovered:t,isORBACProfileManager:u,onImageClick:n,pin:i,shouldPadImage:a,trafficSource:o,viewParameter:s}):(0,d.jsx)(eb,{handleMediaButtonClick:p,isHovered:t,isORBACProfileManager:u,mediaViewerExpandButtonRef:m,onImageClick:n,pin:i,shouldPadImage:a,trafficSource:o,viewParameter:s});return a?(0,d.jsx)(c,{children:g}):g};var e$=n(486973),eU=n(982434),eG=n(854403),eX=n(918617);let eJ=(0,l.lazy)(()=>n.e("74993").then(n.bind(n,409672))),eY=({children:e,name:t,verticalOffset:n=0,horizontalOffset:i=0})=>(0,d.jsx)(s.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",padding:`${n}px ${i}px`}},"data-test-id":`experimental-closeup-image-overlay-layer-${t}`,left:!0,position:"absolute",right:!0,top:!0,children:e}),eq=(void 0!==o||(o=n(453266)).hash&&"7ba89eba255cb97040287ec468d973ed"!==o.hash&&console.error("The definition of 'VideoContent_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),eQ=({closeupIsFirstPageInHistoryStack:e,customThumbnail:t,imageContainerRef:n,isWideVideo:i,mediaViewerButtonRef:a,pin:o,pinKey:u,shouldPadImage:p,flyoutShareProps:m,video:h,isORBACProfileManager:y,handleMediaButtonClick:_})=>{(0,l.useEffect)(()=>{(0,r.Z)("VideoContent","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/VisualContent/VideoContent.tsx")},[]);let x=(0,I.Z)(eq,u),b=!!o.promoter&&!o.is_downstream_promotion,v=b&&!o.is_eligible_for_web_closeup,{access:w,should_mute:P}=o||{},k=!!w&&w.includes("tag")||y,{closeupWithinMasonryEnabled:S}=(0,f.x4)(),{closeupBodyWidth:C}=(0,q.K)(),j=(0,eG.Z)(),{fiftyPercentWidth:T}=(0,D.Re)(),{maxHeight:Z}=(0,ec.Z)({pinKey:x}),{isCloseupMediaViewerEnabled:A}=(0,G.Z)({isShufflePin:!!o?.shuffle}),E=Math.max((C??1)/("number"==typeof Z?Z:1),(h.hls?.width??h?.mp4?.width??0)/(h.hls?.height??h?.mp4?.height??0)),L=S?C:g.Gg-g.d2,R=(0,d.jsxs)(eX.Z,{isVideo:!0,isWideVideo:i,shouldPadImage:p,styleOverrides:p&&!S?{maxWidth:{maxWidth:L},minWidth:{minWidth:L},height:{},borderRadius:16}:{},variant:"default",children:[(0,d.jsx)(s.xu,{ref:n,"data-test-id":"closeup-video-with-visibility",maxHeight:Z,maxWidth:T,width:"100%",children:(0,d.jsx)(eU.Z,{aspectRatio:S?E:void 0,autoplay:!j,customThumbnail:t,flyoutShareProps:m,isPromoted:b,loop:v,muted:P||e,objectFit:S?"contain":void 0,pinId:o.id,pinKey:x,shouldMute:P,variant:"default",video:h})}),k&&(0,d.jsx)(eY,{name:"tag-button",children:(0,d.jsx)(J.Z,{name:"SafeSuspense_VideoContent_CloseupTagButton",children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(O.Z,{children:(0,d.jsx)(eJ,{pin:o})})})})}),A&&(0,d.jsxs)(eY,{name:"media-viewer-button",verticalOffset:136,children:[(0,d.jsx)(s.xu,{height:"100%"}),(0,d.jsx)(s.xu,{display:"flex",justifyContent:"end",paddingX:V.Z,right:!0,children:(0,d.jsx)(J.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,d.jsx)(K.Z,{children:(0,d.jsx)(O.Z,{children:(0,d.jsx)(e$.default,{ref:a,animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:o.image_signature,onTap:_,variant:"view-larger"})})})})})]})]});return p?(0,d.jsx)(c,{children:R}):R};var e0=n(239321),e1=n(501010),e6=n(112658);let e3=e=>{(0,l.useEffect)(()=>{(0,r.Z)("VisualContent","/app/common/react/components/auth-desktop-web-closeup/CloseupBody/VisualContent/VisualContent.tsx")},[]);let{clientTrackingParams:t,closeupIsFirstPageInHistoryStack:n,imageContainerRef:i,flyoutShareProps:a,isWideVideo:o,pin:c,shouldPadImage:u,trafficSource:p,isORBACProfileManager:m,isHovered:h,mediaViewerButtonRef:g,onImageClick:_,viewParameter:b,handleMediaButtonClick:w}=e,{video:P,imgSrc:I,isEmbeddedVideo:k,isYoutubePin:S}=(0,v.G)(),{closeupWithinMasonryEnabled:C}=(0,f.x4)(),j=(0,x.Z)({showProductDetailPage:!!c.is_eligible_for_pdp}),{checkExperiment:T}=(0,e1.Z)(),Z=(0,d.jsx)(eu.Z,{id:"ContextMenuClickthroughLogging",children:(0,d.jsx)(e0.Z,{clientTrackingParams:t,hovered:h,pinKey:{type:"Legacy",data:c},viewType:3,children:(0,d.jsx)(eu.Z,{id:"ImageContent",children:(0,d.jsx)(eH,{handleMediaButtonClick:w,isHovered:h,isORBACProfileManager:m,mediaViewerButtonRef:g,onImageClick:_,pin:c,shouldPadImage:u,trafficSource:p,viewParameter:b})})})});P&&(Z=(0,d.jsx)(eu.Z,{id:"VideoContent",children:(0,d.jsx)(eQ,{closeupIsFirstPageInHistoryStack:n,customThumbnail:I,flyoutShareProps:a,handleMediaButtonClick:w,imageContainerRef:i,isORBACProfileManager:m,isWideVideo:o,mediaViewerButtonRef:g,pin:c,pinKey:{type:"Legacy",data:c},shouldPadImage:u,video:P})}));let E="50%";if(k){let e=c.attribution&&(c.attribution.author_name||c.attribution.url)?c.attribution.provider_name:null;"soundcloud"===e?E="30%":"vin"===e&&(E="100%"),Z=(0,d.jsx)(eu.Z,{id:"EmbeddedVideoContent",children:(0,d.jsx)(y,{embedUrl:c.embed?.src,isWideVideo:o,paddingBottom:E,shouldPadImage:u})})}let L=T("web_closeup_youtube_player").group;if(S&&["enabled","enabled_autoplay","enabled_delay","employees"].includes(L)){let e=(0,eP.Mt)(c.link),t=["enabled_autoplay","enabled_delay"].includes(L),n=`https://www.youtube.com/embed/${e}?autoplay=${+!!t}&mute=${+!!t}&fs=0`;Z=(0,d.jsx)(eu.Z,{id:"EmbeddedVideoContent-2",children:(0,d.jsx)(y,{embedUrl:n,isWideVideo:o,paddingBottom:E,shouldPadImage:u})})}let R=(0,A.Z)({type:"Legacy",data:c}),D=c.is_eligible_for_pdp?R():void 0;return(0,d.jsx)(e6.Z,{auxData:D,clientTrackingParams:t,component:85,viewParameter:b,children:(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{overflow:C?"clip":void 0}},rounding:C&&!j?400:void 0,children:Z})})}},834237:function(e,t,n){n.d(t,{Z:()=>l}),n(167912);var i,a=n(183e3),o=n(501010);let r=(void 0!==i||(i=n(565241)).hash&&"b2f13a948eb09a6fe3cf984633c352f0"!==i.hash&&console.error("The definition of 'useGetInstagramRedirectLink_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function l(e){let t=(0,a.Z)(r,e),{checkExperiment:n}=(0,o.Z)(),i=n("instagram_default_link_setting_pinner_dweb").anyEnabled;if(!t.isInstagramApi||!t.nativeCreator)return{instagramRedirectUrlWithScheme:null,isInInstagramPinnerExperiment:!1};if(i){let{igDirectToSiteConfigs:e}=t.nativeCreator;return e&&t.nativeCreator.isDirectToSiteAllowed&&t.igOwner&&t.igOwner.entityId===t.nativeCreator.entityId?{instagramRedirectUrlWithScheme:e?.[0]?.directToSiteLinkWithScheme??null,isInInstagramPinnerExperiment:!0}:{instagramRedirectUrlWithScheme:null,isInInstagramPinnerExperiment:!0}}return t.nativeCreator.websiteUrl&&t.nativeCreator.isPrimaryWebsiteVerified&&t.nativeCreator.isDirectToSiteAllowed?{instagramRedirectUrlWithScheme:t.nativeCreator.websiteUrl??null,isInInstagramPinnerExperiment:!1}:{instagramRedirectUrlWithScheme:null,isInInstagramPinnerExperiment:!1}}},710801:function(e,t,n){n.d(t,{Z:()=>x});var i,a=n(667294);n(167912);var o=n(918186),r=n(77957),l=n(935059),s=n(183e3),d=n(24246),c=n(763672),u=n(566431),p=n(501010),m=n(986523),h=n(200619),g=n(601871),f=n(975703),y=n(113759);let _=(void 0!==i||(i=n(107447)).hash&&"6d07d6f4226aa8095d2c36e8662982e3"!==i.hash&&console.error("The definition of 'useMediaContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function x({pinKey:e}){let t=(0,d.Z)(),n=(0,l.Z)(),{checkExperiment:i}=(0,p.Z)(),x=(0,h.Z)(),{mainImage:b,carouselInfo:v,previewImage:w,isGif:P,imgSrc:I}=(0,r.G)(),k=(0,s.Z)(_,e),S=(0,m.Z)(),{aggregatedPinData:C,altText:j,autoAltText:T,isEligibleForPdp:Z,isEligibleForRelatedProducts:A,pinner:E,richMetadata:L,trackedLink:R,utmLink:D,link:M,method:z,shuffle:B}=k,F=!Z&&v?.carouselData,W=!!C?.isShopTheLook,V=!!A&&!W&&!Z&&!F&&!B,O=(0,g.nl)(n,x)&&i("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,K=k.images_orig?.url,N=v?.carouselData?function(e){let{carousel_slots:t,index:n}=e;return t&&void 0!==n&&(t[n]||{}).image_signature?t[n].image_signature:null}(v.carouselData):k.imageSignature,H=(0,u.Zt)({trackedLink:R,link:M,utmLink:D}),$="catalog_bulk_create"===z||L?.products,U=H&&$?decodeURIComponent(H):H,G=(0,g.Ms)(n,x)===E?.username&&O,{closeupWithinMasonryEnabled:X,paneWidth:J,showProductDetailPage:Y}=(0,y.x4)(),{closeupBodyWidth:q}=(0,f.K)(),{height:Q,width:ee}=b,et=(0,a.useMemo)(()=>({naturalWidth:ee,naturalHeight:Q,alt:(0,o.Z)({altText:j,autoAltText:T,i18n:t}),src:P?I:!S&&I?.startsWith("https://i.pinimg.com/")?(0,c.Z)(I)||w?.url||"":w?.url||""}),[ee,Q,j,T,t,P,S,I,w?.url]),en=(0,a.useMemo)(()=>({naturalHeight:et.naturalHeight,naturalWidth:et.naturalWidth,mainImage:{alt:et.alt,src:P?et.src:I},...!P&&{previewImage:{alt:"",src:P?"":et.src}}}),[et.alt,et.naturalHeight,et.naturalWidth,et.src,I,P]);return{disablePinTagButton:G,imageProps:et,imageSignature:N,imageWithPreview:en,isScenePin:V,link:U,maxCloseupImageWidth:X&&q||J,originalImageUrl:K,showProductDetailPage:Y}}},642578:function(e,t,n){n.r(t),n.d(t,{default:()=>f});var i,a=n(686659),o=n(667294);n(167912);var r=n(399353),l=n(420970),s=n(584843),d=n(104999),c=n(183e3),u=n(24246),p=n(176783),m=n(893957),h=n(785893);let g=(void 0!==i||(i=n(417168)).hash&&"8ad2e699556c5cc82f96a8800796d777"!==i.hash&&console.error("The definition of 'EndCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),f=({clientTrackingParams:e,watchAgain:t,pinKey:n,rounded:i=!0})=>{(0,o.useEffect)(()=>{(0,a.Z)("EndCard","/app/common/react/components/auth-desktop-web-closeup/StoryPin/EndCard.tsx")},[]);let f=(0,c.Z)(g,n),y=(0,u.Z)(),_=(0,d.Z)();(0,m.Z)(()=>{_({event_type:120,view_type:3,component:13799})});let x=()=>{t()};return(0,h.jsx)(r.xu,{alignItems:"center",bottom:!0,color:"dark","data-test-id":"story-pin-end-card",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,opacity:90,padding:4,position:"absolute",right:!0,rounding:i?p.yR:0,top:!0,width:"100%",children:(0,h.jsx)(r.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",width:"100%",children:(0,h.jsxs)(r.kC,{alignContent:"start",direction:"column",gap:{row:0,column:8},justifyContent:"start",children:[(0,h.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,h.jsx)(s.default,{buttonText:y.bt("Send", "Send", "end.video.send.icon.label", undefined, true),clientTrackingParams:e,pinKey:f,shownWithinMasonry:!0})}),(0,h.jsxs)(r.kC,{alignItems:"center",children:[(0,h.jsx)(l.Z,{accessibilityLabel:y.bt("Replay button", "Replay button", "storyPin.closeup.endCard.replay", undefined, true),handleClick:x,icon:"arrow-clockwise",iconColor:"inverse",testId:"closeup-replay-button"}),(0,h.jsx)(r.xu,{children:(0,h.jsx)(r.iP,{onTap:x,rounding:200,children:(0,h.jsx)(r.qd,{color:"light",overflow:"normal",size:"400",children:y.bt("Replay", "Replay", "storyPin.closeup.endCard.replay", undefined, true)})})})]})]})})})}},774014:function(e,t,n){n.d(t,{Z:()=>p});var i=n(686659),a=n(667294),o=n(399353),r=n(519371),l=n(962336),s=n(896313),d=n(176783),c=n(112658),u=n(785893);function p({activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:n,customEndCard:p,fontsLoaded:m,horizontalOffset:h,isActive:g,isPreview:f,muteVideos:y,onEnded:_,onFlyoutOpen:x,onUpdateVideoInfo:b,ownerId:v,page:w,pageAspectRatio:P,pageHeight:I,pageIndex:k,pageWidth:S,pin:C,pinId:j,productPins:T,shouldLogTimeSpent:Z=!0,stillLoading:A=!1,verticalOffset:E,videoPinProgress:L,viewParameter:R,viewType:D}){(0,a.useEffect)(()=>{(0,i.Z)("StoryPinPage","/app/common/react/components/auth-desktop-web-closeup/StoryPin/renderer/StoryPinPage.tsx")},[]);let{nonRenderableBlocks:M,blocks:z}=(0,s.w)({storyPinBlocks:w?.blocks??[]}),B=!!z.find(e=>e.type===d.h8.VIDEO),F=!!z.find(e=>!!e.video&&e.type===d.h8.VIDEO&&e.video_signature),W=M.find(e=>e.type===d.h8.MUSIC),V=W?.type==="story_pin_music_block"?W.provider_recording_id:void 0,O=()=>(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{background:r.yc}},height:"100%",children:!f&&z.filter(e=>!B||F||e.type===d.h8.VIDEO).map((t,i)=>{let a=(T||[]).find(e=>[e.id,e.cacheable_id].includes(t.pin_id));return(0,u.jsx)(l.Z,{activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:p,disableProductStickers:!0,fontsLoaded:m,horizontalOffset:h,isActive:g,isSplitLayout:w?.layout===3,musicRecordingId:V,muteVideos:y,onEnded:_,onFlyoutOpen:x,onUpdateVideoInfo:b,ownerId:v,pageAspectRatio:P,pageHeight:I,pageIndex:k,pageWidth:S,pin:C,pinId:j,pinKey:null!=a?{type:"Legacy",data:a}:null,stillLoading:A,verticalOffset:E,videoPinProgress:L},`${w?.id??""}-${t.type??""}-${i}`)})});return Z?(0,u.jsx)(c.Z,{auxData:{story_pin_page_id:k},clientTrackingParams:t,component:0===k?227:228,shouldUseGrandparentId:!0,view:D,viewParameter:R,children:O()}):O()}},896313:function(e,t,n){n.d(t,{J:()=>r,w:()=>l});var i=n(176783);let a=[i.h8.COMMENT_REPLY_STICKER,i.h8.GENERIC_STICKER,i.h8.HEADING,i.h8.IMAGE,i.h8.MENTION_STICKER,i.h8.PARAGRAPH,i.h8.PRODUCT_STICKER,i.h8.VIDEO,i.h8.VTO_MAKEUP_STICKER],o=e=>{if("object"!=typeof e||null===e)return!1;let t=e.image?.images;return!!t&&Object.keys(t).length>0},r=e=>(e?.blocks??[]).some(e=>o(e));function l({storyPinBlocks:e=[],blocksToRender:t=a}){let n=[],r=[],l=[];return e.forEach(e=>{null!=e.type&&t.includes(String(e.type))||o(e)?e.type===i.h8.PARAGRAPH||e.type===i.h8.HEADING?r.push(e):l.push(e):n.push(e)}),l.push(...r),{nonRenderableBlocks:n,textBlocks:r,blocks:l}}},691835:function(e,t,n){n.d(t,{Z:()=>r});var i=n(166988),a=n(15392),o=n(113759);function r({showProductDetailPage:e=!1,mainImage:t,skipAspectRatioCheck:n=!1}={}){let{viewportSize:l}=(0,o.x4)();if(!(0,i.Z)({showProductDetailPage:e}))return{maxHeight:void 0};if(!n&&t){let{height:e=0,width:n=0}=t;if(n/e<.25)return{maxHeight:void 0}}return{maxHeight:"sm"===l?a.E$:a.Id}}},583522:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),a=n(312048),o=n(774838),r=n(739405),l=n(683372);let s=({carouselContainsVideo:e,isShufflePin:t})=>{let{isAuthenticated:n}=(0,o.B)(),s=(0,r.HG)(),d=(0,l.C)((0,a.TH)());return(0,i.useMemo)(()=>({isCloseupMediaViewerEnabled:n&&s&&d&&!t&&!e}),[n,s,d,t,e])}},288472:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>({isEligibleForStaticImageIdeaPin:!!e})},584843:function(e,t,n){n.r(t),n.d(t,{default:()=>p});var i,a=n(686659),o=n(667294);n(422578);var r=n(312048),l=n(53347),s=n(183e3),d=n(341687),c=n(785893);let u=(void 0!==i||(i=n(854266)).hash&&"06fe8d9d3c50cfa5c040fbb0e9a14675"!==i.hash&&console.error("The definition of 'IdeaPinSecondarySendButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function p({buttonText:e,clientTrackingParams:t,pinKey:n,shownWithinMasonry:i}){(0,o.useEffect)(()=>{(0,a.Z)("IdeaPinSecondarySendButton","/app/common/react/components/social/IdeaPinSecondarySendButton.tsx")},[]);let p=(0,s.Z)(u,n),m=p?.imageUrl,h=p?.description,g=(0,r.TH)(),[f,y]=(0,o.useState)(!!(0,d.Z)(g.search).share);return(0,c.jsx)(l.default,{buttonText:e,controllerOptions:{flyoutDisplayOptions:{showCaret:!0,shownWithinMasonry:i},isFlyoutOpen:f,loggingOptions:{component:228,element:10942,viewParameter:157,viewType:3},onFlyoutDismiss:()=>y(!1),onToggleFlyout:()=>y(!f),sendObject:{type:"pin",description:h,id:p?.entityId??"",imageUrl:m,url:`/pin/${p?.entityId}/`,clientTrackingParams:t}},iconColor:"inverse"})}},982434:function(e,t,n){n.d(t,{Z:()=>y});var i,a=n(686659),o=n(667294);n(422578);var r=n(489325),l=n(403972),s=n(183e3),d=n(573375),c=n(919917),u=n(478428),p=n(74972),m=n(785893);function h(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let g=(void 0!==i||(i=n(307950)).hash&&"ce07acf2409b70d391c02aa34c238945"!==i.hash&&console.error("The definition of 'AuthDesktopWebCloseupVideoWithVisibility_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class f extends o.Component{constructor(...e){super(...e),h(this,"handleVisibilityChanged",e=>{let{pinId:t,isPromoted:n,setCurrentVideo:i,pauseAutoplay:a,videosAutoplaying:o,videoStartTime:r}=this.props,l=(0,u.Z)(t,o);e&&!l?i({pinId:t,isPromoted:!!n,currentTime:r}):!e&&l&&a({pinId:t,isPromoted:!!n,currentTime:this.currentVideoCurrentTime})}),h(this,"handleVideoTimeChange",e=>{let{pinId:t,videosAutoplaying:n}=this.props;(0,u.Z)(t,n)&&(this.currentVideoCurrentTime=e.time)})}componentDidUpdate(e){let{appInFocus:t}=e,{appInFocus:n,pauseAutoplay:i,pinId:a,isPromoted:o,setCurrentVideo:r,videosAutoplaying:l}=this.props,s=(0,u.Z)(a,l),d=(0,c.Z)(a,l);this.currentVideoCurrentTime=d??this.currentVideoCurrentTime,n!==t&&!n&&s?(this.pausedDueToBrowserOutOfFocus=!0,i({pinId:a,isPromoted:!!o,currentTime:this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&n&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:a,isPromoted:!!o,currentTime:this.currentVideoCurrentTime}))}componentWillUnmount(){let{pinId:e,isPromoted:t,pauseAutoplay:n}=this.props;n({pinId:e,isPromoted:!!t,currentTime:this.currentVideoCurrentTime})}render(){let{pauseAutoplay:e,pin:t,setCurrentVideo:n,videoStartTime:i,videosAutoplaying:a,...o}=this.props;return(0,m.jsx)(r.Z,{id:"VisibilityChangedWrapper",children:(0,m.jsx)(d.Z,{onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!1,...o,children:(0,m.jsx)(r.Z,{id:"CloseupVideo",children:(0,m.jsx)(l.Z,{...o,onTimeChange:this.handleVideoTimeChange,pinKey:t})})})})}componentDidMount(){(0,a.Z)("AuthDesktopWebCloseupVideoWithVisibility","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideoWithVisibility.tsx")}}function y(e){(0,o.useEffect)(()=>{(0,a.Z)("AuthDesktopWebCloseupVideoWithVisibility","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideoWithVisibility.tsx")},[]);let{pinId:t,pinKey:n,isPromoted:i}=e,l=(0,s.Z)(g,n),{appUI:{appInFocus:d,videosAutoplaying:c},pauseAutoplay:u,setCurrentVideo:h}=(0,p.G)(),{organicVideosAutoplaying:y,promotedVideosAutoplaying:_}=c,x=i?_[t]:y[t];return(0,m.jsx)(r.Z,{id:"CloseupVideoWithVisibilityInner",children:(0,m.jsx)(f,{...e,appInFocus:d,pauseAutoplay:u,pin:l,setCurrentVideo:h,videosAutoplaying:c,videoStartTime:x?x.currentTime:null})})}},221175:function(e,t,n){n.d(t,{AL:()=>m,CT:()=>p,FA:()=>x,Kw:()=>w,MS:()=>d,O3:()=>S,OI:()=>r,Rk:()=>C,SP:()=>a,Wm:()=>i,Y4:()=>I,Zn:()=>u,at:()=>b,dH:()=>h,e4:()=>c,eX:()=>v,eq:()=>_,iC:()=>l,jf:()=>f,m6:()=>g,pg:()=>T,ps:()=>k,tT:()=>s,xZ:()=>o,xh:()=>y,yG:()=>j,yz:()=>P,z3:()=>Z});let i=446,a=16,o=48,r={x:0,y:0,w:0,h:0},l=`
  .preview-crop-area-enter {
    opacity: 0;
  }

  .preview-crop-area-enter-active {
    opacity: 1;
    transition: opacity 300ms;
  }

  .preview-crop-area-exit {
    opacity: 1;
  }

  .preview-crop-area-exit-active {
    opacity: 0;
    transition: opacity 300ms;
  }

  .preview-crop-area-exit-done {
    opacity: 0;
  }
`,s="anchor",d=2,c=20,u=14,p=16,m=10,h=8,g=1,f=.75,y=4,_=3,x={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},b="cropper-background",v="cropper-cropbox",w=32,P=20,I=10,k=1,S=0,C=120,j=2,T=.2,Z=.25},953994:function(e,t,n){function i({isHiddenPin:e,isUnsafePin:t}){return!e&&!t}n.d(t,{Z:()=>i})},288692:function(e,t,n){async function i(e){return new Promise((t,n)=>{let i=document.createElement("img");i.onerror=()=>n(Error(`Image failed to load with src ${e}`)),i.onload=()=>t(!0),i.src=e})}async function a(e){try{let t=await fetch(e,{method:"HEAD"}),n=(await t.blob()).type.startsWith("image/");{let t=await i(e);return n&&t}}catch(e){return!1}}n.d(t,{Z:()=>a})},763672:function(e,t,n){n.d(t,{Z:()=>l});var i=n(767415);let a=e=>{let t=new Image;t.loading="lazy",t.src=e;let{complete:n}=t;return t.src="",n},o=["736x","564x","474x","236x"],r=new RegExp(/\/(\d+x|originals)\//);function l(e){for(let t of o){let n=e.replace(r,`/${t}/`);if(a(n))return(0,i.nP)("web.closeup.cached_preview_image.found",{tags:{resolution:t}}),n}return(0,i.nP)("web.closeup.cached_preview_image.not_found"),null}},382964:function(e,t,n){n.d(t,{Z:()=>l});var i,a=n(667294);n(167912);var o=n(183e3);let r=(void 0!==i||(i=n(33653)).hash&&"8b6ce790922ff8b900b4ae18b06b7c11"!==i.hash&&console.error("The definition of 'useGetNormalizedPinImage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function l({pinKey:e,maxWidth:t}){let n=(0,o.Z)(r,e),i=n?.images_564x||n?.images_736x||n?.images_orig||n?.images_474x||n?.images_236x,l=i?.width||1,s=i?.height||1,d=i?.url||"",c=function(e,t,n=564){return e>n&&(t*=n/e,e=n),{width:e,height:t}}(l,s,t);return{getNormalizedPinImage:(0,a.useCallback)(()=>({width:c.width,height:c.height,url:d}),[c.height,c.width,d])}}},978097:function(e,t,n){n.d(t,{NC:()=>o,Rc:()=>l,WK:()=>d,X9:()=>a,b9:()=>i,f9:()=>s,gu:()=>r});let i="pin-builder-font-faces",a="system-font-faces",o="pin-builder-education-font-faces",r="licensed",l="system",s="brand",d=4},169166:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},506807:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(null)},830031:function(e,t,n){n.d(t,{A:()=>a,S:()=>i});let{Provider:i,getMaybe:a}=(0,n(213491).Z)("pwtSurfaceContext")},439947:function(e,t,n){n.d(t,{Z:()=>v});var i=n(667294),a=n(213491),o=n(705460),r=n(774303),l=n(381571),s=n(449896),d=n(780764),c=n(217472),u=n(337751),p=n(139876),m=n(998727),h=n(679767),g=n(240083),f=n(296264);let y=(0,r.XV)("PwtStopwatch"),_=(e,t)=>{if(f.Z){if("start"===t.type&&!e.isTiming){let{name:n,startTime:i,navigationType:a}=t;return(0,o.A9)(`TIMING.${n}`),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof i?i:f.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:a},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming)if(t.bypassIsTimingCheck)y("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{let n=t.name||e.name;return y("ignoring action - stopwatch is not actively timing",t),(0,o.A9)(`WARN.${n}.noTiming.${t.type}`),e}if("annotate"===t.type){let n=f.Z.now();return y(`adding annotation {${t.label}: ${n}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:n}])}}if("binaryAnnotate"===t.type)return y(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:t.value,type:t.annotationType}}}};if("binaryAnnotateOperation"===t.type){let{value:n,type:i}=t.binaryAnnotationValueAndType;if(!e.binaryAnnotations[t.name])return{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n,type:i}}}};{let a=e.binaryAnnotations[t.name].value||0;return y(`operating on binary annotation {
          name: ${t.name}
          pervious value: ${String(a)}
          operand: ${String(n)}
        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[t.name]:{value:n?t.operation(a,n):a,type:i}}}}}}if("addSubspan"===t.type){y(`adding subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&y(`WARNING: adding duplicate subspan name {${t.name}}`);let n=t.id||(0,g.Z)();-1!==e.spans.findIndex(e=>e.id===n)&&y(`WARNING: adding duplicate subspan id {${t.name}: ${n}}`);let i=0;return t.startTime?i=t.startTime:e.startTime?i=e.startTime:y(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:n,startTime:i,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){y(`starting subspan {${t.name}}`),-1!==e.spans.findIndex(e=>e.name===t.name)&&y(`WARNING: starting duplicate subspan name {${t.name}}`);let n=t.id||(0,g.Z)();-1!==e.spans.findIndex(e=>e.id===n)&&y(`WARNING: starting duplicate subspan id {${t.name}: ${n}}`);let i=t.parentName?e.spans.find(e=>e.name===t.parentName)?.id:null;return{...e,spans:[...e.spans,{name:t.name,id:n,parentId:t.parentId||i,startTime:f.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){y(`stopping subspan {${t.name}}`),!t.id&&e.spans.filter(e=>e.name===t.name).length>1&&(0,o.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type});let n=t.id?e.spans.findIndex(e=>e.id===t.id):e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=f.Z.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):(0,o.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.filter(e=>e.name===t.currentName).length>1&&(0,o.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});let n=e.spans.findIndex(e=>e.name===t.currentName);return n>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(y(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[n].name=t.newName):(0,o.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){let{startTime:n,metricId:i,pwtStaticContext:a,annotations:o,binaryAnnotations:r,isSampled:p,spans:h,traceId:_}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),p){let l=t.stopTime||f.Z.now(),p=[...h.map(t=>{t.endTime===1/0&&(t.endTime=l);let n=e.spanNameUpdates.findIndex(e=>t.name===e.currentName);return n>-1&&(y(`renaming subspan {${t.name}} to {${e.spanNameUpdates[n].newName}}`),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(e=>e.newName!==t.name)),t})];if(t.manualAndResourceSpans||0===h.length){let e=(0,g.Z)();p.push({name:"network_resources",id:e,startTime:n,endTime:l,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map(t=>(0,u.Z)((0,d.p)(t,[]),e)).filter(Boolean))}let x={type:"COMPLETE",metricId:i,traceId:_,startTime:n,endTime:l,spans:p,annotationMap:{...(0,m.Z)(o)},binaryAnnotationMap:(0,s.ng)({metricId:i,pwtStaticContext:a,binaryAnnotations:r,performanceResourceTimings:t.customStopwatchBuffer||[],type:"COMPLETE"})};(0,c.Z)({metricId:i,pwtStaticContext:a,result:x})}return(0,l.$B)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.Z)(),spanNameUpdates:[]}}if("error"===t.type){let{error:n,stopwatchPerformanceObserver:i}=t;return n&&(0,o.H)(n),i&&i.disconnect(),(0,l.$B)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,g.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();let n=t.reason||"",{startTime:i,metricId:a,pwtStaticContext:o,binaryAnnotations:r,traceId:d}=e,u={type:"ABORT",traceId:d,startTime:i,endTime:f.Z.now(),spans:[],annotationMap:{},binaryAnnotationMap:(0,s.ng)({metricId:a,pwtStaticContext:o,binaryAnnotations:r,performanceResourceTimings:t.customStopwatchBuffer||[],type:"ABORT"}),reason:n};return(0,c.Z)({metricId:a,pwtStaticContext:o,result:u}),(0,l.$B)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:d,spanNameUpdates:[]}}}return e};var x=n(780657),b=n(785893);let v=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:n=!0,navigationType:r,manualAndResourceSpans:s=!1})=>{let{Provider:d,getMaybe:c}=(0,a.Z)(`Stopwatch_${e}`);return{Provider:function({children:a}){let c=(({name:e,sampleRate:t,navigationType:n,manualAndResourceSpans:a=!1})=>{let o=(0,p.Z)(),r=(0,i.useRef)([]),s=(0,i.useRef)(null),d=(0,i.useRef)(null);null===d.current&&(d.current=(0,l.jf)());let[c,u]=(0,i.useReducer)(_,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:d.current,spanNameUpdates:[]});return o?{isTiming:c.isTiming,name:c.name,start:i=>(window.PerformanceObserver&&(r.current=[],s.current=(0,h.Z)({entryTypes:["resource"]},e=>{r.current=r.current.concat(e.getEntries()),r.current.length>1e3&&(r.current=r.current.slice(-1e3))})),u({type:"start",startTime:i,name:e,navigationType:n,pwtStaticContext:o,isSampled:!t||Math.random()<t})),stop:e=>u({type:"stop",stopTime:e,stopwatchPerformanceObserver:s.current,customStopwatchBuffer:r.current,manualAndResourceSpans:a}),error:e=>{u({type:"error",stopwatchPerformanceObserver:s.current,error:e})},abort:e=>u({type:"abort",stopTime:f.Z?.now(),stopwatchPerformanceObserver:s.current,customStopwatchBuffer:r.current,reason:e}),annotate:(e,t,n=!1)=>u({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n}),binaryAnnotate:(e,t,n,i,a=!1)=>u({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:i,bypassIsTimingCheck:a}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a=!1})=>u({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a}),addSubspan:({name:e,startTime:t,endTime:n,annotations:i={},binaryAnnotations:a={},parentId:o=null,id:r=null,bypassIsTimingCheck:l=!1})=>u({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:o,id:r,bypassIsTimingCheck:l}),subspanStart:({name:e,annotations:t={},binaryAnnotations:n={},parentId:i=null,parentName:a=null,id:o=null,bypassIsTimingCheck:r=!1})=>u({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:o,bypassIsTimingCheck:r}),subspanStop:({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o=!1})=>u({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i=!0})=>u({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i}),getSpans:(e,t)=>c.spans.filter(n=>n[e]===t),getTraceId:()=>c.traceId}:null})({name:e,sampleRate:t,navigationType:r,manualAndResourceSpans:s}),u=(0,x.Z)(),m=u?u.time:0,g=(0,i.useRef)("NotStarted"),y=c?.isTiming,v=(0,i.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",c?.abort(t)):(0,o.A9)(`WARN.${e}.noTiming.abort`)},[c]),w=(0,i.useCallback)((e,t)=>{c?.annotate(e,t)},[c]),P=(0,i.useCallback)((e,t,n,i)=>{c?.binaryAnnotate(e,t,n,i)},[c]),I=(0,i.useCallback)(({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})=>{c?.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:n,parentId:i,bypassIsTimingCheck:a})},[c]),k=(0,i.useCallback)(({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:o,id:r,bypassIsTimingCheck:l})=>{c?.addSubspan({name:e,startTime:t,endTime:n,annotations:i,binaryAnnotations:a,parentId:o,id:r,bypassIsTimingCheck:l})},[c]),S=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:o,bypassIsTimingCheck:r})=>{c?.subspanStart({name:e,annotations:t,binaryAnnotations:n,parentId:i,parentName:a,id:o,bypassIsTimingCheck:r})},[c]),C=(0,i.useCallback)(({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o})=>{c?.subspanStop({name:e,annotations:t,binaryAnnotations:n,id:i,parentId:a,bypassIsTimingCheck:o})},[c]),j=(0,i.useCallback)(({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})=>{c?.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:n,updateWhenStopwatchCompletes:i})},[c]),T=(0,i.useCallback)((e,t)=>c?c.getSpans(e,t):[],[c]),Z=(0,i.useCallback)(()=>c?c.getTraceId():"",[c]),A=(0,i.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",c?.error(t)):(0,o.A9)(`WARN.${e}.noTiming.error`)},[c]),E=(0,i.useCallback)(e=>{"Started"===g.current&&c?.abort("duplicated_init_stopwatch_action"),g.current="Started",c?.start(e)},[c]),L=(0,i.useCallback)(e=>{"NotStarted"===g.current&&(g.current="Started",c?.start(e))},[c]),R=(0,i.useCallback)(t=>{"Started"===g.current?(g.current="Stopped",c?.stop(t)):(0,o.A9)(`WARN.${e}.noTiming.stop`)},[c]);(0,i.useEffect)(()=>()=>{n&&v("unloadOrClientNavigation")},[m]);let D=(0,i.useMemo)(()=>({name:e,isTiming:y,abort:v,addAnnotation:w,addBinaryAnnotation:P,binaryAnnotationOperation:I,addSubspan:k,subspanStart:S,subspanStop:C,getSpans:T,getTraceId:Z,updateSubspanName:j,stop:R,error:A,start:E,startOnce:L}),[y,v,w,P,I,k,S,C,T,Z,j,R,A,E,L]);return(0,b.jsx)(d,{value:D,children:a})},get:c}}},780657:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),a=n(169166);function o(){return(0,i.use)(a.Z)}},139876:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),a=n(506807);function o(){return(0,i.use)(a.Z)}},998727:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>{let t={};e.forEach(({label:e,timestamp:n})=>{t={...t,[e]:(t[e]||[]).concat([n])}});let n=Object.freeze({});return Object.keys(t).forEach(e=>{(t[e]||[]).forEach((t,i)=>{let a=i?`${e}_${i+1}`:e;n={...n,[a]:t}})}),n}},155483:function(e,t,n){n.d(t,{Z:()=>ew});var i=n(686659),a=n(667294),o=n(312048),r=n(399353),l=n(993911),s=n(519371),d=n(774014),c=n(581722),u=n(24246),p=n(680391),m=n(573375),h=n(228612),g=n(785893);let f=e=>{let t=(0,u.Z)(),{sourceUrl:n,clientTrackingParams:i,linkText:a,displayUrl:o,image:l,pageId:s,canonicalUrl:d,pinId:m,onTouch:f,onClickThrough:y,isLoading:_}=e,x={story_pin_page_id:s,story_pin_data_id:(0,c.v9)(t=>e.pinId&&t.pins?.[e.pinId]?.story_pin_data_id),src_url:n,canonical_url:d},b=(0,g.jsxs)(r.xu,{alignItems:"center",borderColor:"decorative",borderWidth:"sm",display:"flex",overflow:"hidden",rounding:200,children:[(0,g.jsx)(r.xu,{alignItems:"center",color:_||l&&l.url?void 0:"secondary",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid lightGray"}},display:"flex",flex:"none",height:80,justifyContent:"center",minWidth:80,width:80,children:_?(0,g.jsx)(r.xH,{accessibilityLabel:t.bt("Loading website", "Loading website", "a11y for loading spinner", undefined, true),show:!0}):l&&l.url?(0,g.jsx)(r.Ee,{alt:a,fit:"cover",naturalHeight:l.height??1,naturalWidth:l.width??1,src:l.url}):(0,g.jsx)(r.JO,{accessibilityLabel:t.bt("Default link block icon", "Default link block icon", "Icon for default link blocks without an image", undefined, true),color:"subtle",icon:"link",size:35})}),(0,g.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},flex:"grow",overflow:"hidden",paddingX:5,children:[(0,g.jsx)(r.xe,{lineClamp:1,weight:"bold",children:a}),(0,g.jsx)(r.xe,{color:"default",size:"200",children:o})]})]}),v=(0,h.S6)()(m),w=(0,p.Z)({href:{pathname:n,state:{trackingParams:i}},target:"blank",clientTrackingParams:i,externalData:v?{pin:v&&{attributionSourceId:v.attribution_source_id,board:v.board&&{url:v.board.url},campaignId:v.campaign_id,entityId:v.id,isDownstreamPromotion:v.is_downstream_promotion,isPromoted:v.is_promoted,pinner:v.pinner&&{username:v.pinner.username},pinPromotionId:v.pin_promotion_id,promoter:v.promoter&&{entityId:v.promoter.id},storyPinDataId:v.story_pin_data_id,trackingParams:v.tracking_params,advertiserId:v.advertiser_id}}:void 0});return f?(0,g.jsx)(r.iP,{onTap:f,rounding:200,children:b}):(0,g.jsx)(r.Tg,{href:n,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),y&&y({auxData:x}),w({event:e})},rel:"nofollow",rounding:2,target:"blank",children:b})},y=e=>((0,a.useEffect)(()=>{(0,i.Z)("StoryPinLinkModule","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinLinkModule.tsx")},[]),(0,g.jsx)(m.Z,{...e,children:(0,g.jsx)(f,{...e})}));var _=n(230201),x=n(176783);let b=(0,n(9065).Z)(()=>n.e("15564").then(n.bind(n,129460)),void 0,e=>129460,"app-common-react-components-Activities-Utils-Linkify",e=>["15564"]),v=({block:e,clientTrackingParams:t,pageId:n,pinId:o,onClickThrough:l})=>{(0,a.useEffect)(()=>{(0,i.Z)("StoryPinBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinBlock.tsx")},[]);let{logContextEvent:s}=(0,_.u)();switch(e.type){case x.h8.LINK:let{canonical_url:d,image:c,normalized_url:u,src_url:p,text:m=""}=e,h=c?.images?.["345x"];if(c&&p&&u&&d)return(0,g.jsx)(r.xu,{marginTop:5,children:(0,g.jsx)(y,{canonicalUrl:d,clientTrackingParams:t,displayUrl:u,image:h,linkText:m,onClickThrough:l,onVisibilityChanged:e=>{e&&s({event_type:120,view_type:3,view_parameter:157,component:228,element:11157,object_id_str:o,aux_data:{story_pin_page_id:n,srcUrl:p,canonicalUrl:d}})},pageId:n,pinId:o,sourceUrl:p})});return null;case x.h8.HEADING:{let{text:t=""}=e;return(0,g.jsx)(r.xu,{marginBottom:4,paddingX:2,children:(0,g.jsx)(r.qd,{accessibilityLevel:2,overflow:"normal",size:"600",children:t})})}case x.h8.PARAGRAPH:{let{text:t=""}=e;return(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},paddingX:2,children:(0,g.jsx)(r.xv,{children:(0,g.jsxs)(b,{children:[" ",t," "]})})})}default:return null}};var w=n(59111);let P=`
@media (min-height: 0) {
  .StoryPinText {
    padding: 15px;
  }
  .StoryPinText span {
    font-size: 12px;
  }
  .StoryPinText h2 {
    font-size: 18px;
  }
}

@media (min-height: 600px) {
  .StoryPinText {
    padding: 2.5vh;
  }
  .StoryPinText span {
    font-size: 2vh;
  }
  .StoryPinText h2 {
    font-size: 3vh;
  }
}

@media (min-height: 800px) {
  .StoryPinText {
    padding: 20px;
  }
  .StoryPinText span {
    font-size: 16px;
  }
  .StoryPinText h2 {
    font-size: 24px;
  }
}
`,I=e=>{(0,a.useEffect)(()=>{(0,i.Z)("StoryPinText","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinText.tsx")},[]);let{blocks:t,clientTrackingParams:n,pageId:o,pinId:r,onClickThrough:l}=e;return(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(w.Z,{unsafeCSS:P}),(0,g.jsx)("div",{className:"StoryPinText",children:t.filter(e=>e).map((e,t)=>(0,g.jsx)(v,{block:e,clientTrackingParams:n,onClickThrough:l,pageId:o,pinId:r},t))})]})};var k=n(605497);let S=s._B*x.ap,C=`
.StoryPinTextDrawer {
  background: #fff;
  border-top-left-radius: 32px;
  border-top-right-radius: 32px;
  bottom: 0;
  box-shadow: rgba(0, 0, 0, 0.1) 0 1px 20px 0;
  box-sizing: border-box;

  height: auto;
  max-height: 15%;
  opacity: 0.625;
  position: absolute;
  transition: max-height 0.15s ease-in, opacity 0.15s ease-in;
  width: 100%;
}

.StoryPinTextDrawer:hover {
  max-height: 70%;
  opacity: 1;
  overflow: scroll;
}
`;function j(e){(0,a.useEffect)(()=>{(0,i.Z)("StoryPinMediaLayout","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinMediaLayout.tsx")},[]);let t=(0,u.Z)(),{activePageIndex:n,clientTrackingParams:o,hideText:l,isActive:d,isCoverPage:c,muteVideos:p,onClickThrough:m,page:{image_adjusted:h,image:f,blocks:y,video:_,id:x},pageIndex:b,pageWidth:v,pin:P,pinId:j}=e,{images:T={}}=h||f||{},Z=T["750x"],{video_list:A={}}=_||{},E=A.V_HLSV3_MOBILE||A.V_720P;if(!Z&&!E)return null;let L=v/s._B;return(0,g.jsxs)(a.Fragment,{children:[!!_&&!!E&&(0,g.jsx)(k.Z,{activePageIndex:n,blockHeight:S*L,blockWidth:s._B*L,isPlaying:d,muted:p,pageIndex:b,pin:P,pinId:j,video:_}),Z&&Z.url&&!E&&(0,g.jsx)(r.Ee,{alt:function(e){let t="";for(let n of e.blocks??[])[1,0].includes(n.block_type)&&(t="text"in n&&n.text?n.text:"");return t??""}(e.page)||t.bt("Story Pin image", "Story pin image", "Alt text for story pin image", undefined, true),fit:c?"cover":"contain",naturalHeight:Z.height??1,naturalWidth:Z.width??1,src:Z.url}),y&&y.length>0&&!l&&(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(w.Z,{unsafeCSS:C}),(0,g.jsx)("div",{className:"StoryPinTextDrawer",children:(0,g.jsx)(I,{blocks:y,clientTrackingParams:o,onClickThrough:m,pageId:x,pinId:j})})]})]})}let T=e=>{(0,a.useEffect)(()=>{(0,i.Z)("StoryPinSplitLayout","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinSplitLayout.tsx")},[]);let{page:{image_adjusted:t,blocks:n}}=e,{images:o={}}=t||{},l=o["750x"];if(!l)return null;let{width:s,height:d}=l;return(0,g.jsx)(a.Fragment,{children:l&&l.url&&(0,g.jsx)(r.Ee,{alt:(n??[]).map(e=>e.text||"").join(),fit:"contain",naturalHeight:d??1,naturalWidth:s??1,src:l.url})})};var Z=n(295472),A=n(400962),E=n(661376),L=n(702844),R=n(112658),D=n(15392),M=n(49254);function z({children:e,clientTrackingParams:t,closeupStoryPinViewability:n,pin:i,productPins:a,viewParameter:o,viewType:r}){let{previous:l,forward:s}=(0,A.ou)(),c=0===l.length&&0===s.length,u=(0,M.t)();return(0,g.jsx)(L.o,{closeupPaneWidth:D.Gg,headerHeight:u,isLandingPage:c,loadFonts:Z.Z,productPins:a,renderStoryPinMediaLayout:({activePageIndex:e,hideText:n,isActive:a,isCoverPage:o,muteVideos:r,onClickThrough:l,page:s,pageIndex:d,pageWidth:c,pinId:u})=>(0,g.jsx)(j,{activePageIndex:e,clientTrackingParams:t,hideText:n,isActive:a,isCoverPage:o,muteVideos:r,onClickThrough:l,page:s,pageIndex:d,pageWidth:c,pin:i,pinId:u}),renderStoryPinPage:({activePageIndex:e,customEndCard:a,fontsLoaded:l,isActive:s,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:m,page:h,pageAspectRatio:f,pageHeight:y,pageWidth:_,ownerId:x,pinId:b,productPins:v,shouldLogTimeSpent:w,stillLoading:P,videoPinProgress:I})=>(0,g.jsx)(d.Z,{activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:n,customEndCard:a,fontsLoaded:l,isActive:s,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:m,ownerId:x,page:h,pageAspectRatio:f,pageHeight:y,pageIndex:e,pageWidth:_,pin:i,pinId:b,productPins:v,shouldLogTimeSpent:w,stillLoading:P,videoPinProgress:I,viewParameter:o,viewType:r}),renderStoryPinSplitLayout:({page:e})=>(0,g.jsx)(T,{page:e}),renderStoryPinText:({blocks:e,onClickThrough:n,pageId:i,pinId:a})=>(0,g.jsx)(I,{blocks:e,clientTrackingParams:t,onClickThrough:n,pageId:i,pinId:a}),children:e})}function B({clientTrackingParams:e,children:t,isInStream:n,viewType:i,viewParameter:a}){return n?t:(0,g.jsx)(R.Z,{clientTrackingParams:e,component:85,view:i,viewParameter:a,children:t})}function F({children:e,pin:t}){return e({productPins:(0,E.Z)({name:"StoryPinTaggedProductsResource",options:{id:t.id},noCache:!0}).data||[]})}function W({children:e,clientTrackingParams:t,closeupStoryPinViewability:n,pin:o,isInStream:r=!1,viewType:l,viewParameter:s}){(0,a.useEffect)(()=>{(0,i.Z)("DesktopStoryPinContextProvider","/app/common/react/components/auth-desktop-web-closeup/StoryPin/DesktopStoryPinContextProvider.tsx")},[]);let d=!!o.story_pin_data?.has_product_pins,c=({productPins:i})=>(0,g.jsx)(z,{clientTrackingParams:t,closeupStoryPinViewability:n,pin:o,productPins:i,viewParameter:s,viewType:l,children:e});return(0,g.jsx)(B,{clientTrackingParams:t,isInStream:r,viewParameter:s,viewType:l,children:d?(0,g.jsx)(F,{pin:o,children:c}):c({productPins:[]})})}var V=n(104999),O=n(221175),K=n(470205),N=n(171556),H=n(566431),$=n(382964),U=n(891851),G=n(830031),X=n(852796),J=n(23641),Y=n(825605),q=n(774838),Q=n(736328);function ee({appConfig:e}){(0,a.useEffect)(()=>{(0,i.Z)("IdeaPinActions","/app/packages/story-pin/Closeup/IdeaPinActions.tsx")},[]);let t=(0,u.Z)(),n=(0,Q.Z)(),{isRTL:o}=(0,q.B)();return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginTop:16}},"data-test-id":"back-button",left:!o,paddingX:4,position:"absolute",right:o,top:!0,children:"authDesktop"===e.type&&(0,g.jsx)(r.hU,{accessibilityLabel:t.bt("Back button", "Back button", "storyPin.closeup.back", undefined, true),bgColor:"transparent",icon:"arrow-left",iconColor:"default",onClick:()=>{n({action:"click",item:"back-button"}),e.onNavigateBack()},size:"lg"})})})}var et=n(410706),en=n(639043),ei=n(151383),ea=n(450228),eo=n(967515),er=n(408640),el=n(893957),es=n(764682),ed=n(113759),ec=n(63805),eu=n(250704);let ep=(0,a.lazy)(()=>n.e("65443").then(n.bind(n,306639))),em=(0,a.lazy)(()=>Promise.resolve().then(n.bind(n,642578))),eh=(0,a.lazy)(()=>n.e("32560").then(n.bind(n,620623))),eg=(0,a.lazy)(()=>Promise.all([n.e("25418"),n.e("96415")]).then(n.bind(n,872901))),ef=(0,a.lazy)(()=>Promise.resolve().then(n.bind(n,584843))),ey={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"32px 32px 0 0"},e_={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"0 0 32px 32px",bottom:0},ex={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",borderRadius:"32px 32px 0 0",paddingTop:"30px",top:0},eb=[5,6,2];function ev({appConfig:e,clientTrackingParams:t,isInFocus:n,isInStream:i=!1,isStreamMuted:o,isStreamPanelOpen:d=!0,pin:c,storyPinData:p,onIdeaPinCloseupCommentClick:m,setStreamIsMuted:h,streamItemIndex:f,togglePanel:y,variant:_,viewType:b=3,viewParameterType:v,onTogglePanel:w}){let P,I=(0,L.c)(),{peekCloseupEnabled:k,viewportSize:S}=(0,ed.x4)(),C=(0,u.Z)(),j=(0,V.Z)(),T=(0,X.g)(),Z=(0,G.A)(),{setIdeaPinActivePage:A,setIdeaPinDynamicWidth:E}=(0,ec.Ut)(),{activePage:R}=(0,ec.H8)(),{clearSeekTime:D}=(0,eo.RC)(),{seekTimes:M}=(0,eo.Hx)(),{closeupPaneWidth:z,headerHeight:B,isLandingPage:F,renderStoryPinMediaLayout:W,renderStoryPinPage:N,renderStoryPinSplitLayout:q,renderStoryPinText:Q,productPins:eu}=I||{},{id:ev}=c,ew=M&&M[c.id],eP=!!p?.is_deleted,{pages:eI=[],metadata:ek={}}=p||{},{canvas_aspect_ratio:eS,version:eC}=ek,ej=eS??x.ap,[eT,eZ]=(0,a.useState)(0),eA=(0,a.useRef)(0),eE=(0,a.useRef)(null),[eL,eR]=(0,a.useState)("closeup"===_&&n),[eD,eM]=(0,a.useState)(375),ez="calc(100% - 32px)",eB=(0,a.useRef)(null),[eF,eW]=(0,a.useState)(!1),[eV,eO]=(0,a.useState)(!1),[eK,eN]=(0,a.useState)(!0);(0,a.useEffect)(()=>{w&&w(eK)},[eK,w]),(0,a.useEffect)(()=>{eN(d)},[d]);let{should_mute:eH=!0,music_attributions:e$=[]}=eI[eT],[eU,eG]=(0,a.useState)(F||eH),eX=void 0!==h?h:eG,eJ=void 0!==o?o:eU;(0,a.useEffect)(()=>{eH&&eX(!0)},[eH,eX]);let eY=eI.filter(e=>void 0===e.layout||!eb.includes(e.layout)),eq=eY.length,eQ=eY[eT],e0=v||(0,U.Z)({hasPin:!!c,hasPinRichMetadata:!!c.rich_metadata,hasPinRichMetadataProducts:!!c.rich_metadata?.products,hasPinRichMetadataArticle:!!c.rich_metadata?.article,hasPinRichMetadataRecipe:!!c.rich_metadata?.recipe,hasPinStoryPinData:!!c.story_pin_data}),e1=B+64,{getNormalizedPinImage:e6}=(0,$.Z)({pinKey:{type:"Legacy",data:c},maxWidth:O.Wm}),e3="closeup"===_,e2=()=>{if("undefined"!=typeof window){let e=window.innerWidth-(eK?z:0)-216;if(e3)eM(function({availableWidth:e,pageAspectRatio:t,unavailableHeight:n,windowInnerHeight:i}){let a=i-n,o=Math.min(Math.max(650,Math.min((i-n)*t,e)),1e3);return o/t>=a&&(o=a*t),o}({availableWidth:e,pageAspectRatio:ej,unavailableHeight:e1,windowInnerHeight:window.innerHeight}));else{let{width:e}=e6();eM(e),E(e)}}};(0,el.Z)(()=>(window.addEventListener("resize",e2),e2(),()=>{window.removeEventListener("resize",e2)}));let[e4,e9]=(0,a.useState)(!1),[e8,e7]=(0,a.useState)(null),[e5,te]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!e5&&n&&(j({event_type:7588,view_type:b,view_parameter:e0,component:13801,object_id_str:ev,aux_data:{..."number"==typeof f?{grid_index:f}:{}}}),te(!0))},[e5,n,j,ev,b,e0,f]);let tt=(0,a.useCallback)(e=>{let{blocks:t}=eI[e]||{},i=t?.find(e=>3===e.block_type);eB.current&&eB.current instanceof er.B7&&(eB.current.clear(),eB.current=null),!i&&n&&(eB.current=new er.B7(e=>{e7({currentTime:e<1?e:1,duration:1})},()=>{let t="closeup"===_?e:R;t<eq-1?(eB.current&&eB.current instanceof er.B7&&(eB.current.clear(),eB.current=null),ta(t+1)):(eW(!0),eR(!1))},H.oN))},[n,eq,eI,R,_]),tn=e=>{e7({currentTime:0,duration:1}),tt(e)};(0,a.useEffect)(()=>{eA.current=eT},[eT]),(0,a.useEffect)(()=>{eE.current=eL},[eL]),(0,el.Z)(()=>(tn(eT),()=>{eB.current&&eB.current instanceof er.B7&&eE.current&&eB.current.clear()}));let ti=e=>{Z&&(Z.abort("startNewPwt"),(0,J.sX)("startStoryPinStepPwt")),T&&(T.abort("startNewPwt"),T.start(),T.addBinaryAnnotation("page.current.index",e,"I16"),T.addBinaryAnnotation("page.count",eI.length,"I16"),T.addBinaryAnnotation("view.type",b,"I32"),T.addBinaryAnnotation("view.parameter",e0,"I32"))};(0,el.Z)(()=>{Z&&(Z.addBinaryAnnotation("page.current.index",eT,"I16"),Z.addBinaryAnnotation("page.count",eI.length,"I16"),Z.addBinaryAnnotation("view.type",b,"I32"),Z.addBinaryAnnotation("view.parameter",e0,"I32")),(0,J.rt)("page.current.index",eT,"I16"),(0,J.rt)("page.count",eI.length,"I16"),(0,J.rt)("view.type",b,"I32"),(0,J.rt)("view.parameter",e0,"I32")});let ta=e=>{eL||eR(!0),eF&&eW(!1),tn(e),e!==eT&&D(),eZ(e),A(e),ti(e)};(0,a.useEffect)(()=>{if(eF&&eW(!1),eB.current&&ew){let e=eB.current;e.pause(),e.remaining=H.oN-ew*es.gJ,e7({currentTime:ew/H.P6,duration:1})}},[ew]),(0,a.useEffect)(()=>{A(R)},[A,R]),(0,a.useEffect)(()=>{"related-products"===_&&(eZ(R),ta(R))},[R,_]);let to=()=>eF?13799:0===eT?227:228,tr=()=>{eT<eq-1&&(ta(eT+1),j({event_type:101,view_type:b,view_parameter:e0,component:to(),element:12261,object_id_str:ev}))},tl=e=>{let{keyCode:t,target:n}=e,i=!!n&&"isContentEditable"in n&&n.isContentEditable||!!n&&"contentEditable"in n&&"true"===n.contentEditable;37!==t||i?39!==t||i||tr():eT===eq-1&&eF?(ta(eT),j({event_type:101,view_type:b,view_parameter:e0,component:to(),element:12260,object_id_str:ev})):eT>0&&(ta(eT-1),j({event_type:101,view_type:b,view_parameter:e0,component:to(),element:12260,object_id_str:ev}))};(0,a.useEffect)(()=>(document.addEventListener("keydown",tl),()=>document.removeEventListener("keydown",tl)),[eT]);let{fontsLoaded:ts,mediaDataReceived:td}=(0,ea.tq)({hasPin:!!c,pages:eI}),tc=eC?(0,er.n4)(eC,"0.8.0"):null,tu=null!=tc&&tc>=0,tp=e=>{e===eq-1&&(eW(!0),eR(!1),A(0)),e===eT&&tr()},tm=e=>{e7({currentTime:e?.currentTime??0,duration:e?.duration??1})},th=()=>{eO(!0),eR(!1),eB.current&&!eB.current.paused&&eB.current.pause()},tg=t=>eI[t]?tu?N?.({activePageIndex:eT,fontsLoaded:ts,customEndCard:!0,isActive:t===eT&&eL,muteVideos:eJ,onChangeMuteVideo:eX,onEnded:tp,onFlyoutOpen:th,videoPinProgress:eT===t?e8:void 0,onUpdateVideoInfo:tm,ownerId:c.native_creator?.id??"",page:eI[t],pageAspectRatio:ej,pageIndex:t,pageHeight:eD/ej,pageWidth:eD,pinId:c.id,productPins:eu,shouldLogTimeSpent:n,stillLoading:!td}):(t=>{let n=t?.layout===0;switch(t?.layout){case 0:case 1:return W?.({activePageIndex:eT,hideText:n,isActive:!0,isCoverPage:n,muteVideos:eJ,onClickThrough:e.onClickThrough,page:t,pageIndex:eT,pageWidth:eD,pinId:ev});case 4:return(t?.blocks?.length??0)>0&&Q?.({blocks:t?.blocks??[],pageId:`text-${eT}`,page:t,pinId:ev,onClickThrough:e.onClickThrough});case 3:return q?.({page:t});default:return null}})(eQ):null,tf=()=>{eR(!1),eB.current&&eB.current.pause(),j({event_type:9324,view_type:b,view_parameter:e0,component:to(),object_id_str:ev,aux_data:{story_pin_page_id:eT}})},ty=()=>{if(eR(!0),eB.current){let e=eB.current;ew&&ew>0&&D(),e.resume()}else e8||tn(eT);j({event_type:9323,view_type:b,view_parameter:e0,component:to(),object_id_str:ev,aux_data:{story_pin_page_id:eT}})},t_=()=>{eF||(eO(!1),eL?tf():ty())};(0,a.useEffect)(()=>{"closeup"===_&&(!n||eF||eL?!n&&eL&&tf():ty())},[n,_]),(0,a.useEffect)(()=>{"related-products"===_&&tf()},[]);let tx=()=>{ta(0)},{fiftyPercentWidth:tb,fiftyPercentHeight:tv}=(0,s.Re)(64),{maxHeight:tw}=(0,s.Re)(0,32),{fiftyPercentWidth:tP}=(0,s.Re)();return k&&(P="sm"===S?tv:tw),(0,g.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:e3?{top:B,height:`calc(100vh - ${B}px)`,position:"sticky",pointerEvents:"none",minHeight:632,maxHeight:k?P:void 0,zIndex:eK?"auto":3}:{}},display:"flex",left:!0,children:[(0,g.jsxs)(r.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",minWidth:k&&"sm"!==S?tP:void 0}},display:"flex",flex:"grow",justifyContent:"center",position:"relative",children:[e3&&(0,g.jsx)(r.xu,{bottom:!0,color:"secondary",left:!0,position:"absolute",right:!0,top:!0}),eP?(0,g.jsx)(en.Z,{height:eD/x.ap,rounding:x.yR,width:eD}):(0,g.jsxs)(a.Fragment,{children:[td&&(0,g.jsx)(r.xu,{height:1,left:!0,marginTop:-1,overflow:"hidden",position:"absolute",top:!0,width:1,children:(()=>{let e=[];for(let t=1;t<=eI.length;t+=1)eT+t<eI.length&&e.push(tg(eT+t));return e})()}),(0,g.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:e3?void 0:`${x.YL}px`}},display:"flex",onMouseLeave:()=>{e9(!1)},onMouseOver:()=>e9(!0),position:"relative",children:(0,g.jsxs)(r.xu,{paddingX:4,children:[(0,g.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...e_,flexDirection:"column-reverse"}},display:"flex",height:128,paddingX:6,position:"absolute",width:ez,zIndex:x.Gf,children:(0,g.jsx)(ei.Z,{activePageIndex:eT,handleMute:()=>{eH||eX(!eJ)},handlePanelChange:()=>{eN(!eK)},handlePause:tf,handlePausePlay:t_,handlePlay:ty,handleVideoScrubbingNewPage:e=>{eF&&eW(!1),tn(e),eZ(e),A(e),ti(e)},handleWatchAgain:tx,inMilliseconds:!0,isMuted:eJ,isPanelOpen:eK,isPlaying:eL,onPageSelect:e=>ta(e),pinKey:{type:"Legacy",data:c},progressInfo:e8,showEndCard:eF,showVideoControls:e4,viewParameter:e0})}),(0,g.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...!eK?{paddingLeft:"26px",bottom:0}:ex,marginBottom:eK?void 0:"88px",maxWidth:tb}},"data-test-id":"music-attribution",display:"flex",justifyContent:eK?"center":"start",overflow:"hidden",paddingY:eK?5:void 0,position:"absolute",width:eD,zIndex:x.Gf,children:(0,g.jsx)(l.Z,{handlePause:tf,handlePlay:ty,musicAttributions:e$,shouldMute:eH,showEndCard:eF})}),!eF&&!eK&&(0,g.jsxs)(r.xu,{alignItems:"start",dangerouslySetInlineStyle:{__style:eK?{}:ey},display:"flex",height:128,justifyContent:"between",padding:4,position:"absolute",top:!0,width:ez,zIndex:x.Gf,children:[(0,g.jsxs)(r.kC,{alignItems:"stretch",direction:"row",children:[!eK&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_IdeaPinSecondarySendButton",children:(0,g.jsx)(Y.Z,{children:(0,g.jsx)(ef,{pinKey:{type:"Legacy",data:c}})})}),!eK&&c.is_eligible_for_aggregated_comments&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_CommentButton",children:(0,g.jsx)(Y.Z,{children:(0,g.jsx)(ep,{onCommentClick:()=>{j({event_type:101,view_type:b,view_parameter:e0,component:13801,element:10944,object_id_str:c.id}),i&&y?y():eN(!0),m&&m();let e=document.getElementById(`canonical-card-${c.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}})})}),!eK&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_ReactionPickerContainer",children:(0,g.jsx)(Y.Z,{children:(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(eg,{clientTrackingParams:t,component:13801,iconColor:"inverse",pinId:c.id,reactionByMe:c.reaction_by_me,showTooltip:!0,viewParameter:e0,viewType:b})})})})]}),!eK&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_PinSaveButton",children:(0,g.jsx)(Y.Z,{children:(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(eh,{clientTrackingParams:t,isCloseupPin:!0,onClickCallback:()=>{j({event_type:101,view_type:b,view_parameter:e0,component:13801,element:0,object_id_str:c.id})},pinKey:{type:"Legacy",data:c},size:"lg"})})})})]}),(0,g.jsx)(r.xu,{"data-test-id":"story-pin-closeup-container",position:"relative",children:(0,g.jsx)(r.iP,{accessibilityLabel:eL?C.bt("Pause", "Pause", "storyPin.closeup.pauseButton.accessibilityLabel", undefined, true):C.bt("Play", "Play", "storyPin.closeup.playButton.accessibilityLabel", undefined, true),disabled:eF,onTap:t_,rounding:x.yR,children:(0,g.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{maxWidth:tb,maxHeight:P}},"data-test-id":"story-pin-closeup-page",height:eD/ej,overflow:"hidden",position:"relative",rounding:x.yR,width:eD,children:[tg(eT),!eF&&!eV&&!ew&&(0,g.jsx)(et.Z,{playing:eL}),"authDesktop"===e.type&&eF&&c.native_creator&&(0,g.jsx)(K.Z,{name:"IdeaPinCloseup_EndCard",children:(0,g.jsx)(Y.Z,{children:(0,g.jsx)(r.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,rounding:x.yR,top:!0,zIndex:x.s5,children:(0,g.jsx)(em,{clientTrackingParams:c.trackingParams||c.tracking_params,pinKey:{type:"Legacy",data:c},watchAgain:tx})})})})]})})})]})})]}),!i&&e3&&(0,g.jsx)(ee,{appConfig:e})]}),eK&&e3&&(0,g.jsx)(r.xu,{flex:"none",height:"100%",position:"relative",width:z,children:"duplo"===e.type&&e.storyPinDetails})]})}function ew(e){(0,a.useEffect)(()=>{(0,i.Z)("IdeaPinCloseup","/app/packages/story-pin/Closeup/IdeaPinCloseup.tsx")},[]);let{pin:t,viewType:n=3,viewParameterType:l}=e,[s,d]=(0,a.useState)({isInFocus:!0,viewability:0}),{isInFocus:c,viewability:u}=s,p=l||(0,U.Z)({hasPin:!!t,hasPinRichMetadata:!!t.rich_metadata,hasPinRichMetadataProducts:!!t.rich_metadata?.products,hasPinRichMetadataArticle:!!t.rich_metadata?.article,hasPinRichMetadataRecipe:!!t.rich_metadata?.recipe,hasPinStoryPinData:!!t.story_pin_data}),m=(0,o.TH)(),h=e.clientTrackingParams||(0,eu.Z)((m?.state||{}).trackingParams,t.trackingParams||t.tracking_params);return(0,g.jsx)(X.T,{children:(0,g.jsx)(N.Z,{onVisibilityChange:e=>{if(e&&e.length>0){let{intersectionRatio:t}=e[0];d({isInFocus:t>.5,viewability:t})}},options:{threshold:[0,.5,.8,.99,1]},children:i=>(0,g.jsx)(r.xu,{ref:i,children:(0,g.jsx)(W,{clientTrackingParams:h,closeupStoryPinViewability:u,pin:t,viewParameter:p,viewType:n,children:c?(0,g.jsx)(R.Z,{clientTrackingParams:h,component:13801,objectId:t.id,view:n,viewParameter:p,children:(0,g.jsx)(ev,{...e,isInFocus:c})}):(0,g.jsx)(ev,{...e,isInFocus:c})})})})})}},639043:function(e,t,n){n.d(t,{Z:()=>s});var i=n(686659),a=n(667294),o=n(399353),r=n(24246),l=n(785893);function s({height:e,isDenseView:t,rounding:n,width:s,color:d}){(0,a.useEffect)(()=>{(0,i.Z)("UnavailableIdeaPin","/app/packages/story-pin/Closeup/UnavailableIdeaPin.tsx")},[]);let c=(0,r.Z)();return(0,l.jsx)(o.xu,{alignItems:"center",color:d||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:n,width:s,children:(0,l.jsxs)(o.kC,{alignItems:"center",direction:"column",children:[(0,l.jsx)(o.xu,{paddingY:t?2:4,children:(0,l.jsx)(o.JO,{accessibilityLabel:c.bt("Pin not available", "Pin not available", "story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel", undefined, true),color:"default",icon:"circle-exclamation-point",size:20})}),(0,l.jsx)(o.xe,{weight:"bold",children:c.bt("Unavailable", "Unavailable", "story-pin.Closeup.UnavailableIdeaPin.Unavailable", undefined, true)}),!t&&(0,l.jsx)(o.xu,{paddingY:1,children:(0,l.jsx)(o.xe,{children:c.bt("Removed by the creator", "Removed by the creator", "story-pin.Closeup.UnavailableIdeaPin.Removed", undefined, true)})})]})})}},967515:function(e,t,n){n.d(t,{RC:()=>p,Hx:()=>m,Wr:()=>u});var i=n(667294),a=n(213491),o=n(27277),r=n(17658),l=n(785893);let s=()=>Promise.resolve().then(n.bind(n,27277)),{Provider:d,get:c}=(0,a.Z)("IdeaPinVideoPlayer");function u({children:e}){let[t,n]=(0,r.Z)(s,o.initialState),a=(0,i.useMemo)(()=>({dispatch:n,ideaPinVideoPlayerControls:t}),[n,t]);return(0,l.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,i.useMemo)(()=>({updateSeekTime:(t,n)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:n||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})}}),[e])}function m(){let{ideaPinVideoPlayerControls:e}=c();return e}},27277:function(e,t,n){n.r(t),n.d(t,{default:()=>a,initialState:()=>i});let i={seekTimes:{},currentProgressInfo:{currentTime:0,duration:0}};function a(e=i,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime}};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{}};default:return e}}},702844:function(e,t,n){n.d(t,{c:()=>s,o:()=>l});var i=n(686659),a=n(667294),o=n(785893);let r=(0,a.createContext)(null);function l({children:e,closeupPaneWidth:t,headerHeight:n,isLandingPage:l,loadFonts:s,renderStoryPinMediaLayout:d,renderStoryPinSplitLayout:c,renderStoryPinText:u,renderStoryPinPage:p,productPins:m}){(0,a.useEffect)(()=>{(0,i.Z)("StoryPinContext","/app/packages/story-pin/StoryPinContext.tsx")},[]);let h=(0,a.useMemo)(()=>({closeupPaneWidth:t,headerHeight:n,isLandingPage:l,loadFonts:s,renderStoryPinMediaLayout:d,renderStoryPinSplitLayout:c,renderStoryPinText:u,renderStoryPinPage:p,productPins:m}),[t,n,l,s,d,c,u,p,m]);return(0,o.jsx)(r,{value:h,children:e})}let s=()=>(0,a.use)(r)},176783:function(e,t,n){n.d(t,{Cc:()=>m,DL:()=>d,Gf:()=>f,LX:()=>a,Lc:()=>y,Ls:()=>h,Rf:()=>s,YL:()=>l,ap:()=>o,h8:()=>u,pE:()=>c,s5:()=>g,tQ:()=>p,yR:()=>r});var i=n(399353);let a={w:9,h:16},o=a.w/a.h,r=800,l=10,s=5e3,d=2e3;function c(e,t=1){return{x:(e??24)/5,y:(e??24)*(t-1)}}let u={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},p=[u.IMAGE,u.VIDEO],m={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},h=new i.Ry(1),g=new i.H3([h]),f=new i.H3([g]),y=e=>{let t=Math.floor(e||0),n=Math.floor(t/60),i=t-60*n,a=n<10?`${n}`:n,o=i<10?`0${i}`:i;return`${a}:${o}`}},631796:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),a=n(288692);function o(e){let[t,n]=(0,i.useState)(null);return(0,i.useEffect)(()=>{!async function(){n(await (0,a.Z)(e))}()},[e]),t}},573375:function(e,t,n){n.d(t,{Z:()=>s});var i=n(686659),a=n(667294),o=n(399353),r=n(293646),l=n(785893);function s({onVisibilityChanged:e,children:t,...n}){(0,a.useEffect)(()=>{(0,i.Z)("VisibilityChangedWrapper","/app/packages/useVisibilityChanged/VisibilityChangedWrapper.tsx")},[]);let s=(0,r.Z)({onVisibilityChanged:e,...n});return(0,l.jsx)(o.xu,{ref:s,children:t})}},293646:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294);let a=new Map,o=null,r=e=>{e.forEach(e=>{let t=a.get(e.target);t&&t(e)})};function l({onVisibilityChanged:e,trackFullVisible:t,rootMargin:n}){let l=(0,i.useRef)(null),s=!1,d=()=>{let t;l.current instanceof HTMLElement&&(t=l.current,a.has(t))&&s&&(e(!1),s=!1)},c=(0,i.useCallback)(n=>{l.current instanceof HTMLElement&&((e,t="-64px 0px 0px 0px",n)=>{let i={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};o=o||new window.IntersectionObserver(r,i),a.set(e,n),o.observe(e)})(l.current,n,n=>{if(!a.has(l.current))return;let i=t?n.intersectionRatio>=1:n.intersectionRatio>=.5,o=t?0===n.intersectionRatio:!i;!s&&i?(s=n.intersectionRatio>0||n.isIntersecting)&&e(!0):s&&o&&d()})},[l.current]);return(0,i.useEffect)(()=>(c(n),()=>{if(l.current instanceof HTMLElement){var e;d(),e=l.current,o.unobserve(e),a.delete(e)}}),[c]),l}},919917:function(e,t,n){function i(e,t){let{organicVideosAutoplaying:n,promotedVideosAutoplaying:i,videoCarouselModuleAutoplaying:a}=t,o={...n,...i,...a};return o[e]&&o[e].currentTime}n.d(t,{Z:()=>i})},49254:function(e,t,n){n.d(t,{c:()=>a,t:()=>o});var i=n(380108);function a({children:e}){let{height:t}=(0,i.Z)();return e(t)}function o(){let{height:e}=(0,i.Z)();return e}},63805:function(e,t,n){n.d(t,{H8:()=>m,Ut:()=>p,fr:()=>u});var i=n(667294),a=n(213491),o=n(17658),r=n(553734),l=n(785893);let s=()=>n.e("38938").then(n.bind(n,835802)),{Provider:d,get:c}=(0,a.Z)("IdeaPin");function u({children:e}){let[t,n]=(0,o.Z)(s,r.Z),a=(0,i.useMemo)(()=>({dispatch:n,ideaPin:t}),[n,t]);return(0,l.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,i.useMemo)(()=>({setIdeaPinActivePage:t=>{e({type:"IDEA_PIN_ACTIVE_PAGE",payload:{activePage:t}})},setIdeaPinDynamicWidth:t=>{e({type:"IDEA_PIN_DYNAMIC_WIDTH",payload:{dynamicWidth:t}})}}),[e])}function m(){let{ideaPin:e}=c();return e}},553734:function(e,t,n){n.d(t,{Z:()=>i});let i={activePage:0,dynamicWidth:0}},683372:function(e,t,n){n.d(t,{C:()=>i,_:()=>a});let i=e=>!!e&&/^\/pin\/[\w-]+\/?$/.test(e.pathname),a=e=>{let t=[...e].reverse().find(({location:e})=>e&&!i(e));return t&&t.location&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t.location)?(({pathname:e,search:t})=>{let n=/^\/search\/pins\/(\?.*)$/.exec(e),i=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return i?decodeURIComponent(i[1]):""})(t.location):""}},918617:function(e,t,n){n.d(t,{Z:()=>p});var i=n(686659),a=n(667294),o=n(399353),r=n(166988),l=n(774838),s=n(398542),d=n(15392),c=n(113759),u=n(785893);function p({children:e,isVideo:t=!1,isWideVideo:n,shouldPadImage:p,styleOverrides:m={},variant:h}){(0,a.useEffect)(()=>{(0,i.Z)("ResponsiveImageContainer","/app/www/closeup/desktop/responsiveContainers/ResponsiveImageContainer.tsx")},[]);let{showCloseupContentRight:g,viewportSize:f,paneWidth:y,closeupWithinMasonryEnabled:_,showProductDetailPage:x}=(0,c.x4)(),b=(0,l.B)(),v=(0,r.Z)({showProductDetailPage:x}),w="default"===h;if(!(!_&&(g&&"lg"===f||w||n)))return(0,u.jsx)(o.xu,{children:e});let{borderStyle:P}=(0,s.Z)({isSideBySide:g&&!n,isPadded:p,isRTL:b.isRTL,closeupWithinMasonryEnabled:_}),I=n?d.KP:y,k=n?d.KP:496,S=m.height?.height||"100%",C=m.maxWidth?.maxWidth||I,j=m.minWidth?.minWidth||y;return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:v||_?void 0:m.borderRadius||P.borderRadius,...p&&t?{overflow:"hidden"}:{}}},display:w?"flex":void 0,flex:w&&n?"grow":void 0,height:w?S:void 0,justifyContent:w?"center":void 0,marginBottom:w?void 0:6,marginEnd:w?void 0:6*!n,maxWidth:w?C:k,minWidth:w?j:344,rounding:w?void 0:200,children:e})}},766162:function(e,t,n){n.d(t,{Z:()=>c});var i=n(686659),a=n(667294),o=n(399353),r=n(200301),l=n(24246),s=n(834182),d=n(785893);function c({fit:e,highResOnly:t,onError:n,onLoad:c,slot:u,slotIndex:p}){(0,a.useEffect)(()=>{(0,i.Z)("CarouselImageItem","/app/www/common/Carousel/CarouselItem/CarouselImageItem.tsx")},[]);let m=(0,l.Z)(),{details:h=""}=u,{url:g="",width:f=1,height:y=1}=(0,r.Z)(u.images)||{};return g&&(0,d.jsx)(o.Ee,{alt:(0,s.GH)(h,m,p),fit:e,naturalHeight:y??1,naturalWidth:f??1,onError:n,onLoad:c,src:g,srcSet:(0,s.gA)({slot:u,highResOnly:t})})}},542515:function(e,t,n){n.d(t,{Z:()=>c});var i=n(667294),a=n(501010),o=n(774838),r=n(739405),l=n(767415);class s{constructor(){var e,t,n;e="callbacks",t=new Map,(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.observer=new ResizeObserver(e=>{e.forEach(e=>{let t=this.callbacks.get(e.target);t&&t.forEach(t=>t(e.target))})})}observe(e,t){this.callbacks.has(e)||(this.callbacks.set(e,new Set),this.observer.observe(e)),this.callbacks.get(e).add(t)}unobserve(e,t){let n=this.callbacks.get(e);n&&(n.delete(t),0===n.size&&(this.callbacks.delete(e),this.observer.unobserve(e)))}}let d=null;function c(e,t){let{anyEnabled:n,group:c}=(0,a.Z)().checkExperiment("closeup_web_resize_observer_optimization"),{isAuthenticated:u}=(0,o.B)(),p=(0,r.ZP)(),m=(0,i.useCallback)(t=>{let n=performance.now();e(t);let i=performance.now();(0,l.nP)("closeup.www.resizeObserverCallback",{sampleRate:.1,tags:{isAuthenticated:u,deviceType:p,resizeObserverOptimizationExp:c,duration:Math.round(i-n)}})},[e,u,p,c]);h=n?null:m,(0,i.useEffect)(()=>{if(!t.current||!h)return()=>{};{let e=t.current;if("ResizeObserver"in window){let t=new ResizeObserver(t=>{Array.isArray(t)&&t.length&&h(e)});return t.observe(e),()=>t.unobserve(e)}{let t,n=e.clientHeight,i=e.clientWidth,a=()=>{let o=e.clientHeight,r=e.clientWidth;(n!==o||i!==r)&&(n=o,i=r,h(e)),t=window.requestAnimationFrame(a)};return a(),()=>window.cancelAnimationFrame(t)}}},[t,h]);var h,g=n?m:null;let f=(0,i.useRef)(g);f.current=g;let y=(0,i.useCallback)(e=>{f.current?.(e)},[]);(0,i.useEffect)(()=>{if(!t.current)return;let e="undefined"!=typeof window&&"ResizeObserver"in window?(d||(d=new s),d):null;if(!e)return void(0,l.nP)("closeup.www.resizeObserverCallback.noResizeObserver",{sampleRate:.1,tags:{isAuthenticated:u,deviceType:p}});let n=t.current;return e.observe(n,y),()=>{e.unobserve(n,y)}},[t,y,u,p])}},279394:function(e,t,n){function i(e){let t=[],n="";for(let i of e)if(n){let e=!!i.match(/\s/),a=!!n.match(/\s/);if(e===a)n+=i;else if(!a&&n.includes("-")){let e=0;for(let i=0;i<n.length;i+=1)"-"===n[i]&&(t.push(n.substring(e,i+1)),e=i+1);t.push(n.substring(e)),n=i}else t.push(n),n=i}else n=i;return n.length&&t.push(n),t}function a({boxHeight:e,boxWidth:t,font:n,startFontSize:a,text:o}){if("undefined"==typeof document||!document.body)return{fontSize:a,lines:[]};let{body:r}=document,l=document.createElement("div");r.appendChild(l);let s=o?.split(/\r?\n/g),d=a,c={letterSpacing:n.fontOverrides?.letterSpacing!=null?`${n.fontOverrides.letterSpacing}px`:void 0,lineHeight:String(n.fontOverrides?.lineHeight||1.1),fontFamily:n.fontFamily,fontSize:`${d}px`,position:"absolute",visibility:"hidden",width:`${t}px`};Object.assign(l.style,c);let u=document.createElement("div");for(u.style.display="inline",l.appendChild(u),(s??[]).forEach((e,t)=>{let n=document.createElement("span");n.style.wordBreak="break-word",u.appendChild(n),n.appendChild(document.createTextNode(e)),t!==(o??"").length-1&&n.appendChild(document.createElement("br"))});(u.offsetHeight>e||u.offsetWidth>t)&&d>0;)d-=1,l.style.fontSize=`${d}px`;return u.remove(),l.remove(),{fontSize:d,lines:d>0?function({font:e,fontSize:t,textList:n,width:a}){if("undefined"==typeof document||!document.body||a<=0||t<=0)return[];let{body:o}=document,r=document.createElement("div");o.appendChild(r);let l={letterSpacing:e.fontOverrides?.letterSpacing!=null?`${e.fontOverrides.letterSpacing}px`:void 0,lineHeight:String(e.fontOverrides?.lineHeight||1.1),fontFamily:e.fontFamily,fontSize:`${t}px`,visibility:"hidden"};Object.assign(r.style,l);let s=document.createElement("div");s.style.display="inline",r.appendChild(s);let d=document.createTextNode("");s.appendChild(d);let c=[],u="",p=e=>{let t=e.trim();return d.textContent=t,{text:t,width:s.offsetWidth}},m=e=>{let t=!!e.match(/\s/),n=0===u.length;if(d.textContent=`${u}${e}`,s.offsetWidth>a)if(t)c.push(p(u)),u="";else if(n)for(let t of e)m(t);else c.push(p(u)),u="",m(e);else u+=e};for(let e of n??[])0===e.length&&c.push(p(u)),i(e).forEach(e=>m(e)),u.length&&(c.push(p(u)),u="");return s.remove(),r.remove(),c}({font:n,fontSize:d,textList:s,width:t}):[]}}function o(e){let t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("height").replace("px","")),i=parseFloat(t.getPropertyValue("font-size").replace("px","")),a=parseFloat(t.getPropertyValue("line-height").replace("px",""));return Number.isNaN(a)&&(a=1.2*i),Math.ceil(n/a)}n.d(t,{KV:()=>a,Yd:()=>i,xW:()=>o})},542392:function(e,t,n){n.d(t,{Af:()=>c,Ei:()=>s,II:()=>x,Lh:()=>g,U:()=>m,Zy:()=>l,dD:()=>o,er:()=>h,hb:()=>y,in:()=>d,j7:()=>f,kX:()=>u,mx:()=>_,n5:()=>r,q8:()=>p,xH:()=>a});var i=n(176783);let a=1048576,o=3,r=20,l=3,s=10,d=50,c=10,u=1200,p=375,m=375/i.ap,h=4096,g="#FFFFFF",f={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},y=420,_=325,x=768},317083:function(e,t,n){n.d(t,{Ul:()=>o,VS:()=>i,hy:()=>r,iM:()=>a,j4:()=>l});let i=2,a=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],o={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},r=128,l=e=>e&&document.querySelector(`video[poster="${e}"]`)||null}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/7062.en_GB-593144fa5e0c95aa.mjs.map