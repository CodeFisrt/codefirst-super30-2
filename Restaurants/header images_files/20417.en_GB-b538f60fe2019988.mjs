(self.modernJsonp=self.modernJsonp||[]).push([["20417"],{479548:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AuthDesktopWebCloseupVideoEndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};n.hash="c4a51cbc26011483ff5552ff99019cdc";let a=n},174635:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AuthDesktopWebCloseupVideoNonDuplo_pin",selections:[{args:null,kind:"FragmentSpread",name:"AuthDesktopWebCloseupVideoEndCard_pin"},{args:null,kind:"FragmentSpread",name:"VideoWithContextLogging_pin"},{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"IdeaPinVideoScrubberDuplo_pin"}],type:"Pin",abstractKey:null};n.hash="7562478d60c54219d833414c881b75b3";let a=n},52203:function(e,t,i){var n;i.r(t),i.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"IdeaPinVideoScrubberDuplo_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldMute",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:"videoListMobile",args:[{kind:"Literal",name:"version",value:"V_HLSV3_MOBILE"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null}],storageKey:'videoList(version:"V_HLSV3_MOBILE")'},{alias:"videoList720P",args:[{kind:"Literal",name:"version",value:"V_720P"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:[n],storageKey:null}],storageKey:'videoList(version:"V_720P")'}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"Pagination_pin"}],type:"Pin",abstractKey:null};a.hash="2f810e287a1c756ac33896e516afe9a2";let l=a},715652:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Pagination_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="6a1efce65e0b388d5f09f256d4756b8b";let a=n},77947:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};n.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a";let a=n},511849:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="15c2890e144324504002cdfbce76ffd8";let a=n},917628:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateImageContainerDimension_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};n.hash="86a6c49cecdb70d77f786a1965756cf9";let a=n},82852:function(e,t,i){var n,a,l,o;i.r(t),i.d(t,{default:()=>r});let s=(n={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},o=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l=[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null}],storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[n,a],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},a,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null});s.hash="b2a27d44d1f3dbd42301b82866212272";let r=s},874132:function(e,t,i){i.d(t,{S:()=>n,Z:()=>a});let n=1e3,a=3},912685:function(e,t,i){i.d(t,{ZP:()=>m,GJ:()=>h});var n,a=i(667294);i(422578);var l=i(519371),o=i(398504),s=i(654805),r=i(200301),d=i(183e3),c=i(15392),u=i(113759);let p=(void 0!==n||(n=i(917628)).hash&&"86a6c49cecdb70d77f786a1965756cf9"!==n.hash&&console.error("The definition of 'useCalculateImageContainerDimension_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function h(e,t){return`${Math.floor(e/t*1e4)/1e4} / 1`}function m({carouselData:e,imageToDisplayWidthRatio:t=1,mainImage:i={width:1,height:1,url:""},maxCloseupImageWidth:n,pinKey:h,shouldPadImage:m=!1}){let g=(0,d.Z)(p,h),{peekCloseupEnabled:f,viewportSize:y}=(0,u.x4)(),{numericValues:_}=(0,l.Re)(),{maxHeight:x}=(0,o.Z)({pinKey:g}),{fiftyPercentHeight:v,fiftyPercentWidth:b,maxHeight:S,maxWidth:P}=_??{},{peekRedesignFastFollowsEnabled:w}=(0,s.Z)(i);return(0,a.useMemo)(()=>{let a,l=n-c.d2,o=Math.min(m?l:n,P??1/0,b??1/0),s=Math.min(...[i,...e?.carousel_slots?.map(e=>{var t;return(0,r.Z)(e.images)||((t=e.videos?.video_list)?t.V_720P?.url?t.V_720P:t.V_HLSV4?.url?t.V_HLSV4:t.V_HLSV3_MOBILE?.url?t.V_HLSV3_MOBILE:t.V_HLSV3_WEB?.url?t.V_HLSV3_WEB:null:null)}).filter(e=>!!e)||[]].map(({width:e,height:t})=>(e??1)/(t??1))),d=Math.floor(o*(e?t:1)/s),u="sm"===y?v:S;a=f?u??d:"number"==typeof x?x:d;let p=w?void 0:a,h=p?Math.min(d,p):d,g=Math.min(o*(f?h/d:1),P??1/0,b??1/0),{containerAspectRatio:_,letterBoxedWidth:k,letterBoxedHeight:C}=function(e,t,i){let n,a,l=e?.width/e.height,o=t/i;return l>o?(n=t,a=t/l):(n=i*l,a=i),{containerAspectRatio:o,letterBoxedWidth:n,letterBoxedHeight:a}}(i,g,h);return{containerAspectRatio:_,containerHeight:h,containerWidth:g,horizontalOffset:(g-k)/2,letterBoxedHeight:C,letterBoxedWidth:k,letterBoxAspectRatio:k/C,verticalOffset:(h-C)/2}},[n,m,i,e,t,y,v,S,f,x,w,P,b])}},891101:function(e,t,i){i.d(t,{Z:()=>n});let n=(e,t)=>{let i,{height:n=0,width:a=0}=t||{};switch(e){case"enabled_15":i=.15;break;case"enabled_25":i=.25;break;default:i=.35}return a/n<i}},605497:function(e,t,i){i.d(t,{Z:()=>f});var n=i(686659),a=i(667294),l=i(399353),o=i(519371),s=i(398504),r=i(403972),d=i(230201),c=i(24246),u=i(780268),p=i(975703),h=i(113759),m=i(785893);class g extends a.PureComponent{constructor(...e){var t,i,n;super(...e),t="startAudiblePlayTime",i=this.props.muted?null:new Date,(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidUpdate(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}componentWillUnmount(){let{musicRecordingId:e,muted:t,pinId:i,video:n}=this.props;if(e&&!t&&this.startAudiblePlayTime&&Date.now()-this.startAudiblePlayTime.getTime()>=2e3){let{hlsv3:t,mp4:a}=(0,u.Z)({vEXP3:n.video_list?.V_EXP3,vEXP4:n.video_list?.V_EXP4,vEXP5:n.video_list?.V_EXP5,vEXP6:n.video_list?.V_EXP6,vEXP7:n.video_list?.V_EXP7,v720P:n.video_list?.V_720P,vHLSV3MOBILE:n.video_list?.V_HLSV3_MOBILE})||{},l=(a||t)?.duration||0;this.props.logContextEvent({event_type:8999,object_id_str:e,aux_data:{pin_id:i,story_pin_music_duration:l}})}}render(){let{activePageIndex:e,aspectRatio:t,blockHeight:i,blockWidth:n,closeupBodyWidth:a,closeupStoryPinViewability:o,closeupWithinMasonryEnabled:s,customEndCard:d,isPlaying:c,muted:p,onEnded:h,onUpdateVideoInfo:g,pageIndex:f,pin:y,pinId:_,maxHeight:x,video:v,videoThumbnailStartTime:b}=this.props,{hlsv3:S,mp4:P}=(0,u.Z)({vEXP3:v.video_list?.V_EXP3,vEXP4:v.video_list?.V_EXP4,vEXP5:v.video_list?.V_EXP5,vEXP6:v.video_list?.V_EXP6,vEXP7:v.video_list?.V_EXP7,v720P:v.video_list?.V_720P,vHLSV3MOBILE:v.video_list?.V_HLSV3_MOBILE})??{},w=P||S;if(!w)return null;let{height:k,thumbnail:C,width:j}=w,I=t??(j??1)/(k??1),E={height:"100%",left:"0",top:"0",width:"100%"},A=s&&a?(a??n)/(Number(x)??i):n/i;if(!s&&Math.abs(A-I)>.01){if(A<I){let e=100*I/A;E.width=`${e}%`,E.left=`-${(e-100)/2}%`}else if(A>I){let e=100*A/I;E.height=`${e}%`,E.top=`-${(e-100)/2}%`}}let T="number"==typeof e&&f<=e+3;return(0,m.jsx)(l.xu,{height:"100%",overflow:"hidden",position:"relative",width:"100%",children:(0,m.jsx)(l.xu,{height:"100%",position:"absolute",width:"100%",children:T||c||b?(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:E},position:"absolute",children:(0,m.jsx)(r.Z,{aspectRatio:s?A:t,autoplay:c,closeupStoryPinViewability:o,contextLogData:{component:0===f?227:228,element:10957,objectId:_,story_pin_page_id:f,view:3,viewParameter:157},customEndCard:d,customThumbnail:C,isPromoted:!1,loop:!1,muted:p,objectFit:P?s?"contain":"cover":void 0,onEnded:()=>{h&&h(f)},onTimeChange:({time:e})=>{g&&"number"==typeof w.duration&&w.duration>0&&g({currentTime:e,duration:w.duration/1e3})},pinId:_,pinKey:null===y?null:{type:"Legacy",data:y},preferMp4:!!P,showControls:"hover",variant:"storyPin",video:{id:v.id,hlsv3:S,mp4:P},videoThumbnailStartTime:b})}):C&&(0,m.jsx)(l.Ee,{alt:this.props.i18n.bt("Video cover image", "Video cover image", "closeup.storyPin.videoCover", undefined, true),fit:"cover",naturalHeight:k??1,naturalWidth:j??1,src:C})})})}}function f(e){(0,a.useEffect)(()=>{(0,n.Z)("StoryPinVideo","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinVideo.tsx")},[]);let{logContextEvent:t}=(0,d.u)(),{pin:i}=e,l=(0,c.Z)(),{closeupWithinMasonryEnabled:r}=(0,h.x4)(),{closeupBodyWidth:u}=(0,p.K)(),{maxHeight:f}=(0,o.Re)(),{maxHeight:y}=(0,s.Z)({pinKey:null===i?null:{type:"Legacy",data:i}});return(0,m.jsx)(g,{...e,closeupBodyWidth:u,closeupWithinMasonryEnabled:r,i18n:l,logContextEvent:t,maxHeight:r?y:f})}},962336:function(e,t,i){i.d(t,{Z:()=>J});var n,a,l=i(686659),o=i(667294);i(167912);var s=i(399353),r=i(912685),d=i(519371),c=i(312048),u=i(354553),p=i(230201),h=i(661376),m=i(785893);let g=({block:{block_style:{height:e=0,width:t=0,x_coord:i=0,y_coord:n=0,rotation:a=0}={},original_comment_id:r},horizontalOffset:g=0,pageAspectRatio:f,scaleFactor:y,verticalOffset:_=0})=>{(0,o.useEffect)(()=>{(0,l.Z)("IdeaPinCommentReplyStickerBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/IdeaPinCommentReplyStickerBlock.tsx")},[]);let{logContextEvent:x}=(0,p.u)(),v=d._B/f,b=t*d._B*y/100,S=i*d._B*y/100+g,P=(0,c.s0)(),{data:w}=(0,h.Z)({name:"AggregatedCommentResource",options:{commentId:r,field_set_key:"comment_reply_sticker"}});return(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{left:S,top:n*v*y/100+_,transform:`rotate(${a}deg)`}},display:"flex",height:e*v*y/100,margin:-1,padding:1,position:"absolute",rounding:200,width:b,zIndex:u.B_,children:(0,m.jsx)(s.iP,{onTap:()=>{x({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:r}}),w?.pin_id&&P(`/pin/${w.pin_id}/comments/${r||""}`)},rounding:"pill"})})};var f=i(835531),y=i(631796);function _({src:e,fallbackSrc:t,...i}){(0,o.useEffect)(()=>{(0,l.Z)("ImageWithFallback","/app/common/react/components/auth-desktop-web-closeup/StoryPin/renderer/ImageWithFallback.tsx")},[]);let n=(0,y.Z)(e);return(0,m.jsx)(f.Z,{...i,src:n?e:t})}var x=i(581722);function v({isUseCache:e,signature:t}){return(0,x.v9)(({pinbuilder:i})=>{let{storyPinItemBlocks:n}=i;if(!e)return null;for(let e of Object.keys(n))if(n[e].media?.signatureEdited===t||n[e].media?.signature===t)return n[e];return null})}var b=i(331128),S=i(611649),P=i(465784),w=i(24246),k=i(107889);let C=({aggregatedCommentId:e,onDismiss:t})=>{(0,o.useEffect)(()=>{(0,l.Z)("StoryPinQuestionStickerReplyModal","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinQuestionStickerReplyModal.tsx")},[]);let i=(0,w.Z)(),n=(0,S.Z)(),a=(0,b.Z)(),[r,d]=(0,o.useState)(""),c=(0,m.jsx)(s.kC,{justifyContent:"end",children:(0,m.jsx)(s.zx,{color:"primary",disabled:!r,onClick:()=>{(async()=>{await a({fromUnifiedComment:!0,objectType:k.o.aggregatedComment,objectId:e,tags:"[]",text:r})})(),t()},text:i.bt("Post", "Post", "ideapin.questionsticker.replymodal.postbutton", undefined, true)})});return(0,m.jsx)(P.ZP,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:c,heading:i.bt("Reply", "Reply", "ideapin.questionsticker.replymodal", undefined, true),onDismiss:t,children:(0,m.jsx)(s.xu,{paddingX:8,paddingY:1,children:(0,m.jsx)(s.Kx,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:({value:e})=>{d(e)},placeholder:n?i.bt("Your reply will appear as a public comment on this Pin.", "Your reply will show up as a public comment on this Pin.", "pin.questionsticker.replymodal.placeholder", undefined, true):i.bt("Your reply will appear as a public comment on this Idea Pin.", "Your reply will show up as a public comment on this Idea Pin.", "ideapin.questionsticker.replymodal.placeholder", undefined, true),value:r})})})};var j=i(319226),I=i(935059),E=i(183e3),A=i(216975),T=i(176783),L=i(281979);let F=(void 0!==n||(n=i(511849)).hash&&"15c2890e144324504002cdfbce76ffd8"!==n.hash&&console.error("The definition of 'StoryPinStickerBlockCloseup_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function Z({block:e,elementType:t,horizontalOffset:i=0,onFlyoutOpen:n,pageAspectRatio:a,pageIndex:r,pinKey:g,scaleFactor:f,tooltipElementType:y,verticalOffset:_=0,videoPinProgress:x}){(0,o.useEffect)(()=>{(0,l.Z)("StoryPinStickerBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinStickerBlock.tsx")},[]);let{logContextEvent:v}=(0,p.u)(),[b,S]=(0,o.useState)(!1),[P,k]=(0,o.useState)(!1),Z=(0,o.useRef)(null),V=(0,c.s0)(),M=(0,w.Z)(),z=(0,E.Z)(F,g),R=(0,I.Z)(),{block_style:{height:O=0,width:B=0,x_coord:D=0,y_coord:H=0,rotation:K=0}={},end_time:W,error_message:$,interactive_sticker_type:N=null,is_removed:U,is_valid:G,start_time:X,sticker_data:q,type:Y}=e,J=z?.entityId,{board_id:Q,question_comment_id:ee}=q||{},{image_small_url:et,full_name:ei,username:en=""}=e.user??{},ea=null,el=G&&5===N&&!!Q,eo=G&&7===N&&!!ee,es=(0,h.Z)(Q&&el?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:Q}}:null),{is_collaborative:er,pin_count:ed,url:ec}=es.data||{};Y===T.h8.PRODUCT_STICKER?ea=J?`/pin/${J}/`:"/":Y===T.h8.MENTION_STICKER?ea=`/${en}/`:el&&(ea=es.isLoaded?`${ec}`:null);let eu=d._B/a,ep=B*d._B*f/100,eh=D*d._B*f/100+i,{currentTime:em}=x||{},eg=!(0,L.Z)({currentTime:em,endTime:W,startTime:X}),ef=()=>{v({event_type:123,component:228,element:y,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),S(!1)};(0,o.useEffect)(()=>(document.addEventListener("scroll",()=>{S(!1)}),()=>document.removeEventListener("scroll",()=>{S(!1)})),[]);let ey=()=>{let e=null,t=R.isAuth?R?.avatar_color_index:void 0;switch(Y){case T.h8.PRODUCT_STICKER:let{gridTitle:i,images_236x:n,richSummary:a,description:l}=z||{},{displayName:r,products:d}=a||{},c=((d||[])[0]||{}).offerSummary||{},{price:u,maxPrice:p}=c||{},h=!!c&&(!!u||!!p),g=r||i||l;e=(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)(s.xu,{flex:"none",children:(0,m.jsx)(s.zd,{height:40,rounding:3,wash:!0,width:40,children:n?.url&&(0,m.jsx)(s.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:n.url})})}),(0,m.jsx)(s.xu,{flex:"grow",paddingX:2,children:h?(0,m.jsxs)(s.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,m.jsx)(s.xe,{color:"default",lineClamp:1,size:"100",weight:"bold",children:u}),(0,m.jsx)(s.xe,{lineClamp:1,size:"100",children:g})]}):(0,m.jsx)(s.xe,{lineClamp:1,size:"100",children:g})}),(0,m.jsx)(s.xu,{flex:"none",children:(0,m.jsx)(s.Sj,{bgColor:"transparent",icon:"chevron-right",iconColor:"darkGray",size:"xs"})})]});break;case T.h8.MENTION_STICKER:e=(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)(s.xu,{flex:"none",children:(0,m.jsx)(j.qE,{color:t,name:ei??"",size:"sm",src:et??void 0})}),(0,m.jsx)(s.xu,{flex:"grow",paddingX:2,children:(0,m.jsx)(s.xe,{lineClamp:1,size:"200",weight:"bold",children:ei})}),(0,m.jsx)(s.xu,{flex:"none",children:(0,m.jsx)(s.Sj,{bgColor:"transparent",icon:"chevron-right",iconColor:"darkGray",size:"xs"})})]});break;case T.h8.GENERIC_STICKER:e=null!==N&&[5].includes(N)?G?es.isLoaded?(0,m.jsxs)(o.Fragment,{children:[(0,m.jsxs)(s.xu,{flex:"grow",paddingX:2,children:[(0,m.jsx)(s.xe,{lineClamp:1,size:"100",weight:"bold",children:er?M.bt("Explore this group board", "Explore this group board", "closeup.StoryPin.stickerBlock.boardSticker.clickLabel", undefined, true):M.bt("Explore this board", "Explore this board", "closeup.StoryPin.stickerBlock.boardSticker.clickLabel", undefined, true)}),(0,m.jsx)(s.xe,{size:"100",children:(!!ed||0===ed)&&(0,A.nk)(M.nbt(["{{ pinCount }} Pin", "{{ pinCount }} Pins"], ed, "closeup.StoryPin.stickerBlock.boardSticker.boardLabel", true),{pinCount:ed})})]}),(0,m.jsx)(s.xu,{flex:"none",children:(0,m.jsx)(s.Sj,{bgColor:"transparent",icon:"chevron-right",iconColor:"darkGray",size:"xs"})})]}):(0,m.jsxs)(s.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,m.jsx)(s.xu,{marginEnd:1,paddingX:2,children:(0,m.jsx)(s.xe,{color:"subtle",lineClamp:1,size:"100",children:M.bt("Loading board...", "Loading board...", "closeup.StoryPin.stickerBlock.boardSticker.loadingText", undefined, true)})}),(0,m.jsx)(s.xH,{accessibilityLabel:M.bt("Board is loading", "Board is loading", "closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText", undefined, true),show:!0,size:"sm"})]}):(0,m.jsx)(s.xu,{paddingX:2,paddingY:2,children:(0,m.jsx)(s.xe,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:$})}):(0,m.jsx)(s.xu,{paddingX:2,paddingY:2,children:(0,m.jsx)(s.xe,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:M.bt("Sticker not supported yet", "Sticker not supported yet", "closeup.StoryPin.stickerBlock.genericStickerError", undefined, true)})});break;case T.h8.VTO_MAKEUP_STICKER:e=(0,m.jsx)(s.xe,{size:"300",weight:"bold",children:M.bt("Try this sticker on your phone!", "Try this sticker on your phone!", "closeup.storyPin.vtoMakeupSticker", undefined, true)})}return(0,m.jsx)(s.xu,{alignItems:"center","data-test-id":Y,display:"flex",justifyContent:"center",padding:Y===T.h8.PRODUCT_STICKER?1:3,width:"100%",children:U?(0,m.jsx)(s.xe,{color:"subtle",size:"200",weight:"bold",children:M.bt("Tag removed.", "Tag removed!", "closeup.storyPin.stickerBlock", undefined, true)}):e})};return(0,m.jsx)(o.Fragment,{children:eg?null:(0,m.jsxs)(s.xu,{ref:Z,dangerouslySetInlineStyle:{__style:{left:eh,top:H*eu*f/100+_,transform:`rotate(${K}deg)`}},"data-test-id":(Y||"")+"_container",display:"flex",height:O*eu*f/100+2*d.Xw,margin:-1,padding:1,position:"absolute",rounding:200,width:ep+2*d.Xw,zIndex:u.B_,children:[(0,m.jsx)(s.iP,{disabled:eg,onTap:b?ef:({event:e})=>{eg||(v({event_type:101,component:228,element:t,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),eo?k(!0):(({event:e})=>{v({event_type:120,component:228,element:y,view_type:3,view_parameter:157,aux_data:{error_message:!G&&$?$:null,story_pin_page_id:r}}),S(!0),n&&(e.stopPropagation(),n())})({event:e}))},rounding:"pill"}),b&&(0,m.jsx)(s.mh,{zIndex:u.ej,children:(0,m.jsx)(s.J2,{_deprecatedShowCaret:!0,anchor:Z.current,idealDirection:"up",onDismiss:ef,positionRelativeToAnchor:!1,size:U?"flexible":"sm",children:U?ey():(0,m.jsx)(s.iP,{fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),U||(v({event_type:101,component:228,element:y,object_id_str:J,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),ea?V(ea):ef())},children:ey()})})}),!!ee&&P&&(0,m.jsx)(C,{aggregatedCommentId:ee,onDismiss:()=>{k(!1)}})]})})}var V=i(450228),M=i(542392),z=i(279394),R=i(590940);function O({block:e,fontsLoaded:t,horizontalOffset:i=0,pageAspectRatio:n,scaleFactor:a,thumbnail:r,verticalOffset:d=0}){(0,o.useEffect)(()=>{(0,l.Z)("StoryPinTextBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinTextBlock.tsx")},[]);let{block_style:c,style:u=T.Cc,text:p}=e,{alignment:h,font:g,font_size:f,highlight_color:y,vertical_alignment:_=T.Cc.vertical_alignment}=u,{hex_color:x=T.Cc.hex_color}=u??{},[v,b]=(0,o.useState)(0),[S,P]=(0,o.useState)([]),w=g||T.Cc.font,{name:k,default_size:C,letter_spacing:j,line_height:I}=w,E=(0,R.Z)(w),A=Math.round(100*(c?.width||100))/1e4,L=Math.round(100*(c?.height||100))/1e4,F=Math.round(100*(c?.x_coord||0))/1e4,Z=Math.round(100*(c?.y_coord||0))/1e4;(0,o.useEffect)(()=>{if(t){let e=(0,z.KV)({text:p,boxHeight:M.q8/n*L,boxWidth:M.q8*A,font:E,startFontSize:Math.floor(f||C||24)});P(e.lines),b(e.fontSize)}},[t,p]);let O=v*a,B=y?(0,T.pE)(O,I):{x:0,y:0},D=A*M.q8*a+2*B.x,H=L*(M.q8/n)*a+2*B.y,K=i+F*M.q8*a-B.x,W=r?`${100*Z}%`:d+Z*(M.q8/n)*a-B.y;return(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{left:K,top:W}},display:"flex",height:H,position:"absolute",width:D,children:(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:(0,V.RK)({alignment:h,verticalAlignment:_})},children:(0,m.jsx)(s.xu,{display:"inlineBlock",maxWidth:"100%",children:(0,m.jsx)("p",{style:(0,V.BN)({fontSize:O,hexColor:x,letterSpacing:j,lineHeight:I,name:k}),children:S.map((e,t)=>(0,m.jsx)("span",{"data-gestalt-valid-html":"Text",style:(0,V.xm)({fontSize:O,hasText:e.text.length>0,highlightColor:y||null,lineHeight:I}),children:t===S.length-1?e.text:(0,m.jsxs)(o.Fragment,{children:[e.text," ",(0,m.jsx)("br",{})]})},`paragraphLine-${t}-${(p??"").substr(0,9)}`))})})})})}var B=i(605497);function D({ownerId:e}){(0,o.useEffect)(()=>{(0,l.Z)("StoryPinVideoPlaceholder","/app/common/react/components/auth-desktop-web-closeup/StoryPin/StoryPinVideoPlaceholder.tsx")},[]);let t=(0,w.Z)(),i=(0,I.Z)(),n=i.isAuth&&i.id===e;return(0,m.jsxs)(s.xu,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,m.jsx)(s.xe,{color:"inverse",children:n?t.bt("Your video is being processed.", "Your video is processing!", "closeup.storyPin.videoPlaceholder", undefined, true):t.bt("This video is still being processed.", "This video is still processing!", "closeup.storyPin.videoPlaceholder", undefined, true)}),(0,m.jsx)(s.xe,{color:"inverse",children:t.bt("Please check back in a few minutes.", "Check back in a few minutes.", "closeup.storyPin.videoPlaceholder", undefined, true)})]})}var H=i(654805),K=i(166988),W=i(852796),$=i(23641),N=i(398542),U=i(113759),G=i(884541);function X({block:e,isActive:t,pwtTrackImageLoad:i,thumbnail:n}){let a,l=(0,w.Z)(),{closeupWithinMasonryEnabled:o,isCloseupMediaViewerOpen:c,peekCloseupEnabled:u,showProductDetailPage:p}=(0,U.x4)(),h=(0,K.Z)({showProductDetailPage:p}),{borderStyle:g}=n||h?{}:(0,N.Z)({closeupWithinMasonryEnabled:o}),y=e.image?.images?.["750x"]||e.image?.images?.["474x"],{height:x=1,width:b=1}=y||{},S=v({isUseCache:!0,signature:e.image_signature}),{peekRedesignFastFollowsEnabled:P}=(0,H.Z)(y);return y||S?(a=n?"cover":o||P?"none":"contain",(0,m.jsx)(s.xu,{alignItems:u?"center":void 0,dangerouslySetInlineStyle:{__style:{...g,aspectRatio:o?(0,r.GJ)(b,x):void 0,contain:"strict",display:u?"grid":"block",justifySelf:o?"center":void 0}},height:o?"100%":"inherit",overflow:"hidden",width:o?void 0:"inherit",children:S?(0,m.jsx)(_,{_enableViewTransitions:!0,alt:l.bt("Story Pin image", "Story pin image", "closeup.storypin.renderer", undefined, true),color:d.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fallbackSrc:S.media?.src??"",fit:a,isActive:t,naturalHeight:x,naturalWidth:b,onLoad:i,src:y?.url??"",suppressViewTransitionTags:c}):(0,m.jsx)(f.Z,{_enableViewTransitions:!0,alt:l.bt("Story Pin image", "Story pin image", "closeup.storypin.renderer", undefined, true),borderStyle:g,color:d.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fetchPriority:o?"high":void 0,fit:a,isActive:t,naturalHeight:y?.height??1,naturalWidth:y?.width??1,onLoad:i,src:y?.url??"",suppressViewTransitionTags:c})})):null}function q({activePageIndex:e,block:t,closeupStoryPinViewability:i,customEndCard:n,isActive:a,isSplitLayout:l=!1,musicRecordingId:o,muted:r,onEnded:c,onUpdateVideoInfo:u,ownerId:p,pageAspectRatio:h,pageDimensions:g,pageIndex:f,pin:y,pinId:_,scaleFactor:x,stillLoading:b,videoThumbnailStartTime:S,thumbnail:P=!1}){let{block_style:{height:w=100,width:k=100,x_coord:C=0,y_coord:j=0}={},video:I}=t,{closeupWithinMasonryEnabled:E}=(0,U.x4)(),A=d._B/h,{height:T,width:L}=g,F=k*d._B*x/100,Z=k<100?Math.min(Math.max(100,k)-Math.abs(C),k):Math.min(Math.max(k-Math.abs(C),0),100),V=w<100?Math.min(Math.max(100,w)-Math.abs(j),w):Math.min(Math.max(w-Math.abs(j),0),100),M=E?"100%":V*A*x/100,z=E?"100%":Z*d._B*x/100,R=Math.max(j,0)*A*x/100,O=Math.max(C,0)*d._B*x/100,H=v({isUseCache:!I,signature:t.video_signature});if(b)return null;let{media:K}=H||{},{duration:W,src:$}=K||{},N=!!$&&!!W;return I||N?!!(I?.video_list?.V_HLSV3_MOBILE||I?.video_list?.V_720P||N)&&(0,m.jsx)(s.xu,{height:l?"50%":"100%",overflow:"hidden",position:"relative",children:(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{alignSelf:"anchor-center",left:O,top:R}},"data-test-id":"story-pin-video-block",height:P?T:M,overflow:"hidden",position:"absolute",width:P?L:z,children:(0,m.jsx)(B.Z,{activePageIndex:e,aspectRatio:h,blockHeight:P?T:w*A*x/100,blockWidth:P?L:F,closeupStoryPinViewability:i,customEndCard:n,isPlaying:a,musicRecordingId:o,muted:r,onEnded:c,onUpdateVideoInfo:u,pageIndex:f,pin:y,pinId:_,video:I||{video_list:{V_EXP7:{duration:W?1e3*W:0,url:$}}},videoThumbnailStartTime:S})})}):(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{left:O,top:R}},height:M,position:"absolute",width:z,children:(0,m.jsx)(D,{ownerId:p})})}let Y=(void 0!==a||(a=i(77947)).hash&&"8bb1bb1f7bafeed0fe43bed44ef12d2a"!==a.hash&&console.error("The definition of 'StoryPinBlock_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function J({activePageIndex:e,block:t,closeupStoryPinViewability:i,customEndCard:n,disableProductStickers:a,fontsLoaded:r,horizontalOffset:c,isActive:u,isSplitLayout:p=!1,musicRecordingId:h,muteVideos:f,onEnded:y,onFlyoutOpen:_,onUpdateVideoInfo:x,ownerId:v,pageAspectRatio:b,pageHeight:S,pageIndex:P,pageWidth:w,pin:k,pinId:C,previewOnly:j,pinKey:I,stillLoading:A=!1,thumbnail:L=!1,transform:F,verticalOffset:V,videoPinProgress:M,videoThumbnailStartTime:z}){(0,o.useEffect)(()=>{(0,l.Z)("StoryPinBlock","/app/common/react/components/auth-desktop-web-closeup/StoryPin/renderer/StoryPinBlock.tsx")},[]);let R=(0,E.Z)(Y,I),{closeupWithinMasonryEnabled:B}=(0,U.x4)(),{block_style:{height:D=100,width:H=100,x_coord:K=0,y_coord:N=0}={},interactive_sticker_type:J=null}=t,Q=(0,W.g)();if(0===D||0===H)return null;let ee=w/d._B;switch(t.type){case T.h8.PARAGRAPH:case T.h8.HEADING:return(0,m.jsx)(O,{block:t,fontsLoaded:r,horizontalOffset:c,pageAspectRatio:b,scaleFactor:ee,thumbnail:L,verticalOffset:V});case T.h8.VIDEO:return(0,m.jsx)(q,{activePageIndex:e,block:t,closeupStoryPinViewability:i,customEndCard:n,isActive:u,isSplitLayout:p,musicRecordingId:h,muted:f,onEnded:y,onUpdateVideoInfo:x,ownerId:v,pageAspectRatio:b,pageDimensions:{height:S,width:w},pageIndex:P,pin:k,pinId:C,scaleFactor:ee,stillLoading:A,thumbnail:L,videoThumbnailStartTime:z});case T.h8.IMAGE:let{scaleX:et=1,scaleY:ei=1}=F||{};return(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{display:B?"grid":"block",height:`${D}%`,left:`${K*et}%`,top:`${N*ei}%`,width:`${H}%`}},"data-test-id":"story-pin-image-block",overflow:"hidden",position:"absolute",children:(0,m.jsx)(X,{block:t,isActive:u,pwtTrackImageLoad:()=>{Q&&u&&(Q.addBinaryAnnotation("pin.id",C,"STRING"),Q.addBinaryAnnotation("video",!1,"BOOL"),Q.stop()),u&&((0,$.rt)("pin.id",C,"STRING"),(0,$.rt)("video",!1,"BOOL"),(0,$.Nx)(G.pM),(0,$.l7)(G._z))},thumbnail:L})});case T.h8.MENTION_STICKER:return!j&&(0,m.jsx)(Z,{block:{...t},elementType:12120,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:b,pageIndex:P,pinKey:null,scaleFactor:ee,tooltipElementType:12121,verticalOffset:V,videoPinProgress:M});case T.h8.GENERIC_STICKER:return!j&&(e=>{let t=5===J;return(0,m.jsx)(Z,{block:{...e},elementType:t?12827:12858,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:b,pageIndex:P,pinKey:null,scaleFactor:ee,tooltipElementType:t?12828:12859,verticalOffset:V,videoPinProgress:M})})(t);case T.h8.PRODUCT_STICKER:return!j&&!a&&(0,m.jsx)(Z,{block:{...t},elementType:12223,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:b,pageIndex:P,pinKey:R,scaleFactor:ee,tooltipElementType:12224,verticalOffset:V,videoPinProgress:M});case T.h8.VTO_MAKEUP_STICKER:return!j&&(0,m.jsx)(Z,{block:{...t},elementType:12561,horizontalOffset:c,onFlyoutOpen:_,pageAspectRatio:b,pageIndex:P,pinKey:null,scaleFactor:ee,tooltipElementType:12561,verticalOffset:V,videoPinProgress:M});case T.h8.COMMENT_REPLY_STICKER:return t.type===T.h8.COMMENT_REPLY_STICKER&&!j&&(0,m.jsx)(g,{block:t,horizontalOffset:c,pageAspectRatio:b,scaleFactor:ee,verticalOffset:V});default:return null}}},970766:function(e,t,i){i.d(t,{Z:()=>n});let n=({carouselData:e,domain:t})=>{let i="",n=t||"";if(e){let{carouselSlots:t=[]}=e,a=e.index??0;t&&t[a]&&(i=t[a].link||"",n=t[a].domain||n)}return{carouselLink:i,currentDomain:n}}},398504:function(e,t,i){i.d(t,{Z:()=>h});var n,a=i(667294);i(422578);var l=i(970766),o=i(166988),s=i(183e3),r=i(173922),d=i(605203),c=i(986523),u=i(113759);let p=(void 0!==n||(n=i(82852)).hash&&"b2a27d44d1f3dbd42301b82866212272"!==n.hash&&console.error("The definition of 'useCalculateMaxWidthAndHeightForSideBySideVariant_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function h({pinKey:e}){let{closeupWithinMasonryEnabled:t}=(0,u.x4)(),i=(0,c.Z)(),n=(0,s.Z)(p,e),h=(0,o.Z)({showProductDetailPage:!!n?.isEligibleForPdp}),{group:m}=(0,r.Z)(),g=(0,a.useMemo)(()=>n?.carouselData?{carouselSlots:n.carouselData.carouselSlots?.map(e=>({domain:e.domain,link:e.link}))||[],index:n.carouselData.index}:void 0,[n?.carouselData]),{currentDomain:f}=(0,a.useMemo)(()=>(0,l.Z)({carouselData:g,domain:n?.domain}),[g,n?.domain]),y=(0,a.useMemo)(()=>f?f.split(".")[0]:"",[f]),_=(0,a.useMemo)(()=>{let e=n?.trackedLink||n?.link||"";return(0,d.Z)(e)??e},[n?.trackedLink,n?.link]),x=(0,a.useMemo)(()=>{let e=n?.richMetadata?.products?.[0],t=e?.offerSummary,i=!!(t?.price||t?.standardPrice),a=n?.linkDomain?.officialUser?.firstName;return{hasPrice:i,domainOwner:!!n?.closeupAttribution?.firstName||!!a,merchantName:n?.linkUserWebsite?.officialUser?.firstName||a||""}},[n?.richMetadata?.products,n?.linkDomain?.officialUser?.firstName,n?.closeupAttribution?.firstName,n?.linkUserWebsite?.officialUser?.firstName]),v=(0,a.useMemo)(()=>!!((x.merchantName||y)&&_),[x.merchantName,y,_]),b=(0,a.useMemo)(()=>{let e,t=0,i=0;return e=84+(n?.isEligibleForPdp&&x.hasPrice?18:0),t+=(n?.closeupUnifiedTitle||n?.gridTitle?23:0)+("enabled_idea_pin"!==m&&x.domainOwner?40:0),i+=64*!!v,e+=Math.max(t,i)},[n?.isEligibleForPdp,x.hasPrice,n?.closeupUnifiedTitle,n?.gridTitle,m,x.domainOwner,v]);if(!t)return{maxHeight:void 0};if(i)return{maxHeight:h?void 0:`calc(round(100vh, 1px) - 80px - ${b}px)`};let S=Math.round(window.innerHeight)-80-b;return{maxHeight:h?void 0:S}}},654805:function(e,t,i){i.d(t,{Z:()=>s});var n=i(891101),a=i(501010),l=i(774838),o=i(739405);function s(e){let{isAuthenticated:t}=(0,l.B)(),i=(0,o.HG)(),{checkExperiment:s}=(0,a.Z)(),r=t&&i&&s("closeup_dweb_peek_redesign_fast_follow").anyEnabled,d=s("closeup_dweb_peek_redesign_fast_follow").group,c=t&&i&&s("closeup_dweb_side_by_side_redesign_fast_follow").anyEnabled,u=c?s("closeup_dweb_side_by_side_redesign_fast_follow").group:"";return{peekRedesignFastFollowsExpGroup:d,peekRedesignFastFollowsEnabled:r&&(0,n.Z)(d,e),sideBySideRedesignFastFollowsExpGroup:u,sideBySideRedesignFastFollowsEnabled:c,sideBySideFullWidthCTAEnabled:"enabled_full_width_cta"===u||"employees"===u,sideBySidePWTDeferActionBarLoad:"enabled_pwt_defer_action_bar_load"===u}}},166988:function(e,t,i){i.d(t,{Z:()=>o});var n=i(501010),a=i(774838),l=i(739405);let o=({showProductDetailPage:e,skipActivation:t})=>{let{checkExperiment:i}=(0,n.Z)(),o=(0,l.HG)(),{isAuthenticated:s}=(0,a.B)();return!!s&&!!o&&!!e&&i("closeup_dweb_blended_ui",{dangerouslySkipActivation:t}).anyEnabled}},53347:function(e,t,i){i.r(t),i.d(t,{default:()=>K});var n=i(686659),a=i(667294),l=i(303151),o=i(399353),s=i(420970),r=i(874132),d=i(4533),c=i(24246),u=i(59111),p=i(34550),h=i(893957),m=i(986523),g=i(632492),f=i(785893);function y({containerRef:e,onAnimationEnd:t,startAnimating:i,containerWidth:n}){let l=(0,c.Z)(),s=(0,m.Z)(),r=(0,p.M0)(),[h,y]=(0,a.useState)(),[_,x]=(0,a.useState)(!1),[v,b]=(0,a.useState)(),S=l.bt("Share", "Share", "secondarySendButtonAnimation.share", undefined, true);return(0,a.useEffect)(()=>{if(!s&&n)if(i){x(!0);let{animationSeenCount:e}=r.getItem(d.$M)||{animationSeenCount:0};r.setItem(d.$M,{animationSeenCount:e+1,lastAnimationTimestamp:Date.now()}),y("buttonSlideOut 1s ease-in forwards"),b("textFadeIn 1s ease-in forwards")}else y("buttonSlideIn .3s ease-in forwards"),b("textFadeOut .3s ease-in-out forwards")},[n,r,i,s]),(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(u.Z,{unsafeCSS:`
@keyframes buttonSlideOut {
  0% {
    width: 48px;
  }
  15% {
    width: ${n}px;
  }
  100% {
    width: ${n}px;
  }
}

@keyframes textFadeIn {
  0% {
    opacity: 0;
  }
  15% {
    opacity: 0;
  }
  25% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
}

@keyframes buttonSlideIn {
  0% {
    width: ${n}px;
  }
  100% {
    width: 48px;
  }
}

@keyframes textFadeOut {
  0% {
    opacity: 1;
  }
  15% {
    opacity: 1;
  }
  25% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}
`}),(0,f.jsx)(o.xu,{ref:e,alignItems:"center",dangerouslySetInlineStyle:{__style:{animation:h,backgroundColor:"var(--comp-button-color-background-secondary-default)",visibility:_?"visible":"hidden"}},display:"flex",onAnimationEnd:e=>{"buttonSlideIn"===e.animationName&&t()},position:"absolute",rounding:400,zIndex:g.mS,children:(0,f.jsxs)(o.kC,{alignItems:"center",gap:1,children:[(0,f.jsx)(o.xu,{padding:3,children:(0,f.jsx)(o.JO,{accessibilityLabel:S,color:"default",icon:"share",size:24})}),(0,f.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{animation:v}},marginEnd:3,children:(0,f.jsx)(o.mg,{size:"300",children:S})})]})})]})}function _({onAnimationEnd:e}){(0,a.useEffect)(()=>{(0,n.Z)("SecondarySendButtonAnimation","/app/common/react/components/social/SecondarySendButtonAnimation.tsx")},[]);let t=(0,a.useRef)(null),[i,l]=(0,a.useState)(0),[o,s]=(0,a.useState)(!1);return(0,h.Z)(()=>{let e=setTimeout(()=>{s(!0);let e=setTimeout(()=>{s(!1)},3e3);return()=>clearTimeout(e)},r.S+1e3);return()=>clearTimeout(e)}),(0,a.useEffect)(()=>{if(t.current&&!i&&o){let e=t.current.getBoundingClientRect().width;e&&l(e)}},[t,i,o]),(0,f.jsx)(y,{containerRef:t,containerWidth:i,onAnimationEnd:e,startAnimating:o})}var x=i(843061),v=i(166833),b=i(571710),S=i(284365),P=i(757781),w=i(900565),k=i(824504),C=i(935059);let j=new Set(["JP","TW","TH"]),I={10:w.Z,6:b.Z,5:x.Z,8:v.Z,20:S.Z,22:P.Z,9:k.Z};function E(){let e=(0,C.Z)();return[...e.isAuth&&j.has(e.country)?[8]:[],10,6,5].slice(0,3)}function A(){try{let e=Number(p.ZP.getItem(d.zz)),t=[];e&&I[e]&&t.push(e);let i=new Set(t),n=E().filter(e=>!i.has(e));return t.push(...n.slice(0,3-t.length)),t.slice(0,3)}catch(e){return E()}}function T({onAnimationEnd:e,startAnimating:t,fadeOut:i}){let n=(0,m.Z)(),l=(0,a.useMemo)(()=>A(),[]),[s,r]=(0,a.useState)("idle"),[c,h]=(0,a.useState)(""),[y,_]=(0,a.useState)(["","",""]);return((0,a.useEffect)(()=>{if(!t||n)return;let e=p.ZP.getItem(d.$M)||{};p.ZP.setItem(d.$M,{...e,lastAnimationTimestamp:Date.now()}),r("expanding"),h("expandingContainerAnimation 300ms ease-in-out forwards")},[t,n]),t&&"idle"!==s&&"complete"!==s)?(0,f.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!i,transition:i?"opacity 100ms ease-in-out":"none"}},position:"absolute",zIndex:g.mS,children:[(0,f.jsx)(u.Z,{unsafeCSS:`
@keyframes expandingContainerAnimation {
  0% {
    opacity: 0;
    width: 0;
  }
  100% {
    opacity: 1;
    width: 140px;
  }
}

@keyframes expandingContainerContract {
  0% {
    opacity: 1;
    width: 140px;
  }
  100% {
    opacity: 0;
    width: 0;
  }
}

@keyframes expandingAppSlideIn {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0px);
  }
}

@keyframes expandingAppSlideOut {
  0% {
    opacity: 1;
    transform: translateY(0px);
  }
  100% {
    opacity: 0;
    transform: translateY(10px);
  }
}

@keyframes expandingAppSlideOutLast {
  0% {
    opacity: 1;
    transform: translateY(0px);
  }
  100% {
    opacity: 0;
    transform: translateY(10px);
  }
}
`}),(0,f.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{animation:c,backgroundColor:"var(--sema-color-background-subtle)"}},display:"flex",height:48,justifyContent:"center",onAnimationEnd:t=>{let{animationName:i}=t;"expandingContainerAnimation"===i&&"expanding"===s?(r("appSlideIn"),_(l.map((e,t)=>`expandingAppSlideIn 300ms ease-in-out ${100*t}ms forwards, ${0===t?"expandingAppSlideOutLast":"expandingAppSlideOut"} 300ms ease-in-out ${2700-100*t}ms forwards`))):"expandingAppSlideOutLast"===i?(r("contracting"),h("expandingContainerContract 300ms ease-in-out forwards")):"expandingContainerContract"===i&&(r("complete"),e())},paddingX:2,paddingY:1.5,position:"absolute",rounding:300,width:48,children:(0,f.jsx)(o.kC,{alignItems:"center",direction:"row",gap:2,justifyContent:"center",children:l.map((e,t)=>{let i=I[e];return i?(0,f.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{animation:y[t]}},opacity:0,children:(0,f.jsx)(i,{size:36})},e):null})})})]}):null}function L({onAnimationEnd:e,fadeOut:t}){(0,a.useEffect)(()=>{(0,n.Z)("SecondarySendButtonExpandingAnimation","/app/common/react/components/social/SecondarySendButtonExpandingAnimation.tsx")},[]);let[i,l]=(0,a.useState)(!1);return(0,h.Z)(()=>{let e=setTimeout(()=>{l(!0);let e=setTimeout(()=>{l(!1)},4500);return()=>clearTimeout(e)},5e3);return()=>clearTimeout(e)}),(0,f.jsx)(T,{fadeOut:t,onAnimationEnd:e,startAnimating:i})}function F({onAnimationEnd:e,startAnimating:t,fadeOut:i}){let n=(0,c.Z)(),l=(0,m.Z)(),s=(0,a.useMemo)(()=>A(),[]),[r,h]=(0,a.useState)("idle"),[y,_]=(0,a.useState)(0),[x,v]=(0,a.useState)(""),[b,S]=(0,a.useState)(""),P=n.bt("Share", "Share", "secondarySendButtonFlashingAnimation.share", undefined, true);if((0,a.useEffect)(()=>{if(!t||l)return;let e=p.ZP.getItem(d.$M)||{};p.ZP.setItem(d.$M,{...e,lastAnimationTimestamp:Date.now()}),h("iconShrink"),v("shareIconShrinkOut 200ms ease-in-out forwards")},[t,l]),!t||"idle"===r||"complete"===r)return null;let w=s[y],k=w?I[w]:null;return(0,f.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!i,transition:i?"opacity 100ms ease-in-out":"none"}},position:"absolute",zIndex:g.mS,children:[(0,f.jsx)(u.Z,{unsafeCSS:`
@keyframes shareIconShrinkOut {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

@keyframes appIconAnimateIn {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  100% {
    transform: scale(1.2);
    opacity: 1;
  }
}

@keyframes appIconShrink {
  0% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes appIconAnimateOut {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

@keyframes shareIconReturnLarge {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  100% {
    transform: scale(1.33);
    opacity: 1;
  }
}

@keyframes shareIconReturnFinal {
  0% {
    transform: scale(1.33);
  }
  100% {
    transform: scale(1);
  }
}
`}),(0,f.jsxs)(o.xu,{alignItems:"center",color:"default",display:"flex",height:48,justifyContent:"center",onAnimationEnd:t=>{let{animationName:i}=t;"shareIconShrinkOut"===i?(h("appAnimations"),_(0),S("appIconAnimateIn 300ms ease-in-out forwards")):"appIconAnimateIn"===i?S("appIconShrink 300ms ease-in-out forwards"):"appIconShrink"===i?S("appIconAnimateOut 300ms ease-in-out forwards"):"appIconAnimateOut"===i?y<2?(_(y+1),S("appIconAnimateIn 300ms ease-in-out forwards")):(h("iconReturn"),v("shareIconReturnLarge 200ms ease-in-out forwards")):"shareIconReturnLarge"===i?v("shareIconReturnFinal 200ms ease-in-out forwards"):"shareIconReturnFinal"===i&&(h("complete"),e())},position:"absolute",rounding:300,width:48,children:[("iconShrink"===r||"iconReturn"===r)&&(0,f.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{animation:x}},children:(0,f.jsx)(o.JO,{accessibilityLabel:P,color:"default",icon:"share",size:24})}),"appAnimations"===r&&k&&(0,f.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},display:"flex",justifyContent:"center",position:"absolute",children:(0,f.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{animation:b}},display:"flex",justifyContent:"center",position:"absolute",children:(0,f.jsx)(k,{size:36})})})]})]})}function Z({onAnimationEnd:e,fadeOut:t}){(0,a.useEffect)(()=>{(0,n.Z)("SecondarySendButtonFlashingAnimation","/app/common/react/components/social/SecondarySendButtonFlashingAnimation.tsx")},[]);let[i,l]=(0,a.useState)(!1);return(0,h.Z)(()=>{let e=setTimeout(()=>{l(!0);let e=setTimeout(()=>{l(!1)},5e3);return()=>clearTimeout(e)},5e3);return()=>clearTimeout(e)}),(0,f.jsx)(F,{fadeOut:t,onAnimationEnd:e,startAnimating:i})}var V=i(15881),M=i(290216),z=i(501010),R=i(418282),O=i(957591),B=i(38181),D=i(510755),H=i(500499);function K({anchorRef:e,controllerOptions:t,experienceAnchor:i=3017,iconColor:r,iconOnly:u,buttonText:m,onMouseEnter:g,onMouseLeave:y,shouldHideTooltip:x=!1,showSendAnimation:v=!1,tabIndex:b=0,closeupWithinMasonryEnabled:S=!1,isInCloseupMediaViewer:P=!1}){(0,a.useEffect)(()=>{(0,n.Z)("SecondarySendButton","/app/common/react/components/social/SecondarySendButton.tsx")},[]);let w=(0,c.Z)(),k=(0,a.useId)(),C=(0,p.M0)(),j=(0,R.Nl)(),{checkExperiment:I}=(0,z.Z)(),{setIsShowingShareButton:E}=(0,O.f)(),A=(0,a.useRef)(null),T=e??A,[F,K]=(0,a.useState)(v),[W,$]=(0,a.useState)(0),[N,U]=(0,a.useState)(!1),G=new o.H3(P?[B.k]:[D.NW]),[X]=(0,a.useState)(()=>{let e=j.getItem(V.bl)||0,{animationSeenCount:t}=C.getItem(d.$M)||{animationSeenCount:0};return t<2&&(2===e||3===e)}),q=()=>{K(!1)},Y=e=>{U(!0);let t=C.getItem(d.$M)||{};C.setItem(d.$M,{...t,lastAnimationTimestamp:Date.now()}),setTimeout(()=>{K(!1),U(!1)},100),e()};(0,h.Z)(()=>{let{lastAnimationTimestamp:e}=C.getItem(d.$M)||{lastAnimationTimestamp:0};$(e),(0,l.Z)(new Date(e),new Date)||C.setItem(d.$M,{animationSeenCount:0,lastAnimationTimestamp:e})}),(0,a.useEffect)(()=>(E(v),()=>{E(!1)}),[E,v]);let J=(0,a.useMemo)(()=>P&&u?"washLight":S?"default":void 0,[P,u,S]);return(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(H.Z,{popoverId:k,...t,children:({handleSendShareFlyoutButtonClick:e})=>{let i=(0,f.jsxs)(a.Fragment,{children:[(e=>{if(!F)return null;let t=I("ce_dweb_animate_share_icon");if(t.group?.startsWith("enabled")){let i=0;if(t.group.endsWith("_1d")?i=1:t.group.endsWith("_3d")?i=3:t.group.endsWith("_7d")&&(i=7),i>0&&W&&Math.floor((Date.now()-W)/864e5)<i)return null;if(t.group.includes("flashing"))return(0,f.jsx)(o.xu,{"data-test-id":"closeup-share-button",children:(0,f.jsx)(o.iP,{onTap:()=>Y(e),children:(0,f.jsx)(Z,{fadeOut:N,onAnimationEnd:q})})});if(t.group.includes("expanding"))return(0,f.jsx)(o.xu,{"data-test-id":"closeup-share-button",children:(0,f.jsx)(o.iP,{onTap:()=>Y(e),children:(0,f.jsx)(L,{fadeOut:N,onAnimationEnd:q})})})}return X&&I("sg_dweb_improved_share_animation_on_closeup").anyEnabled?(0,f.jsx)(o.xu,{"data-test-id":"closeup-share-button",children:(0,f.jsx)(o.iP,{onTap:()=>Y(e),children:(0,f.jsx)(_,{onAnimationEnd:q})})}):null})(e),P&&!u?(0,f.jsx)(o.zx,{ref:T,accessibilityControls:t.isFlyoutOpen?k:void 0,accessibilityExpanded:t.isFlyoutOpen,accessibilityHaspopup:!0,accessibilityLabel:w.bt("Share", "Share", "Closeup.SharePin.AccessibilityLabel", undefined, true),color:"tertiarySemiTransparent",iconEnd:"share",onClick:()=>Y(e),size:"lg",tabIndex:b,text:(0,f.jsx)(o.xe,{weight:"bold",children:w.bt("Share", "Share", "Closeup.SharePin.Button", undefined, true)})}):(0,f.jsx)(s.Z,{ref:T,accessibilityControls:t.isFlyoutOpen?k:void 0,accessibilityExpanded:t.isFlyoutOpen,accessibilityHaspopup:!0,accessibilityLabel:w.bt("Send", "Send", "Accessible label for button to send this pin", undefined, true),bgColor:J,buttonText:m,handleClick:()=>Y(e),icon:"share",iconColor:r,iconOnly:u,isActive:t.isFlyoutOpen,onMouseEnter:g,onMouseLeave:y,size:P&&u?"lg":void 0,tabIndex:b,testId:"closeup-share-button"})]});return x?i:(0,f.jsx)(o.u,{inline:!0,text:w.bt("Share", "Share", "Closeup.SharePin.Icon", undefined, true),zIndex:G,children:i})}}),(0,f.jsx)(M.N,{anchors:{[i]:T.current},idealDirection:"down",onAnchorHover:3025===i?"complete":void 0,onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})]})}},403972:function(e,t,i){i.d(t,{Z:()=>G});var n,a,l=i(686659),o=i(667294);i(422578);var s=i(399353),r=i(519371),d=i(398504),c=i(489325),u=i(53347),p=i(230201),h=i(943152),m=i(183e3),g=i(24246),f=i(113759),y=i(767415),_=i(785893);function x(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let v={__style:{backgroundColor:"#000"}},b=(void 0!==n||(n=i(479548)).hash&&"c4a51cbc26011483ff5552ff99019cdc"!==n.hash&&console.error("The definition of 'AuthDesktopWebCloseupVideoEndCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class S extends o.PureComponent{constructor(...e){super(...e),x(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.props.onRestartVideo?.({event:e}),(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),x(this,"handleShareVideo",()=>{let{clientTrackingParams:e,onToggleFlyout:t,isFlyoutOpen:i,pinId:n,requireAuth:a,logContextEvent:l}=this.props;if(i&&(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),l({event_type:101,component:179,object_id_str:n,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e}),a)return void a();t&&t()}),x(this,"handleExternalSend",()=>{(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),x(this,"renderReplayButton",()=>(0,_.jsx)(s.iP,{accessibilityLabel:this.props.i18n.bt("Watch again", "Watch again", "Button when pressed restarts the video", undefined, true),onTap:this.handleRestartVideo,rounding:200,children:(0,_.jsxs)(s.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,_.jsx)(s.xu,{marginEnd:3,children:(0,_.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Watch again", "Watch again", "Button when pressed restarts the video", undefined, true),color:"inverse",icon:"arrow-clockwise",size:18})}),(0,_.jsx)(s.xv,{color:"light",overflow:"normal",size:"400",weight:"bold",children:this.props.i18n.bt("Watch again", "Watch again", "Clickable label when pressed restarts the video", undefined, true)})]})})),x(this,"renderShareButton",()=>{let{clientTrackingParams:e,gridDescription:t,imageSrc:i,isFlyoutOpen:n,onFlyoutDismiss:a,pinId:l}=this.props;return(0,_.jsx)(s.iP,{accessibilityLabel:this.props.i18n.bt("Send", "Send", "end.video.send.icon.label", undefined, true),onTap:this.handleShareVideo,rounding:200,children:(0,_.jsxs)(s.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,_.jsx)(u.default,{controllerOptions:{flyoutDisplayOptions:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,onExternalSend:this.handleExternalSend,viewType:3},isFlyoutOpen:n,onFlyoutDismiss:a,onToggleFlyout:()=>{},sendObject:{type:"pin",description:t,id:l,imageUrl:i,url:`/pin/${l}/`,clientTrackingParams:e}},iconColor:"inverse",iconOnly:!0,tabIndex:-1}),(0,_.jsx)(s.xu,{children:(0,_.jsx)(s.xv,{color:"light",overflow:"normal",size:"400",weight:"bold",children:this.props.i18n.bt("Send", "Send", "end.video.send.icon.label", undefined, true)})})]})})})}componentDidMount(){let{clientTrackingParams:e,pinId:t,logContextEvent:i}=this.props;(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),i({event_type:13,component:179,object_id_str:t,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e})}render(){let{backgroundImage:e,naturalHeight:t,naturalWidth:i,maxHeight:n,maxWidth:a,pinTitle:l}=this.props;return(0,_.jsx)(s.xu,{maxHeight:n,maxWidth:a,children:(0,_.jsxs)(s.Ee,{alt:l||"",naturalHeight:t,naturalWidth:i,src:e,children:[(0,_.jsx)(s.xu,{bottom:!0,dangerouslySetInlineStyle:v,left:!0,position:"absolute",right:!0,top:!0}),(0,_.jsx)(s.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,maxHeight:n,maxWidth:a,position:"absolute",top:!0,width:"100%",children:(0,_.jsxs)(s.xu,{position:"absolute",children:[(0,_.jsx)(s.xu,{children:this.renderShareButton()}),(0,_.jsx)(s.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}function P(e){let t;(0,o.useEffect)(()=>{(0,l.Z)("AuthDesktopWebCloseupVideoEndCard","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideoEndCard.tsx")},[]);let{pinKey:i,variant:n}=e,a=(0,m.Z)(b,i),{logContextEvent:s}=(0,p.u)(),c=(0,g.Z)(),u=(0,h.Z)(),{closeupWithinMasonryEnabled:y,peekCloseupEnabled:x,viewportSize:v}=(0,f.x4)(),{maxHeight:P,fiftyPercentHeight:w,fiftyPercentWidth:k}=(0,r.Re)(),{maxHeight:C}=(0,d.Z)({pinKey:a});return x?t="sm"===v?w:P:y&&(t=C),(0,_.jsx)(S,{...e,closeupWithinMasonryEnabled:y,i18n:c,logContextEvent:s,maxHeight:"media-viewer"===n?"inherit":t,maxWidth:"media-viewer"===n?"inherit":k,requireAuth:u})}let w=({backgroundImage:e,onRestartVideo:t,pinTitle:i})=>{(0,o.useEffect)(()=>{(0,l.Z)("AuthDesktopWebCloseupVideoEndCard","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideoEndCard.tsx")},[]);let n=(0,g.Z)();return(0,_.jsx)(s.xu,{"data-test-id":"video-end-card",height:"100%",width:"100%",children:(0,_.jsxs)(s.Ee,{alt:i||"",fit:"contain",naturalHeight:1,naturalWidth:1,src:e,children:[(0,_.jsx)(s.xu,{bottom:!0,dangerouslySetInlineStyle:v,left:!0,opacity:80,position:"absolute",right:!0,top:!0}),(0,_.jsx)(s.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,_.jsx)(s.xu,{children:(0,_.jsx)(s.iP,{onTap:t,rounding:200,children:(0,_.jsxs)(s.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,_.jsx)(s.hU,{accessibilityLabel:n.bt("Replay", "Replay", "closeupVideo.endCard.ReplayButton", undefined, true),icon:"arrow-clockwise",iconColor:"inverse",size:"md"}),(0,_.jsx)(s.qd,{color:"light",overflow:"normal",size:"400",children:n.bt("Replay", "Replay", "closeupVideo.endCard.ReplayButton", undefined, true)})]})})})})]})})};var k=i(343669),C=i(852796),j=i(296264),I=i(484243),E=i(774254),A=i(23641),T=i(479901),L=i(774838),F=i(410706),Z=i(151383),V=i(176783),M=i(967515),z=i(629724),R=i(739405),O=i(764682),B=i(74972),D=i(884541),H=i(317083),K=i(959703);function W(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let $=(void 0!==a||(a=i(174635)).hash&&"7562478d60c54219d833414c881b75b3"!==a.hash&&console.error("The definition of 'AuthDesktopWebCloseupVideoNonDuplo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),N=(e,t)=>{t({currentTime:e?.currentTime??0,duration:e?.duration??1})};class U extends o.Component{constructor(...e){super(...e),W(this,"state",{controls:"always"===this.props.showControls&&!this.props.disabled,fullscreen:!1,playing:!(0,k.G6)(this.props.requestContext.userAgent.browserName)&&!!this.props.autoplay&&!this.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:this.props.muted||this.props.shouldMute?0:1,videoStartTime:this.props.videoStartTime||0}),W(this,"setVideoPwtLoadingStop",(e=!1)=>{if(!j.Z)return;let{storyPinStepStopwatch:t,pinId:i}=this.props;t&&(e||t.addAnnotation("video.startup.end"),t.addBinaryAnnotation("pin.id",i,"STRING"),t.addBinaryAnnotation("video",!0,"BOOL"),t.addBinaryAnnotation("preload",e,"BOOL"),t.addSubspan({name:"perceived_video_load",endTime:j.Z.now()}),t.stop()),e||(0,I.Z)("video.startup.end"),(0,E.Z)("perceived_video_load"),(0,A.Nx)(D._z),(0,A.rt)("pin.id",i,"STRING"),(0,A.rt)("video",!0,"BOOL"),"STORY_PIN_CLOSEUP"===(0,T.Ly)()&&(0,A.l7)(D.pM)}),W(this,"componentDidMount",()=>{let{customThumbnail:e,video:t,preferMp4:i}=this.props,{mp4:n}=t,a=t.hlsv3||t.hls||null,{thumbnail:l}=i&&n||a||{},o=(0,H.j4)(e||l);o?.ready===4&&(this.setState({ready:!0}),this.props.autoplay&&this.setVideoPwtLoadingStop(!0)),document.addEventListener("fullscreenchange",this.onFullscreenChange),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange),document.addEventListener("mozfullscreenchange",this.onFullscreenChange),document.addEventListener("MSFullscreenChange",this.onFullscreenChange)}),W(this,"componentWillUnmount",()=>{document.removeEventListener("fullscreenchange",this.onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange)}),W(this,"onFullscreenChange",()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||this.props.setPanelOpen(e=>!e)}),W(this,"componentDidUpdate",(e,t)=>{this.props.videoStartTime&&this.props.videoStartTime!==e.videoStartTime&&this.setState({videoStartTime:this.props.videoStartTime}),!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:"never"!==this.props.showControls}),e.isPlaying&&!1===this.props.isPlaying&&this.setState({playing:!1}),e.autoplay!==this.props.autoplay&&(this.setState({playing:!!this.props.autoplay}),this.props.autoplay&&this.state.ready&&this.setVideoPwtLoadingStop(!0)),e.muted!==this.props.muted&&this.setState({volume:+!this.props.muted}),"never"===this.props.showControls&&t.controls&&this.setState({controls:!1}),(t.controls||t.playing)&&this.props.disabled&&this.setState({playing:!1,controls:!1}),!t.playing&&this.state.playing&&this.props.onPlay&&this.props.onPlay(),this.props.isCloseupMediaViewerOpen&&!e.isCloseupMediaViewerOpen&&this.setState({playing:!1})}),W(this,"handleTouch",()=>{let{seeking:e}=this.state,{disabled:t}=this.props;e||t||this.setState(e=>({playing:!e.playing}))}),W(this,"handleShowControls",()=>this.setState({controls:!0})),W(this,"handleHideControls",()=>this.setState({controls:!1})),W(this,"handleReady",()=>{let{ready:e,playing:t}=this.state,{autoplay:i,disabled:n}=this.props;i&&!e&&this.setVideoPwtLoadingStop(),this.setState({ready:!0}),(0,k.G6)(this.props.requestContext.userAgent.browserName)&&!t&&i&&!n&&this.setState({playing:!0})}),W(this,"handleEnded",({event:e})=>{let{customThumbnail:t,customEndCard:i,pinId:n,setCurrentVideo:a,loop:l,onEnded:o}=this.props;e.stopPropagation(),!l&&(this.setState({playing:!1}),t&&t.endsWith(".gif")||i||(this.setState({showEndCard:!0,videoStartTime:0}),a({pinId:n,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()),o&&o(),this.props.setPanelOpen(!0)}),W(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),W(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),W(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})}),W(this,"handlePlayheadDown",()=>{this.setState({seeking:!0})}),W(this,"handlePlayheadUp",()=>{setTimeout(()=>{this.setState({seeking:!1})},500)}),W(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),W(this,"handleShareRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),W(this,"handleVolumeChange",({event:e,volume:t})=>{let{shouldMute:i}=this.props;e.stopPropagation(),i||this.setState({volume:t})}),W(this,"exitFullscreen",()=>{let{document:e}=window;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),W(this,"requestFullscreen",()=>{let{customThumbnail:e,video:t,preferMp4:i}=this.props,{mp4:n}=t,a=t.hlsv3||t.hls||null,{thumbnail:l}=i&&n||a||{},o=(0,H.j4)(e||l);o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen&&o.msRequestFullscreen()}),W(this,"renderCloseupVideoEndCard",(e,t,i,n)=>{let a={backgroundImage:e,naturalHeight:t,naturalWidth:i,onRestartVideo:this.handleShareRestartVideo},l={backgroundImage:e,naturalHeight:t,naturalWidth:i,onRestartVideo:this.handleRestartVideo},{clientTrackingParams:o,flyoutShareProps:s}=this.props,r={clientTrackingParams:o,gridDescription:s?s.gridDescription:"",imageSrc:s?s.imageSrc:"",isFlyoutOpen:!!s&&s.isFlyoutOpen,onFlyoutDismiss:s?s.onFlyoutDismiss:()=>{},onToggleFlyout:s?s.onToggleFlyout:()=>{},pinId:s?s.pinId:"",pinKey:this.props.pin,variant:this.props.variant};return n?(0,_.jsx)(w,{...l}):(0,_.jsx)(P,{...r,...a})})}render(){let{aspectRatio:e,autoplay:t,closeupStoryPinViewability:i,contextLogData:n={component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156},customThumbnail:a,isPromoted:l,loop:o,objectFit:d,preferMp4:u,preload:p,requestContext:h,showControls:m,variant:g,video:f,captions:y,isDesktop:x,videoThumbnailStartTime:v,pin:b,setProgressInfo:S,progressInfo:P,setPanelOpen:w,panelOpen:C,setMute:j,isMuted:I,closeupWithinMasonryEnabled:E,maxHeight:A,maxWidth:T,onTimeChange:L,seekTime:M,roundingOverride:z}=this.props;n.is_closeup_video=!0;let{controls:R,fullscreen:B,playing:D,showEndCard:W,volume:$,videoStartTime:U}=this.state,G=f.hlsv3||f.hls||null;if(!G&&!f.mp4)return null;let{mp4:X}=f,q=u&&X&&X.url||G&&[{type:"video/m3u8",src:G.url}]||void 0,{height:Y,thumbnail:J,width:Q}=u&&X||G||{},ee=a||J,et=()=>{w&&w(!C),C&&x&&this.requestFullscreen()},ei=()=>{this.setState({volume:+!!I}),j(!I)},en=()=>{this.setState({playing:!0})},ea=()=>{this.setState({playing:!1})},el=()=>{this.setState({playing:!D})};return(0,_.jsxs)(s.zd,{height:E||"media-viewer"===g?"inherit":void 0,rounding:z,wash:!E&&"media-viewer"!==g||void 0,width:E||"media-viewer"===g?"inherit":void 0,willChangeTransform:!((0,k.G6)(h.userAgent.browserName)&&B),children:[W?this.renderCloseupVideoEndCard(ee??"",Y??1,Q??1,l):(0,_.jsxs)(s.iP,{accessibilityLabel:this.props.i18n.bt("Pause or play video", "Pause or play video", "pin.closeup.video.tap", undefined, true),fullHeight:E||"media-viewer"===g,onMouseEnter:"hover"===m?this.handleShowControls:void 0,onMouseLeave:"hover"===m?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:200,children:[(0,_.jsx)(F.Z,{playing:D,zIndexValue:99}),(0,_.jsx)(c.Z,{id:"VideoWithContextLogging",children:(0,_.jsx)(K.ZP,{aspectRatio:e??(Q??1)/(Y??1),backgroundColor:E?"black":r.yc,captions:y,closeupStoryPinViewability:i,contextLogData:{...n,video_id:this.props.video.id},hlsConfig:{startLevel:H.VS},isAutoPlay:!!t,loop:o,objectFit:d,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"===g?L:({time:e})=>{N&&"number"==typeof X?.duration&&X.duration>0&&S&&N({currentTime:e,duration:X.duration/O.gJ},S)},onVolumeChange:this.handleVolumeChange,pin:b,pinKey:b,playing:D,poster:ee,preferMp4:u,preload:p,seekTime:M,src:q,variant:g,video:u&&X||G||{},videoStartTime:U||v,volume:$})})]}),(0,_.jsx)(s.xu,{onMouseEnter:"hover"===m?this.handleShowControls:void 0,onMouseLeave:"hover"===m?this.handleHideControls:void 0,children:"storyPin"!==g&&(0,_.jsx)(s.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...R?{...H.Ul}:{},flexDirection:"column-reverse"}},display:"flex",height:H.hy,maxHeight:A,maxWidth:T,paddingX:6,position:"absolute",width:"100%",zIndex:V.Gf,children:(0,_.jsx)(c.Z,{id:"IdeaPinVideoScrubber",children:(0,_.jsx)(Z.Z,{activePageIndex:0,captionsUrl:y,handleMute:ei,handlePanelChange:et,handlePause:ea,handlePausePlay:el,handlePlay:en,handleWatchAgain:this.handleRestartVideo,inMilliseconds:!1,isMuted:I,isPanelOpen:C,isPlaying:D,isStoryPin:!1,pinKey:b,progressInfo:P,showEndCard:W,showVideoControls:R,viewParameter:156})})})})]})}componentDidMount(){(0,l.Z)("AuthDesktopWebCloseupVideo","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideo.tsx")}}function G(e){(0,o.useEffect)(()=>{(0,l.Z)("AuthDesktopWebCloseupVideo","/app/common/react/components/video/closeup/AuthDesktopWebCloseupVideo.tsx")},[]);let{pinKey:t,pinId:i,isPromoted:n,video:a,muted:s,variant:u}=e,p=(0,m.Z)($,t),h=(0,g.Z)(),y=(0,L.B)(),x=(0,C.g)(),{seekTimes:v}=(0,M.Hx)(),{clientTrackingParams:b,closeupWithinMasonryEnabled:S,isCloseupMediaViewerOpen:P}=(0,f.x4)(),{maxWidth:w}=(0,r.Re)(),{appUI:k,setCurrentVideo:j}=(0,B.G)(),{videosAutoplaying:I}=k,{organicVideosAutoplaying:E,promotedVideosAutoplaying:A}=I,T=y.locale.toLowerCase(),F=(a.mp4?.captions_urls||a.hlsv3?.captions_urls)??{},Z=T&&F[T]||Object.values(F)[0]||"",V=(0,R.HG)(),O=n?A[i]:E[i],D=parseInt((0,z.Z)().t||0,10),[H,K]=(0,o.useState)(O?.currentTime||0),[W,N]=(0,o.useState)(null),[G,X]=(0,o.useState)(!0),[q,Y]=(0,o.useState)(s),{maxHeight:J}=(0,d.Z)({pinKey:p});(0,o.useEffect)(()=>{let e=H;D>0&&(e=D),v[i]&&(e=v[i]),K(e)},[v,i,D,H]);let Q=(0,o.useMemo)(()=>("default"!==u||!P)&&(!O||!O.paused),[u,O,P]);return(0,_.jsx)(c.Z,{id:"CloseupVideoInner",children:(0,_.jsx)(U,{...e,captions:String(Z)||"",clientTrackingParams:b,closeupWithinMasonryEnabled:S,i18n:h,isCloseupMediaViewerOpen:P,isDesktop:V,isMuted:q,isPanelOpen:G,isPlaying:Q,maxHeight:J,maxWidth:"media-viewer"===u?void 0:w,panelOpen:G,pin:p,progressInfo:W,requestContext:y,seekTime:v[i],setCurrentVideo:j,setMute:Y,setPanelOpen:X,setProgressInfo:N,storyPinStepStopwatch:x,variant:u,videoStartTime:H})})}W(U,"defaultProps",{loop:!1,showControls:"hover"})},200301:function(e,t,i){i.d(t,{Z:()=>n});function n(e){return e?[e["736x"],e["564x"],e["474x"],e["236x"]].find(e=>e?.url)??null:null}},295472:function(e,t,i){i.d(t,{Z:()=>o});var n=i(537347),a=i.n(n),l=i(767415);function o(e){if("undefined"==typeof window||!document.head)return(0,l.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));let{head:t}=document,i=[];return e.forEach(e=>{e.styles.forEach(n=>{let l=document.querySelector(`#${e.fontFamily??""}-${n.name}`);l||((l=document.createElement("style")).setAttribute("id",`${e.fontFamily??""}-${n.name}`),t.appendChild(l),e.format&&n.fontUrl&&l&&l.sheet&&l.sheet.insertRule(`
            @font-face {
              font-family: "${e.fontFamily??""}";
              font-style: "${n.fontStyle}";
              font-weight: "${n.fontWeight}";
              src: url("${n.fontUrl}") format("${e.format}");
            }
          `,0),i.push(new(a())(e.fontFamily,{style:n.fontStyle,weight:n.fontWeight}).load()))})}),Promise.all(i).then(()=>{Promise.resolve()}).catch(e=>{(0,l.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},843061:function(e,t,i){i.d(t,{Z:()=>o});var n=i(686659),a=i(667294),l=i(785893);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,n.Z)("Facebook","/app/packages/gestalt-custom-svg/dynamicSVGs/Facebook.tsx")},[]),(0,l.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M56 28C56 12.536 43.464 0 28 0S0 12.536 0 28c0 13.975 10.24 25.56 23.625 27.66V36.094h-7.11V28h7.11v-6.169c0-7.017 4.18-10.893 10.576-10.893 3.064 0 6.268.546 6.268.546v6.891h-3.53c-3.479 0-4.564 2.159-4.564 4.373V28h7.766l-1.242 8.094h-6.524V55.66C45.761 53.56 56 41.975 56 28Z",fill:"#1877F2"}),(0,l.jsx)("path",{d:"M38.9 36.094 40.14 28h-7.765v-5.252c0-2.215 1.085-4.373 4.563-4.373h3.53v-6.89s-3.203-.547-6.267-.547c-6.396 0-10.576 3.876-10.576 10.893V28h-7.11v8.094h7.11V55.66a28.206 28.206 0 0 0 8.75 0V36.094h6.524Z",fill:"#fff"})]}))},166833:function(e,t,i){i.d(t,{Z:()=>o});var n=i(686659),a=i(667294),l=i(785893);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,n.Z)("Line","/app/packages/gestalt-custom-svg/dynamicSVGs/Line.tsx")},[]),(0,l.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M28 56c15.464 0 28-12.536 28-28S43.464 0 28 0 0 12.536 0 28s12.536 28 28 28Z",fill:"#00B900"}),(0,l.jsx)("path",{d:"M46.625 26.32c0-8.335-8.354-15.115-18.625-15.115-10.267 0-18.625 6.78-18.625 15.115 0 7.471 6.627 13.73 15.578 14.91.606.13 1.432.401 1.642.92.187.47.122 1.208.06 1.684l-.265 1.596c-.08.471-.373 1.843 1.615 1.003 1.988-.835 10.724-6.314 14.634-10.812 2.693-2.964 3.986-5.969 3.986-9.3Z",fill:"#fff"}),(0,l.jsx)("path",{d:"M24.215 22.293H22.91c-.201 0-.364.163-.364.364v8.115c0 .2.163.364.364.364h1.306c.2 0 .364-.163.364-.364v-8.12a.363.363 0 0 0-.364-.36ZM33.208 22.293H31.9c-.2 0-.364.163-.364.364v4.82l-3.72-5.02c-.009-.015-.018-.024-.027-.038l-.005-.005-.023-.023c-.005 0-.005-.005-.005-.005-.005-.005-.014-.01-.019-.014l-.009-.01c-.005-.004-.014-.008-.019-.013-.004-.005-.009-.005-.009-.005a.036.036 0 0 0-.019-.01c-.004 0-.009-.004-.009-.004-.005-.004-.014-.004-.019-.01-.004 0-.009-.004-.014-.004l-.023-.01c-.005 0-.01 0-.014-.004-.01 0-.014-.005-.019-.005h-.014c-.004 0-.014 0-.018-.004H26.212c-.2 0-.364.163-.364.364v8.115c0 .2.164.364.364.364h1.307c.2 0 .364-.163.364-.364v-4.82l3.724 5.03a.283.283 0 0 0 .093.089s.005 0 .005.005c.01.004.014.009.023.014.005 0 .005.004.01.004.004.005.01.005.018.01.005.004.01.004.02.009.004 0 .008.005.008.005.01.004.02.004.024.009h.004c.028.01.061.014.094.014h1.306c.201 0 .364-.163.364-.364v-8.125a.37.37 0 0 0-.368-.36ZM21.065 29.097h-3.551v-6.445c0-.2-.164-.364-.364-.364h-1.307c-.2 0-.364.163-.364.364v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306a.358.358 0 0 0-.359-.364ZM40.422 24.323c.201 0 .364-.163.364-.364v-1.307c0-.2-.163-.364-.364-.364h-5.217a.353.353 0 0 0-.252.103l-.005.005c0 .004-.004.004-.004.004a.373.373 0 0 0-.103.252v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55c.201 0 .364-.164.364-.364v-1.307c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55v.005Z",fill:"#00B900"})]}))},571710:function(e,t,i){i.d(t,{Z:()=>o});var n=i(686659),a=i(667294),l=i(785893);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,n.Z)("Messenger","/app/packages/gestalt-custom-svg/dynamicSVGs/Messenger.tsx")},[]),(0,l.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("rect",{fill:"#fff",height:"56",rx:"28",width:"56"}),(0,l.jsx)("rect",{height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4",width:"55",x:".5",y:".5"}),(0,l.jsx)("path",{d:"M28 12c-9.012 0-16 6.604-16 15.52 0 4.664 1.912 8.696 5.024 11.48.26.232.42.56.428.912l.088 2.848c.028.908.964 1.5 1.796 1.132l3.176-1.4c.268-.12.572-.14.856-.064 1.46.4 3.012.616 4.632.616 9.012 0 16-6.604 16-15.52S37.012 12 28 12Z",fill:"url(#paint0_radial_3730_649_messenger)"}),(0,l.jsx)("path",{d:"m18.392 32.06 4.7-7.456a2.401 2.401 0 0 1 3.472-.64l3.74 2.804a.96.96 0 0 0 1.156-.004l5.048-3.832c.672-.512 1.552.296 1.104 1.012l-4.704 7.452a2.401 2.401 0 0 1-3.472.64l-3.74-2.804a.96.96 0 0 0-1.156.004l-5.048 3.832c-.672.512-1.552-.292-1.1-1.008Z",fill:"#fff"}),(0,l.jsx)("defs",{children:(0,l.jsxs)("radialGradient",{cx:"0",cy:"0",gradientTransform:"translate(18.16 43.826) scale(34.8672)",gradientUnits:"userSpaceOnUse",id:"paint0_radial_3730_649_messenger",r:"1",children:[(0,l.jsx)("stop",{stopColor:"#09F"}),(0,l.jsx)("stop",{offset:".61",stopColor:"#A033FF"}),(0,l.jsx)("stop",{offset:".935",stopColor:"#FF5280"}),(0,l.jsx)("stop",{offset:"1",stopColor:"#FF7061"})]})})]}))},284365:function(e,t,i){i.d(t,{Z:()=>o});var n=i(686659),a=i(667294),l=i(785893);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,n.Z)("Telegram","/app/packages/gestalt-custom-svg/dynamicSVGs/Telegram.tsx")},[]),(0,l.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z",fill:"url(#paint0_linear_3_21)"}),(0,l.jsx)("path",{clipRule:"evenodd",d:"M12.6745 27.7045C20.837 24.1482 26.28 21.8037 29.0034 20.6709C36.7793 17.4366 38.3951 16.8748 39.4482 16.8563C39.6799 16.8522 40.1978 16.9096 40.5332 17.1818C40.8165 17.4116 40.8944 17.7221 40.9317 17.9401C40.969 18.158 41.0155 18.6544 40.9786 19.0423C40.5572 23.4698 38.7339 34.2141 37.8063 39.1729C37.4138 41.2712 36.641 41.9747 35.8928 42.0436C34.2667 42.1932 33.032 40.969 31.4571 39.9366C28.9928 38.3212 27.6006 37.3156 25.2085 35.7393C22.444 33.9175 24.2361 32.9162 25.8116 31.2799C26.2239 30.8517 33.3881 24.3352 33.5268 23.7441C33.5441 23.6701 33.5602 23.3946 33.3965 23.249C33.2328 23.1035 32.9911 23.1533 32.8168 23.1929C32.5696 23.249 28.6328 25.8511 21.0062 30.9992C19.8887 31.7665 18.8766 32.1404 17.9697 32.1208C16.97 32.0992 15.0469 31.5555 13.6172 31.0908C11.8637 30.5208 10.4701 30.2195 10.5914 29.2514C10.6547 28.7472 11.349 28.2316 12.6745 27.7045Z",fill:"white",fillRule:"evenodd"}),(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint0_linear_3_21",x1:"2800",x2:"2800",y1:"0",y2:"5558.47",children:[(0,l.jsx)("stop",{stopColor:"#2AABEE"}),(0,l.jsx)("stop",{offset:"1",stopColor:"#229ED9"})]})})]}))},757781:function(e,t,i){i.d(t,{Z:()=>o});var n=i(686659),a=i(667294),l=i(785893);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,n.Z)("Viber","/app/packages/gestalt-custom-svg/dynamicSVGs/Viber.tsx")},[]),(0,l.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("rect",{fill:"#7360F2",height:"56",rx:"28",width:"56"}),(0,l.jsx)("path",{clipRule:"evenodd",d:"M29.362 31.327s.57.05.875-.33l.597-.75c.288-.374.984-.61 1.665-.232.902.509 2.067 1.309 2.866 2.054.44.371.542.918.242 1.495l-.002.012a6.278 6.278 0 0 1-1.243 1.53l-.012.009c-.587.489-1.261.773-1.983.538l-.013-.018c-1.296-.367-4.405-1.952-6.386-3.532-3.242-2.558-5.546-6.776-6.183-9.038l-.02-.013c-.235-.724.052-1.398.539-1.984l.01-.01a6.224 6.224 0 0 1 1.53-1.243l.012-.003c.576-.3 1.122-.198 1.494.243.49.505 1.408 1.721 2.054 2.865.378.68.141 1.377-.231 1.664l-.752.598c-.379.306-.33.876-.33.876s1.113 4.207 5.271 5.269Zm6.543-3.488a.405.405 0 0 1-.406-.403c-.018-2.44-.752-4.384-2.178-5.776-1.43-1.393-3.236-2.108-5.37-2.122a.403.403 0 0 1-.4-.408.403.403 0 0 1 .403-.402h.003c2.35.016 4.344.808 5.93 2.352 1.586 1.55 2.402 3.687 2.422 6.35a.406.406 0 0 1-.401.409h-.003Zm-2.127-.832h-.01a.405.405 0 0 1-.395-.414c.032-1.384-.364-2.503-1.208-3.425-.84-.918-1.993-1.42-3.527-1.532a.406.406 0 0 1-.374-.433.406.406 0 0 1 .433-.375c1.725.127 3.093.73 4.065 1.794.977 1.066 1.456 2.409 1.42 3.989a.406.406 0 0 1-.404.396Zm-2.077-.696a.404.404 0 0 1-.404-.386c-.068-1.373-.716-2.045-2.036-2.117a.404.404 0 1 1 .043-.808c1.744.093 2.712 1.092 2.8 2.886a.403.403 0 0 1-.383.423l-.02.002Zm9.09 4.625c-.808 6.503-5.563 6.913-6.44 7.195-.374.12-3.843.982-8.203.698 0 0-3.251 3.92-4.266 4.94-.158.159-.344.223-.469.194-.175-.043-.223-.251-.22-.553l.027-5.354v-.001c-6.35-1.764-5.98-8.394-5.908-11.864.072-3.47.724-6.315 2.661-8.227 3.48-3.152 10.65-2.681 10.65-2.681 6.054.027 8.955 1.85 9.628 2.46 2.234 1.912 3.371 6.49 2.54 13.193Zm-.87-14.817c-.796-.73-4.01-3.064-11.167-3.096 0 0-8.44-.51-12.554 3.267-2.29 2.29-3.096 5.64-3.181 9.797-.085 4.157-.195 11.944 7.311 14.056l.008.002-.005 3.221s-.047 1.306.812 1.572c1.039.322 1.648-.669 2.641-1.738a88.708 88.708 0 0 0 1.863-2.107c5.135.43 9.082-.556 9.532-.701 1.036-.337 6.902-1.088 7.857-8.876.984-8.03-.477-13.106-3.117-15.397Z",fill:"#fff",fillRule:"evenodd"})]}))},900565:function(e,t,i){i.d(t,{Z:()=>o});var n=i(686659),a=i(667294),l=i(785893);let o=({size:e=56})=>((0,a.useEffect)(()=>{(0,n.Z)("Whatsapp","/app/packages/gestalt-custom-svg/dynamicSVGs/Whatsapp.tsx")},[]),(0,l.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("rect",{fill:"#25D366",height:"56",rx:"28",width:"56"}),(0,l.jsx)("path",{clipRule:"evenodd",d:"M39.206 16.65A15.75 15.75 0 0 0 27.99 12c-8.74 0-15.854 7.113-15.857 15.855a15.821 15.821 0 0 0 2.117 7.927L12 44l8.406-2.205a15.837 15.837 0 0 0 7.577 1.93h.007c8.74 0 15.853-7.114 15.856-15.857a15.76 15.76 0 0 0-4.64-11.218ZM27.99 41.047h-.005c-2.365 0-4.684-.636-6.708-1.837l-.482-.286-4.988 1.309 1.331-4.864-.313-.499a13.146 13.146 0 0 1-2.015-7.014c.003-7.266 5.915-13.178 13.185-13.178a13.09 13.09 0 0 1 9.318 3.865 13.098 13.098 0 0 1 3.856 9.324c-.003 7.267-5.915 13.18-13.179 13.18Zm7.23-9.871c-.397-.199-2.345-1.157-2.708-1.289-.364-.132-.628-.198-.891.198-.264.397-1.024 1.29-1.255 1.554-.231.264-.462.297-.858.099-.396-.199-1.673-.617-3.187-1.966-1.178-1.051-1.973-2.348-2.204-2.745-.231-.397-.024-.611.173-.808.178-.178.397-.463.595-.695.198-.23.264-.396.396-.66.132-.265.066-.496-.033-.695-.098-.198-.89-2.148-1.221-2.941-.322-.773-.649-.668-.892-.68a16.01 16.01 0 0 0-.759-.014c-.264 0-.693.099-1.057.495-.363.397-1.387 1.356-1.387 3.305 0 1.95 1.42 3.835 1.618 4.1.199.264 2.794 4.265 6.769 5.982.945.409 1.683.653 2.259.835.948.302 1.812.26 2.495.157.76-.114 2.344-.958 2.674-1.884.33-.925.33-1.719.23-1.884-.098-.166-.362-.266-.758-.464Z",fill:"#fff",fillRule:"evenodd"})]}))},824504:function(e,t,i){i.d(t,{Z:()=>s});var n=i(686659),a=i(667294),l=i(351736),o=i(785893);let s=({size:e=56})=>{(0,a.useEffect)(()=>{(0,n.Z)("X","/app/packages/gestalt-custom-svg/dynamicSVGs/X.tsx")},[]);let t=(0,l.vs)();return(0,o.jsxs)("svg",{display:"block",fill:"none",height:e,viewBox:"0 0 56 56",width:e,xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{fill:t?"white":"#111111",height:"56",rx:"28",width:"56"}),(0,o.jsx)("path",{d:"M30.3055 25.8561L40.505 14H38.088L29.2318 24.2945L22.1584 14H14L24.6964 29.5671L14 42H16.4171L25.7695 31.1287L33.2396 42H41.3979L30.3049 25.8561H30.3055ZM26.995 29.7042L25.9112 28.1541L17.288 15.8196H21.0005L27.9595 25.7739L29.0433 27.324L38.0892 40.2632H34.3767L26.995 29.7048V29.7042Z",fill:t?"#111111":"white"})]})}},835531:function(e,t,i){i.d(t,{Z:()=>s});var n=i(686659),a=i(667294),l=i(232079),o=i(785893);function s({alt:e,children:t,color:i,elementTiming:s,fetchPriority:r,isActive:d=!1,naturalHeight:c,naturalWidth:u,onLoad:p,src:h,fit:m="none",srcSet:g,...f}){(0,a.useEffect)(()=>{(0,n.Z)("ImageWithPerfTiming","/app/packages/pwt-logger/ImageWithPerfTiming.tsx")},[]);let y=(0,a.useRef)(null),_=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(h!==y.current||d&&d!==_.current){y.current=h??null;let e=document.querySelector(`img[src="${h}"]`)||null;e?.complete&&p()}_.current=d},[h,p,d]),(0,o.jsx)(l.Z,{...f,alt:e,color:i,elementTiming:s,fetchPriority:r,fit:m,naturalHeight:c,naturalWidth:u,onLoad:p,src:h,srcSet:g,children:t})}},852796:function(e,t,i){i.d(t,{T:()=>l,g:()=>o});let{Provider:n,get:a}=(0,i(439947).Z)({name:"story_pin_step",sampleRate:1}),l=n,o=a},410706:function(e,t,i){i.d(t,{Z:()=>c});var n=i(686659),a=i(667294),l=i(399353),o=i(354553),s=i(59111),r=i(176783),d=i(785893);function c({playing:e,zIndexValue:t}){return(0,a.useEffect)(()=>{(0,n.Z)("PausePlayOverlay","/app/packages/story-pin/Closeup/PausePlayOverlay.tsx")},[]),(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(s.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,d.jsx)(l.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:80,position:"absolute",right:!0,rounding:r.yR,top:!0,zIndex:t?new l.Ry(t):o.p8,children:!e&&(0,d.jsx)(l.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},151383:function(e,t,i){i.d(t,{Z:()=>P});var n,a=i(686659),l=i(667294);i(167912);var o=i(399353),s=i(183e3),r=i(24246),d=i(566431),c=i(151464),u=i(176783),p=i(967515),h=i(935833),m=i(736328),g=i(739405),f=i(764682),y=i(281213),_=i(113759),x=i(785893);let v=()=>{},b=({accessibilityLabel:e,dataTestId:t,disable:i,handleTap:n,icon:a})=>(0,x.jsx)(o.xu,{"data-test-id":t,opacity:i?50:void 0,children:(0,x.jsx)(o.iP,{disabled:i,onTap:n,children:(0,x.jsx)(o.JO,{accessibilityLabel:e,color:"light",icon:a,size:16})})}),S=(void 0!==n||(n=i(52203)).hash&&"2f810e287a1c756ac33896e516afe9a2"!==n.hash&&console.error("The definition of 'IdeaPinVideoScrubberDuplo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function P({activePageIndex:e,handlePanelChange:t,handlePlay:i,handlePause:n,handlePausePlay:P,handleMute:w,handleVideoScrubbingNewPage:k,handleWatchAgain:C,inMilliseconds:j,isPlaying:I,isMuted:E,isPanelOpen:A,pinKey:T,progressInfo:L,showEndCard:F,showVideoControls:Z=!1,viewParameter:V,isStoryPin:M=!0,captionsUrl:z=""}){(0,l.useEffect)(()=>{(0,a.Z)("IdeaPinVideoScrubber","/app/packages/story-pin/Closeup/VideoScrubber/IdeaPinVideoScrubber.tsx")},[]);let R=(0,s.Z)(S,T),O=(0,r.Z)(),{currentTime:B}=L||{},{seekTimes:D}=(0,p.Hx)(),{closeupWithinMasonryEnabled:H}=(0,_.x4)(),K=(0,y.H)(),W=(0,g.HG)(),{captionsEnabled:$}=K,N=(0,m.Z)(),U=[5,6,2],G=(R?.storyPinData?.pages??[]).filter(e=>void 0===e.layout||!U.includes(e.layout)),X=0===G.length?1:G.length,q=G[e],Y=q?.shouldMute??!1,J=Object.keys(D).includes(R?.entityId??"")&&D[R?.entityId??""]?D[R?.entityId??""]:B,Q=(0,l.useMemo)(()=>G.map(e=>{let t=e.blocks?.find(e=>"StoryPinVideoBlock"===e.__typename&&3===e.blockType),i=t?.__typename==="StoryPinVideoBlock"&&(t?.videoDataV2?.videoListMobile?.vHLSV3MOBILE?.duration||t?.videoDataV2?.videoList720P?.v720P?.duration);return i?{duration:i,isVideo:!0}:{duration:d.oN,isVideo:!1}}),[G]),ee=[{duration:L?.duration||0,isVideo:!0}],et=M?Q:ee,ei=q?.blocks?.[0],en=ei?.__typename==="StoryPinVideoBlock"&&ei?.videoDataV2?.videoListMobile?.vHLSV3MOBILE?.captionsUrls,ea=!1;(en&&0!==Object.keys(en).length||z)&&(ea=!0);let el=(0,l.useMemo)(()=>et.reduce((e,t)=>e+(t.duration||0),0)/(M?f.gJ:1),[et,M]),eo=(0,l.useMemo)(()=>et.filter((t,i)=>i<e).reduce((e,t)=>e+(t.duration||0),0)/f.gJ,[et,e]),es=et.length>0&&et[e]?.isVideo?B??0:(B??0)*5+(eo??0),er=O.bt("Hide captions", "Hide captions", "gestalt.video.accessibilityHideCaptionsLabel", undefined, true),ed=O.bt("Show captions", "Show captions", "gestalt.video.accessibilityShowCaptionsLabel", undefined, true);return(0,x.jsxs)(o.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,x.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:Z||!I?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,x.jsxs)(o.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,x.jsx)(b,{accessibilityLabel:I?O.bt("Pause", "Pause", "closeup.IdeaPinVideo.Pause", undefined, true):O.bt("Play", "Play", "closeup.IdeaPinVideo.Play", undefined, true),dataTestId:`story-pin-closeup-${I?"pause":"play"}`,handleTap:F&&C?C:P,icon:I?"pause":"play"}),L&&(0,x.jsx)(o.iP,{children:(0,x.jsxs)(o.xu,{"aria-label":`${O.bt("Video duration", "Video duration", "closeup.IdeaPinVideo.durationLabel", undefined, true)}: ${(0,u.Lc)(es)} of ${(0,u.Lc)(el)}`,"data-test-id":"time-display",children:[(0,x.jsx)(o.xe,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,u.Lc)(es)}`})," ",(0,x.jsx)(o.xu,{display:"inlineBlock",opacity:60,children:(0,x.jsx)(o.xe,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,u.Lc)(el)}`})})]})})]}),(0,x.jsxs)(o.kC,{direction:"row",gap:5,children:[ea&&(0,x.jsx)(b,{accessibilityLabel:$?ed:er,dataTestId:`closed-captions-button-${$?"disable":"enable"}`,handleTap:()=>{let e=W?"desktop_pin_page":"mweb_pin_page";$?(0,h.My)(`${e}.closed_captions_button.toggle_off`):(0,h.My)(`${e}.closed_captions_button.toggle_on`),N({action:"click",item:"closed-captions-button"}),K.setCaptionsEnabled(!$)},icon:$?"captions-fill":"captions"}),(0,x.jsx)(b,{accessibilityLabel:E?O.bt("Unmute", "Unmute", "closeup.IdeaPinVideo.unmute", undefined, true):O.bt("Mute", "Mute", "closeup.IdeaPinVideo.mute", undefined, true),dataTestId:`story-pin-closeup-${E?"unmute":"mute"}`,disable:Y,handleTap:w,icon:E?"volume-mute":"volume"}),t&&!H&&(0,x.jsx)(b,{accessibilityLabel:A?O.bt("Maximise", "Maximize", "closeup.IdeaPinVideo.maximize", undefined, true):O.bt("Minimise", "Minimize", "closeup.IdeaPinVideo.minimize", undefined, true),dataTestId:`story-pin-closeup-${A?"maximize":"minimize"}`,handleTap:t||v,icon:A?"maximize":"minimize"})]})]}),(0,x.jsx)(c.ZP,{accessibilityValueNow:es,activePageCurrentTime:J,activePageIndex:e,duration:el,handlePause:n,handlePlay:i,handleVideoScrubbingNewPage:k,inMilliseconds:j,isPlaying:I,pageCount:X,pageDurations:et,pinKey:R,progressInfo:L,shouldShowPlayhead:!0,showEndCard:F,showVideoControls:Z,videoDurations:et,viewParameter:V})]})}},151464:function(e,t,i){i.d(t,{$:()=>x,$E:()=>_,ZP:()=>w});var n,a=i(686659),l=i(667294);i(167912);var o=i(399353),s=i(104999),r=i(183e3),d=i(24246),c=i(566431),u=i(774838),p=i(785893);function h({pillHeight:e,scrubberWidth:t}){return(0,l.useEffect)(()=>{(0,a.Z)("PaginationProgressPill","/app/packages/story-pin/Closeup/VideoScrubber/PaginationProgressPill.tsx")},[]),(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:_}},display:"flex",flex:"grow",height:e,overflow:"hidden",rounding:"pill",children:(0,p.jsx)(o.xu,{color:x,dangerouslySetInlineStyle:{__style:{width:t}},"data-test-id":"video-progress-bar",height:"100%",rounding:"pill"})})}var m=i(176783),g=i(967515),f=i(739405),y=i(764682);let _="rgba(255,255,255,0.24)",x="light",v=()=>{},b=(void 0!==n||(n=i(715652)).hash&&"6a1efce65e0b388d5f09f256d4756b8b"!==n.hash&&console.error("The definition of 'Pagination_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),S=({accessibilityValueMax:e,accessibilityValueNow:t,children:i,setHoveringChange:n,handleMouseDown:a,handleMouseLeave:l,handleTouchStart:s,playhead:r,isPlaying:c,showVideoControls:u})=>{let h=(0,d.Z)(),g=!(0,f.HG)();return(0,p.jsx)(o.xu,{ref:r,alignItems:"center","aria-label":h.bt("Video scrubber progress bar", "Video scrubber progress bar", "ideaPin.closeupvideo.videoScrubberLabel", undefined, true),"aria-valuemax":e,"aria-valuenow":t,"aria-valuetext":(0,m.Lc)(t),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:g?"center":"start",marginBottom:6*!g,minHeight:"8px",onFocus:n(!0),onMouseDown:a,onMouseLeave:l,onMouseOver:n(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:s,opacity:u||!c?100:0,paddingY:6*!!g,position:"relative",role:"progressbar",width:"100%",children:i})},P=({isRTL:e,isSeeking:t,scrubberWidth:i})=>(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:e?{right:i}:{left:i}},"data-test-id":"video-progress-bar-playhead",position:"relative",children:(0,p.jsx)(o.xu,{color:x,height:4,position:"absolute",rounding:"pill",children:(0,p.jsx)(o.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:t?-8:-6}},height:t?16:12,marginStart:-2,rounding:"circle",width:t?16:12})})});function w({accessibilityValueNow:e,activePageIndex:t,activePageCurrentTime:i,pageCount:n,progressInfo:d,showEndCard:m,duration:_=0,pageDurations:w=[],handlePlay:k=v,handlePause:C=v,handleVideoScrubbingNewPage:j=v,inMilliseconds:I,videoDurations:E=[],viewParameter:A,isInactiveStreamPin:T=!1,isPlaying:L=!1,setVideoProgress:F,shouldShowPlayhead:Z=!1,showVideoControls:V=!0,pinKey:M}){(0,l.useEffect)(()=>{(0,a.Z)("Pagination","/app/packages/story-pin/Closeup/VideoScrubber/Pagination.tsx")},[]);let z=(0,r.Z)(b,M),R=!(0,f.HG)(),O=(0,l.useRef)(null),{isRTL:B}=(0,u.B)(),[D,H]=(0,l.useState)(!1),[K,W]=(0,l.useState)(L),[$,N]=(0,l.useState)(),U=(0,s.Z)(),[G,X]=(0,l.useState)(!1),{clearSeekTime:q,updateSeekTime:Y}=(0,g.RC)(),J=(0,l.useCallback)((e,i)=>{if(!T&&i<=n){if(i!==t&&j(i),F){let{isVideo:t}=E[i];F({currentTime:e/1e3,duration:t?d?.duration??1:d?.duration??5,pinId:z?.entityId})}Y(e/1e3,z?.entityId??"")}U({event_type:101,view_type:3,view_parameter:A,component:14302})},[t,j,T,U,n,z,d?.duration,F,Y,E,A]),Q=w.map(e=>`${(e.duration||0)/_/10}%`),ee=(0,l.useMemo)(()=>{let e=0;return w.map(({duration:t})=>{let i=t+e,n={min:e,max:i};return e=i,n})},[w]),et=D?"0 1.2px":"0 1px",ei=e=>()=>H(e),en=(0,l.useCallback)(e=>{if(!O.current)return;let{left:t=0,right:i=0,width:n=0}=O.current.getBoundingClientRect(),a=(B?Math.max(0,Math.min((i-e)/n,1)):Math.max(0,Math.min((e-t)/n,1)))*_*1e3,l=ee.findIndex(e=>a>=e.min&&a<=e.max),o=-1===l?0:l;J(a-ee[o].min,o)},[_,J,ee,B]),ea=(0,l.useCallback)(()=>{G||W(L||m),X(!0)},[G,W,L,m]),el=(0,l.useCallback)(e=>{ea(),L&&C(),en(e.pageX)},[ea,L,C,en]),eo=(0,l.useCallback)(e=>{G&&en(e.pageX)},[en,G]),es=(0,l.useCallback)(e=>{if(G){e.preventDefault();let t=Array.from(e.changedTouches).find(e=>e.identifier===$);t&&en(t.pageX)}},[G,en,$]),er=(0,l.useCallback)(()=>{ei(!1),N(void 0),X(!1),K&&k()},[k,K]),ed=(0,l.useCallback)(e=>{Array.from(e.changedTouches).find(e=>e.identifier===$)&&(ei(!1),N(void 0),X(!1),q()),K&&k()},[q,k,K,$]);return(0,l.useEffect)(()=>(G&&!T&&(window.addEventListener("mousemove",eo),window.addEventListener("mouseup",er),window.addEventListener("touchmove",es),window.addEventListener("touchend",ed)),()=>{window.removeEventListener("mousemove",eo),window.removeEventListener("mouseup",er),window.removeEventListener("touchmove",es),window.removeEventListener("touchend",ed)}),[eo,er,ed,es,T,G,en,K,$]),(0,p.jsx)(S,{accessibilityValueMax:_,accessibilityValueNow:e,handleMouseDown:el,handleMouseLeave:()=>{ei(!1)},handleTouchStart:e=>{ea(),ei(!0);let t=e.changedTouches[0];N(t.identifier),en(t.pageX)},isPlaying:L,playhead:O,setHoveringChange:ei,showVideoControls:V,children:Array(n).fill(void 0).map((e,a)=>{let l=d?.currentTime??0,s=d?.duration??c.P6,r=E[a],u=`${r?.isVideo&&I?Math.floor(1e4*(i??l)/(r.duration/y.gJ))/100:l/s*100}%`;return(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{margin:et}},flex:"grow",width:Q.length===n?Q[a]:"auto",children:(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:a<t||m?(0,p.jsx)(o.xu,{color:x,height:4,rounding:"pill"}):t===a&&d?(0,p.jsxs)(o.kC,{alignItems:"center",flex:"grow",children:[Z&&(V||D||G||R)&&(0,p.jsx)(P,{isRTL:B,isSeeking:G,scrubberWidth:u}),(0,p.jsx)(h,{pillHeight:4,scrubberWidth:u})]}):(0,p.jsx)(o.xu,{color:x,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"})})},`${z?.entityId}-${a}`)})})}},450228:function(e,t,i){i.d(t,{BN:()=>c,RK:()=>d,d3:()=>p,tq:()=>h,xm:()=>u});var n=i(667294),a=i(295472),l=i(176783),o=i(408640),s=i(893957);let r=(e,t)=>{let i=(0,l.pE)(e,t);return`${i.y}px ${i.x}px`},d=({alignment:e,verticalAlignment:t})=>{let i={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===t?i.alignItems="center":2===t&&(i.alignItems="flex-end"),1===e&&(i.justifyContent="center",i.textAlign="center"),i},c=({fontSize:e,hexColor:t,highlightColor:i,letterSpacing:n,lineHeight:a,name:l})=>({fontSize:e,letterSpacing:n,color:t,fontFamily:l,margin:0,maxHeight:"100%",textShadow:!i&&t&&"#ffffff"===t.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word",...i?{backgroundColor:i,borderRadius:e/5,padding:r(e,a)}:{}}),u=({fontSize:e,hasText:t,highlightColor:i,lineHeight:n})=>({...i?{backgroundColor:t?i:void 0,borderRadius:e/5,padding:r(e,n)}:{}}),p=({letterSpacing:e,lineHeight:t,name:i,url:n})=>({fontFamily:i,fontGroup:"",fontOverrides:{letterSpacing:e,lineHeight:t,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:n}]});function h({hasPin:e,pages:t,limitToSingleFont:i}){let[r,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)(()=>!!e&&(0,o.X7)(t)),h=()=>{let e=t.reduce((e,t)=>{let n=t?.blocks?.filter(e=>[l.h8.PARAGRAPH,l.h8.HEADING].includes(e.type))||[];return i&&n.length>1&&(n=[n[0]]),n.forEach(t=>{let i=t.style?.font||l.Cc.font,{name:n=""}=i;e[n]||(e[n]=i)}),e},{});if(Object.keys(e).length>0){let t=Object.keys(e).map(t=>{let i=e[t];return p({letterSpacing:i.letter_spacing,lineHeight:i.line_height,name:i.name,url:i.url})});(0,a.Z)(t),d(!0)}};return(0,s.Z)(()=>{h()}),(0,s.Z)(()=>{c||h()}),(0,n.useEffect)(()=>{c||u((0,o.X7)(t))},[c,t]),{fontsLoaded:r,mediaDataReceived:c}}},281979:function(e,t,i){i.d(t,{Z:()=>n});function n({currentTime:e,endTime:t,startTime:i}){return"number"!=typeof i||"number"!=typeof t||!(i>=0)||!(t>0)||!(i<t)||i<=e&&e<=t}},408640:function(e,t,i){i.d(t,{B7:()=>o,X7:()=>s,n4:()=>l});var n=i(176783);function a(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let l=(e,t)=>{let i=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e?.match(i)||!t?.match(i))return null;let n=e?.split("."),a=t?.split("."),l=Math.max((n??"").length,(a??"").length);for(let e=0;e<l;e+=1){let t=e<(n?.length??0)?parseInt(n?.[e]??"",10):0,i=e<(a?.length??0)?parseInt(a?.[e]??"",10):0;if(t<i)return -1;if(t>i)return 1}return 0};class o{constructor(e,t,i){if(a(this,"start",Date.now()),a(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=i,this.remaining=i,"undefined"==typeof window)return;this.intervalId=window.setInterval(()=>{let e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume()}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;let e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}function s(e){return e.some(e=>(e?.blocks??[]).some(e=>e.type===n.h8.IMAGE&&!!e.image||e.type===n.h8.VIDEO&&(!!e.video||!!e.video_signature)))}},605203:function(e,t,i){i.d(t,{Z:()=>n});function n(e){try{return decodeURIComponent(e)}catch{return null}}},780268:function(e,t,i){i.d(t,{Q:()=>n,Z:()=>a});let n=()=>{let e,t="undefined"!=typeof window?window.navigator?.connection?.effectiveType:void 0,i=!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x";return t?"4g"===t?e="40-80":(i="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:i}};function a(e){let{vHLSV3MOBILE:t,...i}=e,a=function({vEXP3:e,vEXP4:t,vEXP5:i,vEXP6:a,vEXP7:l,v720P:o}){let{downloadSpeedGroup:s,screenDimension:r}=n(),d={"1x":e,"2x":i},c={"1x":l,"2x":l};return({unknown:d,"0-1":d,"1-5":{"1x":t,"2x":i},"5-10":{"1x":i,"2x":i},"10-20":{"1x":a,"2x":a},"20-40":c,"40-80":c,"80_or_above":c})[s][r]||o||void 0}(i),l=t||void 0;return a?{hlsv3:l,mp4:a}:{hlsv3:l}}},957591:function(e,t,i){i.d(t,{c:()=>r,f:()=>s});var n=i(667294),a=i(213491),l=i(785893);let{Provider:o,get:s}=(0,a.Z)("CloseupAnimations");function r({children:e}){let[t,i]=(0,n.useState)(!1),[a,s]=(0,n.useState)(!1),r=(0,n.useMemo)(()=>({isShowingShareButton:t,setIsShowingShareButton:i,isShowingVisualSearchButton:a,setIsShowingVisualSearchButton:s}),[t,a]);return(0,l.jsx)(o,{value:r,children:e})}},975703:function(e,t,i){i.d(t,{C:()=>r,K:()=>s});var n=i(686659),a=i(667294),l=i(785893);let o=(0,a.createContext)({closeupBodyWidth:0,isCollageOverlayOpen:!1,isRelatedPins10PercentVisible:!1,setCloseupBodyWidth:()=>{},setIsCollageOverlayOpen:()=>{},setIsRelatedPins10PercentVisible:()=>{}});function s(){let e=(0,a.use)(o);if(!e)throw Error("useCloseupBodyContext must be used within CloseupBodyContextProvider");return e}function r({children:e}){(0,a.useEffect)(()=>{(0,n.Z)("Context","/app/www/closeup/desktop/CloseupBody/Context.tsx")},[]);let[t,i]=(0,a.useState)(0),[s,r]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),u=(0,a.useMemo)(()=>({closeupBodyWidth:t,setCloseupBodyWidth:i,isCollageOverlayOpen:s,setIsCollageOverlayOpen:r,isRelatedPins10PercentVisible:d,setIsRelatedPins10PercentVisible:c}),[t,s,d]);return(0,l.jsx)(o,{value:u,children:e})}},398542:function(e,t,i){i.d(t,{Z:()=>s});let n={WebkitMaskImage:"-webkit-radial-gradient(white, black)"},a=e=>`${e??0}px`,l=({topLeft:e,topRight:t,bottomRight:i,bottomLeft:n})=>`${a(e)} ${a(t)} ${a(i)} ${a(n)}`,o=({additionalPadding:e=0}={})=>({borderRadius:l({topLeft:24+e,topRight:24+e,bottomRight:24+e,bottomLeft:24+e}),borderRadiusNumeric:24+e});function s({additionalPadding:e,isSideBySide:t,isPadded:i,isRTL:a,closeupWithinMasonryEnabled:s=!1,blendedUIEnabled:r=!1}){let d={additionalPadding:e};if(r)return{borderStyle:{...n,borderRadius:"unset"},borderRadiusNumeric:0};if(s)return{borderStyle:{...n,borderRadius:"24px"},borderRadiusNumeric:24};if(t){let{borderRadius:e,borderRadiusNumeric:t}=(({getterOptions:e,isPadded:t,isRTL:i})=>t?o(e):i?(({additionalPadding:e=0}={})=>({borderRadius:l({topLeft:0,topRight:32+e,bottomRight:32+e,bottomLeft:0}),borderRadiusNumeric:32+e}))(e):(({additionalPadding:e=0}={})=>({borderRadius:l({topLeft:32+e,topRight:0,bottomRight:0,bottomLeft:32+e}),borderRadiusNumeric:32+e}))(e))({isPadded:i,isRTL:a,getterOptions:d});return{borderStyle:{...n,borderRadius:e},borderRadiusNumeric:t}}{let{borderRadius:e,borderRadiusNumeric:t}=(i?o:({additionalPadding:e=0}={})=>({borderRadius:l({topLeft:32+e,topRight:32+e,bottomRight:0,bottomLeft:0}),borderRadiusNumeric:32+e}))(d);return{borderStyle:{...n,borderRadius:e},borderRadiusNumeric:t}}}},884541:function(e,t,i){let n;i.d(t,{GL:()=>o,_z:()=>a,d0:()=>r,hO:()=>s,pM:()=>l});let a="video",l="image",o=new Map([["DEFAULT",new Set(["button"])],["story_pin",new Set([a])],["product_detail_page",new Set(["description","shopButton","thumbnailsLoaded"])],["product_detail_page_plus",new Set(["description","shopButton","thumbnailsLoaded"])]]),s=(n=new Set,o.forEach(e=>{n=new Set([...n,...e])}),n),r=new Set([...s,l,"resource"])},590940:function(e,t,i){i.d(t,{Z:()=>a});var n=i(978097);function a(e){return{defaultStyle:0,fontFamily:e.name??"",fontGroup:n.gu,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20417.en_GB-b538f60fe2019988.mjs.map